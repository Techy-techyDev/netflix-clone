var CS_CONF={"projectId":3149,"status":1,"hostnames":["shutterstock.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":1639756028,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingMaskedUrlRegex":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"apiErrors":{"validCustomHeaders":[],"validUrls":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net"};
var CS_INTEGRATIONS_CONF = {"foresee":{},"google-optimize":{},"launch-darkly":{}};
/* integration-foresee 2.8.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-foresee-contentsquare","version":"2.8.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function r(e){return"object"==typeof e&&null!==e}function a(e,n,t){if((t=t||window)&&n&&e){var i=!1,r=t[e];r?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e,i||(i=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,s=u.version,d=function(e){var n,t,r,a;if(i((function(){var i=e.name;r=e.version;var o=i.replace("@contentsquare/integration-","");n=o+"-"+r;var u="-contentsquare";a=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:t,snippetVersion:r}}(u);d&&(o=d.parameterName,c=d.snippetBuildName,s=d.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Verint (ForeSee) - v"+s);var e=function(e,n){if(r(window.CS_INTEGRATIONS_CONF)&&r(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,"settings"),n=!1,t="";e&&(e.indexOf("sendArtificialPageviews")>-1&&(n=!0),e.indexOf("setReplayLinkToFirstPV")>-1&&(t=0));var u=!1;function d(e,t,i,r){e="FB_FS_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),u&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),r&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+r])}function f(e){!function(e,n,t){t=t||window;var i=e.split(".");if(1==i.length)a(e,n,t);else{var r=t,o=0;const e=function(){r=o>0?r[i[o-1]]:window,++o>=i.length?a(i[o-1],n,r):a(i[o-1],e,r)};e()}}("FSR",(function(){setTimeout((function(){i((function(){window.fsReady&&fsReady((function(){i((function(){if((u=_uxa.push(["isRecording"]))&&FSR.CPPS&&FSR.CPPS.set){var e=function(e,n){e||(e="missingFromDynamicSnippet");var t=n;isNaN(t)&&(n=0);var i=_uxa.push(["getSessionData"]);if(i){var r=i.projectId,a=i.userId,o=i.sessionNumber,u=i.pageNumber,c=u-n;return n>=u&&(c=u),0===t&&(c=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+r+"&uu="+a+"&sn="+o+"&pvid="+c+"&recordingType=cs&vd="+e}}("fs",t);e&&FSR.CPPS.set("ContentsquareReplay",e)}FSR.onInviteShown&&FSR.onInviteShown.subscribe((function(e){i((function(){e&&(e.uid?d("Feedback Invite Displayed","Survey ID : "+e.uid,0,"cs_foresee=feedback_invite_displayed"):d("Feedback Invite Displayed","true",0,"cs_foresee=feedback_invite_displayed"))}),c)}),!0,!0),FSR.onInviteAccepted&&FSR.onInviteAccepted.subscribe((function(e){i((function(){e&&(e.uid?d("Feedback Invite Submitted","Survey ID : "+e.uid,"etr","cs_foresee=feedback_invite_submitted"):d("Feedback Invite Submitted","true","etr","cs_foresee=feedback_invite_submitted"))}),c)}),!0,!0),FSR.onFeedbackShown&&FSR.onFeedbackShown.subscribe((function(e){i((function(){d("Feedback Displayed","true",0,"cs_foresee=feedback_displayed")}),c)}),!0,!0),FSR.onFeedbackSubmitted&&FSR.onFeedbackSubmitted.subscribe((function(e){i((function(){e&&(e.mid?d("Feedback Submitted","Survey ID : "+e.mid,"etr","cs_foresee=feedback_submitted"):d("Feedback Submitted","true","etr","cs_foresee=feedback_submitted"),e.rating&&d("Feedback Rating",parseInt(e.rating)))}),c)}),!0,!0)}),c)}))}),c)}),500)}))}var p=!1;_uxa.push(["afterPageView",function(e){i((function(){p||(p=!0,f())}),c)}])}),c)}]);/* integration-google-optimize 2.6.0 */
!function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-optimize-contentsquare","version":"2.6.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function a(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function r(e,n,t){if((t=t||window)&&n&&e){var a=!1,r=t[e];r?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e,a||(a=!0,n())}})}}t.r(n);var i=t(0),o=i.name,u=i.version,c=function(e){var n,t,r,i;if(a((function(){var a=e.name;r=e.version;var o=a.replace("@contentsquare/integration-","");n=o+"-"+r;var u="-contentsquare";i=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:n,parameterName:t,snippetVersion:r}}(i);c&&(c.parameterName,o=c.snippetBuildName,u=c.snippetVersion),a((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Google Optimize - v"+u);var e;var n=!1,t="",i="";function c(n,t){var a,r;e.length&&e.indexOf(n+"~~~~"+t)>-1&&(n="",t=""),n&&t&&(e.push(n+"~~~~"+t),r=t,a="AB_GO_"+(a=n),_uxa.push(["trackDynamicVariable",{key:a,value:r}]))}function p(u){if(e=[],window.dataLayer&&!n){n=!0,(window.gtag?gtag:function(){dataLayer.push(arguments)})("event","optimize.callback",{callback:function(e,n){a((function(){e||(e="true"),n&&e&&c(t=n,i=e)}),o)}})}if(document.location.search.indexOf("utm_expid=.")>-1){var p=function(e,n){n||(n="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&=]"+e+n+"([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("utm_expid");p&&(t=p.split(".")[1],i=p.split(".")[2],c(t,i))}!function(e,n,t){t=t||window;var a=e.split(".");if(1==a.length)r(e,n,t);else{var i=t,o=0;const e=function(){i=o>0?i[a[o-1]]:window,++o>=a.length?r(a[o-1],n,i):r(a[o-1],e,i)};e()}}("gaData",(function(){setTimeout((function(){a((function(){var e=!1;for(var n in gaData)e||gaData.hasOwnProperty(n)&&gaData[n].experiments&&(e=!0);if(e){var a=Object.keys(gaData);for(n=0;n<a.length;n++)if(gaData[a[n]].experiments)for(var r=gaData[a[n]].experiments,o=Object.keys(r),u=0;u<o.length;u++){var p=o[u];t=p,i=gaData[a[n]].experiments[p],c(t,i)}}}),o)}),500)}))}_uxa.push(["afterPageView",function(e){a((function(){p()}),o)}])}),o)}]);/* integration-launch-darkly 2.4.3 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-launch-darkly-contentsquare","version":"2.4.3","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function a(e,n,t){if((t=t||window)&&n&&e){var r=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,r||(r=!0,n())}})}}t.r(n);var o=t(0),i=o.name,u=o.version,c=function(e){var n,t,a,o;if(r((function(){var r=e.name;a=e.version;var i=r.replace("@contentsquare/integration-","");n=i+"-"+a;var u="-contentsquare";o=new RegExp(u+"$").test(i),t=i.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(u="-cap",o=new RegExp(u+"$").test(i),t=i.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:n,parameterName:t,snippetVersion:a}}(o);c&&(c.parameterName,i=c.snippetBuildName,u=c.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("LaunchDarkly - v"+u);function e(e){var n=[];function t(e,t){var r,a;e=e.toString(),t=t.toString(),n.length&&n.indexOf(e+"~~~~"+t)>-1&&(e="",t=""),e&&t&&(n.push(e+"~~~~"+t),a=t,r="AB_LD_"+(r=e),_uxa.push(["trackDynamicVariable",{key:r,value:a}]))}if(CS_CONF.integrations_handler=CS_CONF.integrations_handler||{},CS_CONF.integrations_handler.launchdarkly=function(e){var n=e;setTimeout((function(){if(n.on&&n.on("change",(function(e){for(var n=e,r=Object.keys(n),a=0;a<r.length;a++){var o=r[a],i=n[r[a]];i&&i.hasOwnProperty("current")&&"object"!=typeof(i=i.current)&&"function"!=typeof i&&t(o,i)}})),n.allFlags)for(var e=n.allFlags(),r=Object.keys(e),a=0;a<r.length;a++){if("object"!=typeof e[r[a]]&&"function"!=typeof e[r[a]])t(r[a],e[r[a]])}}),500)},"function"==typeof window.CustomEvent){var o=new window.CustomEvent("Contentsquare_LD_Integration_Launch");window.dispatchEvent(o)}!function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)a(e,n,t);else{var o=t,i=0;const e=function(){o=i>0?o[r[i-1]]:window,++i>=r.length?a(r[i-1],n,o):a(r[i-1],e,o)};e()}}("ldMeta",(function(){setTimeout((function(){r((function(){for(var e=0;e<ldMeta.length;e++){if(ldMeta[e].hasOwnProperty("name")&&void 0!==ldMeta[e].name&&null!=ldMeta[e].name&&ldMeta[e].hasOwnProperty("experience")&&void 0!==ldMeta[e].experience&&null!=ldMeta[e].experience&&"object"!=typeof ldMeta[e].experience&&"function"!=typeof ldMeta[e].experience)t(ldMeta[e].name,ldMeta[e].experience)}}),i)}),500)}))}var n=!1;_uxa.push(["afterPageView",function(t){r((function(){n||(n=!0,e())}),i)}])}),i)}]);/*! For license information please see tracking-tag-12.4.0.min.js.LICENSE.txt */
!function(){"use strict";var t={d:function(i,n){for(var r in n)t.o(n,r)&&!t.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:n[r]})},o:function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{get:function(){return It},getRequestParameters:function(){return xt}});var n={};t.r(n),t.d(n,{getRequestParameters:function(){return Pe}});var r="cs-native-frame",s=["childNodes","parentNode","nextSibling","firstChild"],e=["shadowRoot"],u=["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],h=["target"],o=["src"],c={Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",fetch:"csFetch"};function f(t,i,n){var r=function(t,i){for(var n,r=t;r&&!(n=Object.getOwnPropertyDescriptor(r,i));)r=Object.getPrototypeOf(r);return n}(t,i);if(!r)return function(){return this[i]};switch(n){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function a(t){Object.keys(c).forEach((function(i){window[c[i]]=t[i]instanceof Function&&null==t[i].prototype?t[i].bind(window):t[i]})),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),v("csNode",s,t.Node.prototype,"get"),v("csElement",e,t.Element.prototype,"get"),v("csElement",u,t.Element.prototype,"value",!1),v("csHTMLImageElement",o,t.HTMLImageElement.prototype,"set"),v("csEvent",h,t.Event.prototype,"get")}function v(t,i,n,r,s){void 0===s&&(s=!0),i.forEach((function(i){(s||i in n)&&(window["".concat(t+i)]=f(n,i,r))}))}function l(t,i){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=i}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank");var i=document.createElement("cs-native-frame-holder");if(i.setAttribute("hidden",""),document.body.appendChild(i),Element.prototype.attachShadow){var n=i.attachShadow({mode:"closed"});return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,a(window.CSPureWindow),!0)}catch(t){return l("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{a(window)}catch(Hs){l("Critical","failed to copy references from window: ".concat(Hs.message))}function d(t,i){var n=w(csString.prototype.toLowerCase.call(t.localName));return i?csString.prototype.replace.call(n,i,"$1".concat("-static")):n}function w(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function y(t){return t.nodeType===Node.ELEMENT_NODE}function p(t){return t.nodeType===Node.TEXT_NODE}function m(t){return y(t)&&"a"===t.localName}function g(t){return function(t){return y(t)&&"link"===t.localName}(t)&&"stylesheet"===t.rel}function A(t){return y(t)&&"img"===t.localName}function E(t){return y(t)&&"style"===t.localName}function S(t){return y(t)&&"input"===t.localName}function b(t){return y(t)&&"textarea"===t.localName}function N(t){return y(t)&&"script"===t.localName}function T(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}function R(t){return t.nodeType===Node.DOCUMENT_NODE}function O(t){return T(t)&&"host"in t&&"mode"in t}var k=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var I="detached";function x(t){for(var i=t,n=[i];null!==csNodeparentNode.apply(i);)i=csNodeparentNode.apply(i),csArray.prototype.push.call(n,i);return L(i)&&csArray.prototype.push.call(n,I),{ancestors:n,selectionRoot:i}}function L(t){return ht.isValidElement(t)}var C=Number.MAX_SAFE_INTEGER||9007199254740991;function _(){}function M(t,i){return 0===csString.prototype.lastIndexOf.call(t,i,0)}function D(t,i){return-1!==csString.prototype.indexOf.call(t,i,t.length-i.length)}var P=34164e6,U={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=C),Math.floor(Math.random()*t)}},j="function"==typeof Symbol?Symbol("json"):null;var q,F=j?function(t){if(t[j])return t[j];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var i="["+F(t[0]),n=1;n<t.length;n++)i+=","+F(t[n]);return i+"]"}return t[j]=csJSON.stringify(t)}:csJSON.stringify;function H(t){return G(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function V(t){return t===parseInt(t,10)}function z(t){return G(t)&&("string"==typeof t||t instanceof csString)}function J(t){return"object"==typeof t}function G(t){return void 0!==t}function W(t){return G(t)&&null!==t}function B(t){return"function"==typeof t}function K(t){return t instanceof Element}!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(q||(q={}));var Y=function(){function t(){}return t.setStrategy=function(i){t.t=i},t.computeIsActive=function(i){t.i=U.boolean(i)},t.isLoggingActive=function(){return t.i},t.getStrategy=function(){return t.t},t.debug=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,q.debug)},t.warn=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,q.warn)},t.error=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,q.error)},t.critical=function(i,n){void 0===n&&(n=""),t.i&&this.t.send(i,n,q.critical)},t.tryToExecute=function(t,i){var n=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=i.apply(void 0,r);return G(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(i){return n.error(i,t)})):e}catch(i){try{n.error(i,t)}catch(t){}}}},t.i=!1,t}(),X=function(t){return function(i,n,r){var s=n.toString(),e=t||"".concat(i.constructor&&i.constructor.name,".").concat(s),u=r.value;r.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Y.tryToExecute(e,u.bind(this)).apply(void 0,t)}}},$=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector;function Z(t,i){if(!(!!t&&z(t)))return Y.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return $.call(i,t),!0}catch(i){return Y.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}function Q(t,i){return!!i&&csArray.prototype.some.call(i,(function(i){return $.call(t,i)}))}var tt=[/\d{4}/,/^ember\d+$/],it="data-cs-override-id",nt="data-cs-dynamic-id";function rt(t,i,n,r){var s=r.dynamicIdRegex||null,e=d(t,r.dynamicElementNameRegex);if(function(t,i){var n=st(t);return n&&csString.prototype.match.call(n,/^[\w-]+$/)&&et(it,n,i)}(t,n)){var u=st(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"[").concat(it,'="').concat(u,'"]')}}var h=function(t,i,n){if(!n.uniqueAttributes)return{success:!1};for(var r=0,s=n.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(et(e,u,i))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,n,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var o=function(t,i,n){if(!n.uniqueCssSelectors)return;for(var r=0,s=n.uniqueCssSelectors;r<s.length;r++){var e=s[r];if($.call(t,e)&&ut(e,i))return e}return}(t,n,r);if(o)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UCS[").concat(o,"]")};var c=function(t){var i=t.getAttribute("id");return i?w(i):i}(t);if(function(t,i,n,r){return i&&!function(t){return null!==st(t)}(t)&&!function(t,i,n){return t.hasAttribute(nt)||function(t,i){var n=!1;t&&i&&(n=i.test(t));return t&&(csArray.prototype.some.call(tt,(function(i){return i.test(t)}))||n)}(i,n)}(t,i,r)&&function(t,i){return t&&et("id",t,i)}(i,n)}(t,c,n,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#").concat(c)};var f=function(t,i){if(!i.reliableSelectors)return;for(var n=0,r=i.reliableSelectors;n<r.length;n++){var s=r[n];if($.call(t,s))return s}return}(t,r);if(f){var a=function(t,i,n){if(t===I||9===t.nodeType)return 0;for(var r=0,s=i.previousElementSibling;s;)$.call(s,n)&&(r+=1),s=s.previousElementSibling;return r}(i,t,f);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,"[").concat(f,"](").concat(a,")")}}var v=function(t,i,n){if(t===I||9===t.nodeType)return 0;for(var r=n.dynamicElementNameRegex,s=d(i,r),e=0,u=i.previousElementSibling;u;)d(u,r)!==s||Q(u,n.reliableSelectors)||(e+=1),u=u.previousElementSibling;return e}(i,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,":eq(").concat(v,")")}}function st(t){return t.getAttribute(it)}function et(t,i,n){try{return 1===n.querySelectorAll("[".concat(t,'="').concat(i,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function ut(t,i){try{return 1===i.querySelectorAll(t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var ht;function ot(t,i,n){var r=csArray.prototype.shift.call(t);if(0===t.length)return ct(r,n);var s=rt(r,t[0],i,n),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!n.fullPath&&u){var h=t[t.length-1];return"".concat(ct(h,n)).concat(e)}var o=ot(t,i,n);return"".concat(o?"".concat(o,">"):"").concat(e)}function ct(t,i){if(t===I)return"|detached|";if(t.host){var n=x(t.host),r=n.ancestors,s=n.selectionRoot;return"".concat(ot(r,s,i),"|shadow-root|")}return 11===t.nodeType?"|fragment|":""}!function(t){function i(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function n(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=i,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=n(r);if(e===document)return"";if(!i(e))return t.INVALID_ELEMENT;var u=x(e);return ot(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=n(r);if(e===document)return{path:"",firstAnchorParent:null};if(!i(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var i=t,n=[i],r=null;null!==csNodeparentNode.apply(i);)null===r&&m(i)&&(r=i),csArray.prototype.push.call(n,csNodeparentNode.apply(i)),i=csNodeparentNode.apply(i);return L(i)&&csArray.prototype.push.call(n,I),{firstAnchorParent:r,ancestors:n,selectionRoot:i}}(e),h=u.firstAnchorParent;return{path:ot(u.ancestors,u.selectionRoot,s),firstAnchorParent:h}}}(ht||(ht={})),window.CSPathComputation=window.CSPathComputation||ht;var ft=function(t,i){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},ft(t,i)};function at(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}ft(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var vt=function(){return vt=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t},vt.apply(this,arguments)};function lt(t,i,n,r){var s,e=arguments.length,u=e<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,i,n,r);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(u=(e<3?s(u):e>3?s(i,n,u):s(i,n))||u);return e>3&&u&&Object.defineProperty(i,n,u),u}function dt(t,i,n,r){return new(n||(n=Promise))((function(s,e){function u(t){try{o(r.next(t))}catch(t){e(t)}}function h(t){try{o(r.throw(t))}catch(t){e(t)}}function o(t){var i;t.done?s(t.value):(i=t.value,i instanceof n?i:new n((function(t){t(i)}))).then(u,h)}o((r=r.apply(t,i||[])).next())}))}function wt(t,i){var n,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(e){return function(h){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=i.call(t,u)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,h])}}}Object.create;function yt(t,i,n){if(n||2===arguments.length)for(var r,s=0,e=i.length;s<e;s++)!r&&s in i||(r||(r=Array.prototype.slice.call(i,0,s)),r[s]=i[s]);return t.concat(r||Array.prototype.slice.call(i))}Object.create;var pt,mt=function(){function t(t){var i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||P,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=vt({enabled:null!==(i=t.apiErrorsEnabled)&&void 0!==i?i:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.h(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.h(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.h(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled}return t.prototype.getTrackerUri=function(){return"".concat(this.g(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.g(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.g(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.g(),"://").concat(this.loggerDomain)},t.prototype.g=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var i=this;t&&t.forEach&&t.forEach((function(t){var n=t[0],r=t.slice(1);if("setOption"===n){var s=r[0],e=r[1];i.A(s,e)}}))},t.prototype.A=function(t,i){"trackerDomain"===t&&(this.trackerDomain=i),"recordingDomain"===t&&(this.recordingDomain=i),"loggerDomain"===t&&(this.loggerDomain=i),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=i),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=i),"minLogLevel"===t&&(this.minLogLevel=i),"useHttps"===t&&(this.useHttps=!!i)},t.prototype.h=function(t){return t?this.S(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,i){"emitDebugEvents"===t&&(this.emitDebugEvents=i),"minLogLevel"===t&&(this.minLogLevel=i)},t.prototype.S=function(t){try{var i=/^\/(.*)\/([gim]*)$/.exec(t);if(i){var n=i[1],r=i[2];return new RegExp("^".concat(n,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),gt=function(){function t(t,i){this.N=t,this.T=i}return t.prototype.init=function(){this.R=this.N.self!==this.N.top,this.T.iframesTracking&&this.R?this.O=!1:this.O=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.O},t}();!function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(i){return"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(t[i]))})),"&")}}(pt||(pt={}));var At=function(){function t(t,i){this.domainUri=t,this.path=i,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,i){return vt(vt({},t),i)})):{}},t}(),Et=function(t){function i(i,n){return t.call(this,i,n)||this}return at(i,t),i.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.I(t);var i=pt.toQuery(t);this.L(i),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},i.prototype.L=function(t){var i=new window.Image(1,1);i.onload=_,i.onerror=_,csHTMLImageElementsrc.call(i,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},i.prototype.I=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},i}(At),St=function(){function t(t,i){this.C=t,this._=i}return t.prototype.init=function(){this.M=new Et(this.C.getLoggerUri()),this.M.setRequestParametersProviders(this,this._)},t.prototype.send=function(t){this.D=t,this.M.send()},t.prototype.getRequestParameters=function(){return{a:this.D.app,l:this.D.level,m:this.D.message,s:this.D.stacktrace}},t}(),bt=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Nt=/[a-zA-Z0-9+_-](?:@|%40)/,Tt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Rt=new RegExp("(ey".concat(Tt,"\\.ey").concat(Tt,"\\.").concat(Tt,")"),"g"),Ot=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&Nt.test(t)?csString.prototype.replace.call(t,bt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,Rt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,i){var n=this;return csArray.prototype.forEach.call(i,(function(i){t[i]=n.anonymizeEmail(t[i])})),t},t}(),kt="12.4.0";function It(){return kt}function xt(){return{v:kt}}var Lt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Ct(){return Math.floor(Lt()/1e3)}var _t,Mt,Dt=function(){function t(t,i){this.P=t,this.U=i}return t.prototype.getRequestParameters=function(){return vt(vt({d:"".concat(Lt()),p:this.U.anonymizeEmail(window.location.href),u:navigator.userAgent},this.P.getRequestParameters()),xt())},t}(),Pt="snippet-",Ut="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(_t||(_t={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Mt||(Mt={}));var jt=function(){function t(t,i,n){var r;this.j=i,this.U=new Ot,this.q=Mt[q.warn],this.q=Mt[t.minLogLevel||q.warn],this.M=n||new St(t,new Dt(t,this.U)),this.F=((r={})[q.debug]=[],r[q.warn]=[],r[q.error]=[],r[q.critical]=[],r),this.H={implementation:{},dynamic:{}},this.M.init()}return t.prototype.send=function(t,i,n){if(void 0===i&&(i=""),void 0===n&&(n=q.warn),this.V(n,i)){csArray.prototype.push.call(this.F[n],i||"");var r={message:this.J(t,i),stacktrace:this.G(t),app:"uxa",level:n};this.M.send(r)}},t.prototype.J=function(t,i){var n=t instanceof Error?this.U.anonymizeEmail(t.message||t.toString()):t;return i&&(n+=" ErrorCode: ".concat(i)),n},t.prototype.G=function(t){return t instanceof Error?"".concat(t.stack||"No stacktrace"," ").concat(this.W()):this.W()},t.prototype.W=function(){var t=this.j.getVisitorService(),i=null==t?void 0:t.getVisitor();if(!i)return"No context";var n=this.j.getSessionService(),r=n&&n.getSession(),s={userId:i.id,sessionNumber:i.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.V=function(t,i){if(Mt[t]<this.q)return!1;if(0===(null==i?void 0:csString.prototype.indexOf.call(i,Ut,0)))return this.B(i,_t.IMPLEMENTATION);if(0===(null==i?void 0:csString.prototype.indexOf.call(i,Pt,0)))return this.B(i,_t.DYNAMIC);var n=this.F[t];return!(n.length>=5)&&(!i||!csArray.prototype.some.call(n,(function(t){return t===i})))},t.prototype.B=function(t,i){return t in this.H[i]?!(this.H[i][t]>=5)&&(this.H[i][t]+=1,!0):(this.H[i][t]=1,!0)},t}(),qt=document.createElement("a");function Ft(t){return qt.href=t,qt.href}function Ht(t){if(!M(t,"http://")&&!M(t,"https://"))return"";var i=document.createElement("a");return i.href=t,decodeURIComponent(i.hostname)}function Vt(t,i){return csArray.prototype.some.call(i,(function(i){return D(t,".".concat(i))||t===i||""===i}))}var zt,Jt,Gt,Wt,Bt="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(zt||(zt={})),function(t){t.Parent="parent",t.Child="child"}(Jt||(Jt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback"}(Gt||(Gt={})),function(t){t.buildBaseMessage=function(t,i,n,r){var s={type:t,from:i,pid:n,signature:Bt};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,i,n,r){var s=Ht(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===Bt&&t.data.from===i&&t.data.pid===n&&Vt(s,r)},t.sendPostMessage=function(t,i,n,r){r?t.postMessage(n,i,r):t.postMessage(n,i)},t.sendChannelMessage=function(t,i){t.postMessage(i)},t.closeChannelPort=function(t){t.close()}}(Wt||(Wt={}));var Kt,Yt,Xt,$t,Zt=function(){function t(t){this.P=t}return t.prototype.send=function(t,i,n){void 0===i&&(i=""),void 0===n&&(n=q.warn);var r={message:t,errorCode:i,level:n},s=Wt.buildBaseMessage(Gt.ChildLogMessage,Jt.Child,this.P.projectId);s.content=r,Wt.sendPostMessage(window.parent,"*",s)},t}(),Qt=function(){function t(){}return t.prototype.setContext=function(t,i){this.K=t,this.Y=i},t.prototype.getVisitorService=function(){return this.K},t.prototype.getSessionService=function(){return this.Y},t}();!function(t){function i(t){var i=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return i?decodeURIComponent(i[2]):null}function n(i,n,s,e,u,h){var o=encodeURIComponent("".concat(n)),c=s===t.CURRENT_DOMAIN?void 0:s,f=r(e),a=f?";expires=".concat(f.toUTCString()):"",v=W(c)?";domain=".concat(c):"",l="".concat(i,"=").concat(o).concat(a).concat(";path=/").concat(v);return G(u)&&u!==Xt.NotSet&&(l="".concat(l,";SameSite=").concat(u)),G(h)&&h===$t.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return H(t)?new csDate(Lt()+t):t}function s(t,r){i(t)&&n(t,"",r,new csDate(0)),i(t)&&n(t,"",r,new csDate(0),Xt.None,$t.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=i,t.set=n,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=i(e);if(null!==u&&"1"!==u)return u;for(var h=csString.prototype.split.call(window.location.hostname,"."),o=csArray.prototype.pop.call(h);h.length&&(null===u||"1"===u);)n(e,o=csArray.prototype.join.call([csArray.prototype.pop.call(h),o],"."),o,void 0,t,r),u=i(e);return s(e,o),o}}(Kt||(Kt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(Yt||(Yt={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Xt||(Xt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}($t||($t={}));var ti=function(){function t(t,i,n){this.P=t,this.X=i,this.$=n,this.Z=!1,this.tt=Xt.NotSet,this.it=$t.No}return t.prototype.getSameSiteFlag=function(){return this.tt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.nt},t.prototype.getRootDomain=function(){return this.st},t.prototype.init=function(){if(!this.P.cookielessTrackingEnabled){var t=this.et(),i=this.ut();this.Z=this.ht(t,i),this.Z?(this.tt=t,this.it=i):this.P.secureCookiesEnabled&&"https:"===this.X.getUrlProtocol()&&(this.it=$t.Yes),this.st=this.ot(),this.nt=this.ft(this.st)}},t.prototype.ht=function(i,n){return!Yt.browserIsSafariV12()&&(Kt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,i,n),!!Kt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(Kt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.et=function(){return"http:"===this.X.getUrlProtocol()?Xt.Lax:this.$.isSameSiteNoneSecureNeeded()||this.P.crossDomainTracking?Xt.None:Xt.Lax},t.prototype.ut=function(){return"http:"===this.X.getUrlProtocol()?$t.No:this.P.secureCookiesEnabled||this.P.crossDomainTracking||this.$.isSameSiteNoneSecureNeeded()?$t.Yes:$t.No},t.prototype.isSameSiteSupported=function(){return this.Z},t.prototype.set=function(t,i,n){var r=Kt.toExpireDate(n);Kt.set(t,i,this.nt,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var i=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return i?decodeURIComponent(i[2]):null},t.prototype.delete=function(t,i){var n=i||this.nt;Kt.remove(t,n)},t.prototype.ot=function(){var t=this.$.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),i=t?Xt.None:void 0,n=t?$t.Yes:void 0;return Kt.getRootDomain(i,n)},t.prototype.ft=function(t){return this.P.allowSubdomains?t:Kt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),ii="_cs_t",ni=function(){function t(t,i){this.at=t,this.P=i,this.vt=!1,this.lt=!1}return t.prototype.init=function(){if(!this.P.cookielessTrackingEnabled&&this.at.isTopWindowTracker()&&"cookie"in document){if(!this.at.isInIframeContext()&&Kt.isCookiePresent())return this.vt=!0,void(this.lt=!1);if(Kt.set(ii,"1",Kt.CURRENT_DOMAIN),null!==Kt.get(ii))return this.vt=!0,this.lt=!1,void Kt.remove(ii,Kt.CURRENT_DOMAIN);Kt.set(ii,"1",Kt.CURRENT_DOMAIN,void 0,Xt.None,$t.Yes),null!==Kt.get(ii)&&(this.vt=!0,this.lt=!0,Kt.remove(ii,Kt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.vt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.lt},t}();function ri(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.getItem(t)!==t?!1:(localStorage.removeItem(t),!0)}catch(t){return!1}}var si=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.wt()},t.wt=function(){try{var t={},i=Object.assign(t,{a:1},{b:2,c:{d:4}}),n={a:1,b:2,c:{d:4}};return csJSON.stringify(i)===csJSON.stringify(n)&&csJSON.stringify(t)===csJSON.stringify(n)}catch(t){return!1}},t}();var ei,ui,hi,oi,ci=function(){function t(t,i){this.P=t,this.$=i}return t.prototype.canTrack=function(){return this.yt()&&this.gt()&&this.At()},t.prototype.canTrackInChild=function(){return this.yt()&&this.gt()},t.prototype.At=function(){return this.P.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}()&&ri():this.$.areCookiesEnabled()&&ri()},t.prototype.gt=function(){return this.P.isProjectActive()&&Vt(window.location.hostname,this.P.hostnames)},t.prototype.yt=function(){return!this.Et()&&this.St()&&si.check()},t.prototype.Et=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.St=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),fi=function(){function t(t,i,n,r,s){this.K=t,this.Y=i,this.bt=n,this.Nt=r,this.P=s}return t.prototype.get=function(){return{exclusion:this.bt.getAppliedTrackingDraw(),visitor:this.K.getVisitor(),session:this.Y.getSession(),cvars:this.Nt.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.bt.exclude(this.P),this.K.removeVisitor(),this.Y.removeSession(),this.Nt.removeCustomVariablesSession()},t.prototype.include=function(t){this.bt.removeExclusion(),this.K.setVisitor(t.visitor),t.session?this.Y.setSession(t.session):this.Y.removeSession(),t.cvars?this.Nt.setCustomVariableSession(t.cvars):this.Nt.removeCustomVariablesSession()},t}(),ai="_cs_id",vi=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,li=function(){function t(t,i,n,r){this.P=t,this.Tt=i,this.Rt=n,this.Ot=r}return t.prototype.get=function(){var i;return(i=this.P.cookielessTrackingEnabled?this.Ot.getItem(ai):this.Tt.get(ai))?t.fromString(i):null},t.prototype.set=function(i){var n=t.toString(i);if(this.P.cookielessTrackingEnabled)this.Ot.setItem(ai,n);else{var r=new csDate(i.expires);this.Tt.set(ai,n,r),this.Rt.setCookie(ai,n,r)}},t.prototype.remove=function(){this.P.cookielessTrackingEnabled?this.Ot.removeItem(ai):(this.Tt.delete(ai),this.Rt.removeCookie(ai))},t.prototype.handleSubdomainChange=function(){if(!this.P.cookielessTrackingEnabled){var t=this.get();t&&(this.P.allowSubdomains?this.Tt.delete(ai,ti.CURRENT_DOMAIN):this.Tt.delete(ai,this.Tt.getRootDomain()),this.set(t))}},t.fromString=function(t){var i=csString.prototype.split.call(t,"."),n=i[0],r=i[1],s=i[2],e=i[3],u=i[4],h=i[5],o=i[6];return{id:n,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(h),expires:Number(o)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return vi.test(t)},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(ei||(ei={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(ui||(ui={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(hi||(hi={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(oi||(oi={}));var di,wi="_cs_s",yi=18e5,pi=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,mi=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(di||(di={}));var gi,Ai=function(){function t(t,i,n,r){this.P=t,this.Tt=i,this.Rt=n,this.Ot=r,this.kt=null,this.It=!1}return t.prototype.get=function(i){var n=this.getRawSession(i);return this.isValid(n)?t.fromString(n):null},t.prototype.getRawSession=function(i){if(i){var n=this.xt();return t.Lt(n)}var r=this.Ct(),s=r.sessionString,e=r.status,u=t.Lt(s);if(e!==di.EXPIRED)return u;if(this.P.cookielessTrackingEnabled)return null;var h=this.xt();if(!h)return null;var o=csString.prototype.split.call(h,mi);if(!t._t(o))return h;var c=o[o.length-1],f=parseInt(c,10);return isNaN(f)||this.Mt(f),u},t.prototype.set=function(t,i){void 0===i&&(i=yi);var n=Lt()+i,r=this.toString(t);r+="".concat(mi).concat(n),this.Dt(r,n),this.P.cookielessTrackingEnabled?this.Ot.setItem(wi,r):(this.Tt.set(wi,r,i),this.Rt.setCookie(wi,r,i))},t.prototype.remove=function(){this.P.cookielessTrackingEnabled?this.Ot.removeItem(wi):(this.Tt.delete(wi),this.Rt.removeCookie(wi)),this.Pt()},t.prototype.handleSubdomainChange=function(){if(!this.P.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.P.allowSubdomains?this.Tt.delete(wi,ti.CURRENT_DOMAIN):this.Tt.delete(wi,this.Tt.getRootDomain()),this.set(t))}},t.prototype.isValid=function(i){return null!==i&&t.isValidSessionString(i)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],mi)},t.prototype.Dt=function(t,i){this.kt={sessionString:t,expires:i}},t.prototype.Ct=function(){return this.kt?this.kt&&Lt()<=this.kt.expires?{sessionString:this.kt.sessionString,status:di.FOUND}:{sessionString:this.kt.sessionString,status:di.EXPIRED}:{sessionString:this.xt(),status:di.NOT_FOUND}},t.prototype.Pt=function(){this.kt=null},t.prototype.Mt=function(t){this.kt&&(this.kt.expires=t,this.It=!0)},t.prototype.isCacheRefreshed=function(){return this.It},t.prototype.resetCacheRefreshed=function(){this.It=!1},t.prototype.xt=function(){if(this.P.cookielessTrackingEnabled){var t=this.Ot.getItem(wi);return!t||this.Ut(t)?null:t}return this.Tt.get(wi)},t.prototype.Ut=function(t){var i=csString.prototype.split.call(t,mi),n=parseInt(i[i.length-1],10);return!isNaN(n)&&Lt()>n},t._t=function(t){return 13===t[t.length-1].length},t.Lt=function(t){var i;if(!t)return null;var n=null===(i=csString.prototype.match.call(t,pi))||void 0===i?void 0:i[1];return null!=n?n:null},t.fromRawString=function(i){var n=t.Lt(i);return null!==n?t.fromString(n):null},t.fromString=function(t){var i=csString.prototype.split.call(t,mi),n=i[0],r=i[1],s=i[2];return{recordingState:r,etrState:null!=s?s:hi.ETR_OFF,pageNumber:parseInt(n,10)}},t.isValidSessionString=function(t){return pi.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?li.fromString(t._cs_id):null,session:t._cs_s?Ai.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(gi||(gi={}));var Ei,Si="_cs_ex",bi=2592e6,Ni=/^[0-9]+$/,Ti=function(){function t(t,i,n,r){this.P=t,this.Tt=i,this.Rt=n,this.Ot=r}return t.prototype.get=function(){return this.P.cookielessTrackingEnabled?Number(this.Ot.getItem(Si)):Number(this.Tt.get(Si))},t.prototype.set=function(t){this.P.cookielessTrackingEnabled?this.Ot.setItem(Si,t):(this.Tt.set(Si,t,bi),this.Rt.setCookie(Si,t,bi))},t.prototype.remove=function(){this.P.cookielessTrackingEnabled?this.Ot.removeItem(Si):(this.Tt.delete(Si),this.Rt.removeCookie(Si))},t.isValidExclusionString=function(t){return Ni.test(t)},t}(),Ri="_cs_cvars",Oi=function(){function t(t,i,n,r){this.P=t,this.Tt=i,this.Rt=n,this.Ot=r}return t.prototype.get=function(){return this.P.cookielessTrackingEnabled?this.Ot.getItem(Ri):this.Tt.get(Ri)},t.prototype.set=function(t){this.P.cookielessTrackingEnabled?this.Ot.setItem(Ri,t):(this.Tt.set(Ri,t),this.Rt.setCookie(Ri,t))},t.prototype.remove=function(){this.P.cookielessTrackingEnabled?this.Ot.removeItem(Ri):(this.Tt.delete(Ri),this.Rt.removeCookie(Ri))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function i(t){var i=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(i,t)>=0}))}t.isRawDomainState=i,t.isValid=function(t){return!!i(t)&&((!t._cs_id||li.isValidVisitorString(t._cs_id))&&(!t._cs_s||Ai.isValidSessionString(t._cs_s))&&(!t._cs_ex||Ti.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||Oi.isValidCustomVarString(t._cs_cvars)))}}(Ei||(Ei={}));var ki,Ii=function(){function t(t,i){this.jt=t,this.qt=i}return t.prototype.retrieve=function(i,n){var r=this;this.Ft=n,this.retrievedStates=[],this.Ht=csArray.prototype.map.call(csArray.prototype.filter.call(i,(function(t){return r.Vt(t)})),t.getXdframeOrigin),this.jt.onMessage((function(t){r.zt(t)})),this.jt.onTimeout((function(){r.Jt()})),this.jt.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Ht,t.getXdframeUrl),(function(t){return r.jt.open(t)}))},t.prototype.zt=function(t){if(this.Gt(t)){var i=t.data;if(!Ei.isValid(i))throw this.jt.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,i)}this.Wt()&&(this.jt.stop(),this.Ft(csArray.prototype.map.call(this.retrievedStates,gi.fromRaw)))},t.prototype.Jt=function(){Y.warn("xdframe: all messages not received")},t.prototype.Gt=function(t){return csArray.prototype.indexOf.call(this.Ht,t.origin)>-1},t.prototype.Wt=function(){return this.retrievedStates.length===this.Ht.length},t.prototype.Vt=function(t){return!D(this.qt.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),xi=function(){function t(){var t=this;this.Bt=3e3,this.Kt=function(i){t.handleMessage(i)}}return t.prototype.onMessage=function(t){this.Yt=t},t.prototype.onTimeout=function(t){this.Xt=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Kt),this.$t=window.setTimeout((function(){t.Xt()}),this.Bt)},t.prototype.open=function(t){var i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),document.body.appendChild(i),i},t.prototype.stop=function(){window.removeEventListener("message",this.Kt),window.clearTimeout(this.$t),this.Yt=_,this.Xt=_},t.prototype.handleMessage=function(t){this.Yt(t)},lt([X("XdframeMessage")],t.prototype,"handleMessage",null),t}(),Li=function(){function t(){this.Zt=new XMLHttpRequest}return t.prototype.send=function(t){var i=this,n=t.path,r=t.domainUri,s=t.query,e=t.headers,u=t.method,h=t.body,o=t.onLoadCallback,c=t.onErrorCallback,f=t.timeout,a=t.onTimeoutCallback,v=r;if(n&&(v=csString.prototype.concat.call(v,"/",n)),s&&(v=csString.prototype.concat.call(v,"?",s)),this.Zt.open(u,v,!0),e)for(var l=0,d=e;l<d.length;l++){var w=d[l];this.Zt.setRequestHeader(w.name,w.value)}o&&(this.Zt.onload=function(){var t={responseText:i.Zt.responseText,status:i.Zt.status};o(t)}),c&&(this.Zt.onerror=function(){c()}),f&&a&&(this.Zt.timeout=f,this.Zt.ontimeout=function(){a()}),this.Zt.send(h)},t.prototype.abort=function(){this.Zt.abort()},t}(),Ci=function(){function t(){}return t.prototype.send=function(t){return dt(this,void 0,void 0,(function(){var i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S=this;return wt(this,(function(b){switch(b.label){case 0:if(i=t.path,n=t.domainUri,r=t.query,s=t.headers,e=t.method,u=t.body,h=t.onLoadCallback,o=t.onErrorCallback,c=t.timeout,f=t.onTimeoutCallback,this.Qt=new AbortController,a={method:e},v={hasTimedOut:!1},c&&(l=window.setTimeout((function(){S.ti(v)}),c),a.signal=this.Qt.signal),s){for(d={},w=0,y=s;w<y.length;w++)p=y[w],d[p.name]=p.value;a.headers=d}u&&(a.body=u),m=n,i&&(m=csString.prototype.concat.call(m,"/",i)),r&&(m=csString.prototype.concat.call(m,"?",r)),b.label=1;case 1:return b.trys.push([1,5,,6]),[4,csFetch(m,a)];case 2:return g=b.sent(),l&&window.clearTimeout(l),h?[4,g.text()]:[3,4];case 3:A=b.sent(),E={responseText:A,status:g.status},h(E),b.label=4;case 4:return[3,6];case 5:return b.sent(),l&&window.clearTimeout(l),v.hasTimedOut&&f?f():!this.Qt.signal.aborted&&o&&o(),[3,6];case 6:return[2]}}))}))},t.prototype.abort=function(){this.Qt&&this.Qt.abort()},t.prototype.ti=function(t){this.Qt.abort(),t.hasTimedOut=!0},t}(),_i=function(){function t(){this.ii()?this.ni=new Ci:this.ni=new Li}return t.prototype.send=function(t){this.ni.send(t)},t.prototype.abort=function(){this.ni.abort()},t.prototype.ii=function(){return"function"==typeof window.csFetch&&!!window.AbortController},t}();function Mi(t){for(var i=new Uint8Array(t),n="",r=0;r<i.byteLength;r+=1)n+=csString.fromCodePoint(i[r]);return n}function Di(t){return function(t){for(var i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0,s=t.length;r<s;r+=1)n[r]=csString.prototype.charCodeAt.call(t,r);return i}(self.atob(t))}!function(t){t.UNCOMPRESSED="0",t.LZSTRING="1",t.GZIP="2"}(ki||(ki={}));var Pi,Ui,ji,qi=function(t){this.onError=t},Fi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.algorithm=ki.UNCOMPRESSED,i}return at(i,t),i.prototype.isSupported=function(){return!0},i.prototype.compress=function(t,i,n){if("base64"===t)return"string"!=typeof i&&(i=Mi(i)),n(i);n(i)},i.prototype.compressSync=function(t){return t},i}(qi),Hi=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.si=[],r.ei=[],r.ui=0,r.hi=new _i,r}return at(i,t),i.prototype.setCompressionOptions=function(t,i){this.oi=t,this.ci=i},i.prototype.setRequestPayloadProvider=function(t){this.fi=t},i.prototype.setRequestHeader=function(t){csArray.prototype.push.call(this.ei,t)},i.prototype.afterProvidersCalled=function(t){csArray.prototype.push.call(this.si,t)},i.prototype.onLoad=function(t){this.ai=t},i.prototype.onError=function(t){this.vi=t},i.prototype.onTimeout=function(t,i){this.ui=t,this.Xt=i},i.prototype.send=function(t){var i=this;void 0===t&&(t=!0),csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var n=this.retrieveParameters(),r=this.li();csArray.prototype.forEach.call(this.si,(function(t){return t()})),t&&this.oi&&this.ci&&"string"==typeof r?this.oi.compress(this.ci,r,(function(t){i.doSend(n,t)})):this.doSend(n,r)},i.prototype.abort=function(){this.hi.abort()},i.prototype.getCompressionOutputType=function(){return this.ci},i.prototype.li=function(){return this.fi?this.fi.getRequestPayload():""},i.prototype.doSend=function(t,i){var n,r,s,e=this,u=null!==(s=null!==(n=t.ct)&&void 0!==n?n:null===(r=this.oi)||void 0===r?void 0:r.algorithm)&&void 0!==s?s:ki.UNCOMPRESSED;t=vt(vt({},t),{ct:u});var h=pt.toQuery(t);this.hi.send({method:"POST",domainUri:this.domainUri,path:this.path,headers:this.ei,query:h,body:i,onLoadCallback:this.ai,onErrorCallback:function(){e.vi&&e.vi(t,i)},timeout:this.ui,onTimeoutCallback:this.Xt}),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(i){return i(t)}))},lt([X("POST request")],i.prototype,"doSend",null),i}(At);!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE"}(Pi||(Pi={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Ui||(Ui={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(ji||(ji={}));var Vi,zi;function Ji(t,i){void 0===i&&(i=true),t.boundElement.addEventListener(t.type,t.listener,i)}function Gi(t,i){void 0===i&&(i=true),t.boundElement.removeEventListener(t.type,t.listener,i)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(Vi||(Vi={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(zi||(zi={}));var Wi=function(){function t(){}return t.isEmpty=function(){return 0===t.wi.length},t.add=function(i){var n;(n=csArray.prototype.push).call.apply(n,yt([t.wi],i,!1))},t.getAll=function(){return t.wi},t.clear=function(){t.wi=[]},t.wi=[],t}(),Bi=50;var Ki=!1;var Yi=[],Xi=[];function $i(t){csArray.prototype.push.call(Yi,t),performance.mark("".concat(t,"-start"))}function Zi(t){var i=performance.measure(t,"".concat(t,"-start"));if(i){var n=i.duration;csArray.prototype.push.call(Xi,{mName:t,mDuration:n.toFixed(2)}),csArray.prototype.pop.call(Yi),0===Yi.length&&(n>Bi&&Wi.add(Xi),Xi=[])}}function Qi(t){performance.mark("".concat(t,"-start"))}function tn(t){var i=performance.measure(t,"".concat(t,"-start"));if(i){var n=i.duration;n>Bi&&Wi.add([{mName:t,mDuration:n.toFixed(2)}])}}var nn=function(t){return function(i,n,r){var s=r.value;r.value=function(){if(!Ki)return r.value=s,s.apply(this,arguments);$i(t);var i=s.apply(this,arguments);return Zi(t),i}}};function rn(t){var i=csEventtarget.apply(t);return i&&y(i)&&csElementshadowRoot.apply(i)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:i}function sn(t){return Math.round(10*t)/10}function en(t,i){"number"==typeof i&&(i={wait:i});var n,r=i.wait;if(i.ignoreThrottledCalls){var s=0;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var e=Lt();if(e-s>r)return s=e,t.apply(this,i)}}var e,u=[],h=null,o=0,c=function(){o=Lt(),h=null,e=t.apply(n,u)},f=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var f=Lt(),a=r-(f-o);return n=null!=this?this:window,u=yt([],i,!0),a<=0||a>r?(o=f,e=t.apply(n,u),h?(window.clearTimeout(h),h=null):u=[]):h||(h=window.setTimeout(c,a)),e};return f.cancel=function(){h&&(window.clearTimeout(h),o=0,h=null,u=[])},f.flushPending=function(){h&&(window.clearTimeout(h),c())},f}function un(){return function(t,i,n){var r=n.value;n.value=function(t){!1===(null==t?void 0:t.isTrusted)&&un.enabled||r.call(this,t)}}}un.enabled=!0;var hn=function(){function t(i,n,r,s){var e=this;this.yi=i,this.pi=n,this.mi=r,this.gi=s,this.Ai=new Set,this.Ei=[],this.Si=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.bi=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.Ni=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.yi.on(t.Ti,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.yi.on(t.Ri,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.yi.on(t.Oi,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.yi.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.yi.on(t.Ri,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.ki=[{type:"change",listener:this.yi.on(t.Oi,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.yi.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.yi.on(t.Ri,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}}]}var i;return t.prototype.init=function(){this.Ii(),this.xi(),this.Li(),this.Ci(),this.gi.onInputNodeToEncrypt(this._i.bind(this))},t.prototype.Ci=function(){var t=this;this.pi.onDocumentIdentified((function(i){t.Mi(i)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Ei,t)},t.prototype._i=function(t){csArray.prototype.forEach.call(this.Ei,(function(i){return i(t)}))},t.prototype.start=function(){this.Di()},t.prototype.stop=function(){this.Pi()},t.prototype.xi=function(){var t;this.Ui()&&(t=csArray.prototype.push).call.apply(t,yt([this.Ni],this.Si,!1))},t.prototype.Ii=function(){var t;this.ji()&&(t=csArray.prototype.push).call.apply(t,yt([this.Ni],this.bi,!1))},t.prototype.Mi=function(t){R(t)?csArray.prototype.forEach.call(this.Ni,(function(t){return Ji(t)})):this.Ai.has(t)||(this.Ai.add(t),csArray.prototype.forEach.call(this.ki,(function(i){var n=i;n.boundElement=t,Ji(n)})))},t.prototype.qi=function(t){R(t)?csArray.prototype.forEach.call(this.Ni,(function(t){return Gi(t)})):(this.Ai.delete(t),csArray.prototype.forEach.call(this.ki,(function(i){var n=i;n.boundElement=t,Gi(n)})))},t.prototype.Ui=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.ji=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.Pi=function(){var t=this;this.qi(document),this.Ai.forEach((function(i){return t.qi(i)}))},t.prototype.Di=function(){this.Fi(t.Ti),this.Hi(),this.Vi(),this.zi(),this.Fi(t.Ri)},t.prototype.Fi=function(t){for(var i,n=document.querySelectorAll(t),r=0;r<n.length;r+=1){var s=n.item(r);(null===(i=s.value)||void 0===i?void 0:i.length)>0&&this.Ji(s)}},t.prototype.Hi=function(){var t=window.pageYOffset,i=window.pageXOffset;if(0!==t||0!==i){var n=this.pi.getId(document);if(!n)return void Y.warn("scrollListener: document without identifier");var r={type:Pi.SCROLL,args:[n,i,t],date:Lt()};this._i(r)}},t.prototype.Vi=function(){for(var t=document.getElementsByTagName("select"),i=0;i<t.length;i+=1)this.Gi(t[i])},t.prototype.zi=function(){for(var i=document.querySelectorAll(t.Oi),n=0;n<i.length;n+=1)this.Wi(i[n])},t.prototype.Bi=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!y(t)||!this.mi.isSensitive(t)&&!this.mi.isSensitiveChild(t)){var i=this.pi.getId(t);if(i){var n=this.Bi(t),r={type:Pi.SCROLL,args:[i,n.left,n.top],date:Lt()};this._i(r)}else Y.warn("scrollListener: node without identifier")}},t.prototype.mouseOverListener=function(t){if(!y(t.target)||!this.mi.isSensitiveChild(t.target)){var i=this.pi.getId(t.target);if(i){var n={type:Pi.MOUSE_OVER,args:[i],date:Lt()};this._i(n)}else Y.warn("mouseOverListener: node without identifier")}},t.prototype.clickListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.CLICK,args:[n],date:Lt()};this._i(r)}else Y.warn("clickListener: node without identifier")}},t.prototype.inputCheckableListener=function(t){var i=rn(t);this.Wi(i)},t.prototype.Wi=function(t){if(!this.mi.isSensitive(t)&&!this.mi.isSensitiveChild(t)){var i=this.pi.getId(t);if(i){var n={type:Pi.INPUT_CHECKABLE,args:[i,t.checked],date:Lt()};this._i(n)}else Y.warn("inputCheckableListener: node without identifier")}},t.prototype.inputSelectListener=function(t){var i=rn(t);this.Gi(i)},t.prototype.Gi=function(t){if(!this.mi.isSensitive(t)&&!this.mi.isSensitiveChild(t)){var i=this.pi.getId(t);if(i){var n={type:Pi.INPUT_SELECT,args:[i,t.selectedIndex],date:Lt()};this._i(n)}else Y.warn("inputSelectListener: node without identifier")}},t.prototype.inputTextListener=function(t){var i=rn(t);this.Ji(i)},t.prototype.Ji=function(t){var i;if(!this.mi.isSensitive(t)&&!this.mi.isSensitiveChild(t)){var n=this.pi.getId(t);if(n){var r=null!==(i=t.value)&&void 0!==i?i:"";if(this.gi.shouldEncrypt(t))this.gi.registerInputNodeToEncrypt({targetId:n,targetValue:r,date:Lt()});else{var s="number"===t.type?"0":"",e={type:Pi.INPUT_TEXT,args:[n,csString.prototype.replace.call(r,/\S/g,s)],date:Lt()};this._i(e)}}else Y.warn("inputTextListener: node without identifier")}},t.prototype.keyUpListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r=this.Ki[t.key];if(void 0!==r){var s={type:Pi.KEY_UP,args:[n,r],date:Lt()};this._i(s)}}else Y.warn("keyUpListener: node without identifier")}},t.prototype.keyDownListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r=this.Ki[t.key];if(void 0!==r){var s={type:Pi.KEY_DOWN,args:[n,r],date:Lt()};this._i(s)}}else Y.warn("keyDownListener: node without identifier")}},t.prototype.copyListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.CLIPBOARD_COMMAND,args:[n,zi.COPY],date:Lt()};this._i(r)}else Y.warn("copyListener: node without identifier")}},t.prototype.cutListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.CLIPBOARD_COMMAND,args:[n,zi.CUT],date:Lt()};this._i(r)}else Y.warn("cutListener: node without identifier")}},t.prototype.pasteListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.CLIPBOARD_COMMAND,args:[n,zi.PASTE],date:Lt()};this._i(r)}else Y.warn("pasteListener: node without identifier")}},t.prototype.pointerUpListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.POINTER_UP,args:[t.pointerId,t.pointerType,sn(t.clientX),sn(t.clientY),n,t.button],date:Lt()};this._i(r)}else Y.warn("pointerup: node without identifier")}},t.prototype.pointerMoveListener=function(t){var i={type:Pi.POINTER_MOVE,args:[t.pointerId,t.pointerType,sn(t.clientX),sn(t.clientY)],date:Lt()};this._i(i)},t.prototype.pointerDownListener=function(t){var i=rn(t);if(!y(i)||!this.mi.isSensitiveChild(i)){var n=this.pi.getId(i);if(n){var r={type:Pi.POINTER_DOWN,args:[t.pointerId,t.pointerType,sn(t.clientX),sn(t.clientY),n,t.button,{pageX:sn(t.pageX),pageY:sn(t.pageY)}],date:Lt()};this._i(r)}else Y.warn("pointerdown: node without identifier")}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Pi.TOUCH_START,args:[r.identifier,sn(r.clientX),sn(r.clientY)],date:Lt()};this._i(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Pi.TOUCH_MOVE,args:[r.identifier,sn(r.clientX),sn(r.clientY)],date:Lt()};this._i(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var i=t.changedTouches,n=0;n<i.length;n+=1){var r=i[n],s={type:Pi.TOUCH_END,args:[r.identifier,sn(r.clientX),sn(r.clientY)],date:Lt()};this._i(s)}},t.prototype.Li=function(){this.Ki={},this.Ki[" "]=Vi.SPACE,this.Ki.Spacebar=Vi.SPACE,this.Ki.Backspace=Vi.BACKSPACE,this.Ki.Enter=Vi.ENTER,this.Ki.Delete=Vi.DELETE,this.Ki.ArrowUp=Vi.ARROWUP,this.Ki.ArrowDown=Vi.ARROWDOWN,this.Ki.ArrowLeft=Vi.ARROWLEFT,this.Ki.ArrowRight=Vi.ARROWRIGHT,this.Ki.Up=Vi.ARROWUP,this.Ki.Down=Vi.ARROWDOWN,this.Ki.Left=Vi.ARROWLEFT,this.Ki.Right=Vi.ARROWRIGHT,this.Ki.CapsLock=Vi.CAPSLOCK,this.Ki.Shift=Vi.SHIFT,this.Ki.Tab=Vi.TAB,this.Ki.Escape=Vi.ESCAPE,this.Ki.Esc=Vi.ESCAPE,this.Ki.End=Vi.END,this.Ki.Alt=Vi.ALT,this.Ki.Control=Vi.CTRL,this.Ki.Meta=Vi.META},t.Ti=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.Oi=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.Ri='input[type="number"]',lt([nn("RecordingPageEvents.start")],t.prototype,"start",null),lt([X("scroll")],t.prototype,"scrollListener",null),lt([X("mouseOver"),un(),function(t,i,n){var r=n.value;return r&&(n.value=function(t){if(rn(t)===csEventtarget.apply(t))return r.call(this,t)}),n}],t.prototype,"mouseOverListener",null),lt([X("click"),un()],t.prototype,"clickListener",null),lt([X("checkable")],t.prototype,"inputCheckableListener",null),lt([X("select")],t.prototype,"inputSelectListener",null),lt([X("text")],t.prototype,"inputTextListener",null),lt([X("Event handler type: keyup")],t.prototype,"keyUpListener",null),lt([X("Event handler type: keydown")],t.prototype,"keyDownListener",null),lt([X("Event handler type: copy")],t.prototype,"copyListener",null),lt([X("Event handler type: cut")],t.prototype,"cutListener",null),lt([X("Event handler type: paste")],t.prototype,"pasteListener",null),lt([X("Event handler type: pointerup"),un()],t.prototype,"pointerUpListener",null),lt([X("Event handler type: pointermove"),un(),(i={wait:33,ignoreThrottledCalls:!0},function(t,n,r){r.value=en(r.value,i)})],t.prototype,"pointerMoveListener",null),lt([X("Event handler type: pointerdown"),un()],t.prototype,"pointerDownListener",null),lt([X("Event handler type: touchstart"),un()],t.prototype,"touchStartListener",null),lt([X("Event handler type: touchmove"),un()],t.prototype,"touchMoveListener",null),lt([X("Event handler type: touchend"),un()],t.prototype,"touchEndListener",null),t}();function on(t){for(var i=t.length,n=new csArray(i),r=0;r<i;r+=1)n[r]=t[r];return n}function cn(t,i){for(var n=t.length,r=0;r<n;r++)i(t[r],r)}function fn(t,i){for(var n=t.length,r=[],s=0;s<n;s+=1){var e=t[s];i(e)&&csArray.prototype.push.call(r,e)}return r}var an,vn,ln,dn,wn=function(){function t(t,i,n,r,s,e,u){void 0===u&&(u=document);var h=this;this.Yi=t,this.Xi=i,this.$i=n,this.Zi=r,this.pi=s,this.mi=e,this.Qi=u,this.tn=!1,this.nn=function(t){h.Zi.emitInitialDomDone(t)},this.Xi.onCharacterDataMutation((function(t){h.rn(t)})),this.Xi.onAttributesMutation((function(t){A(t.target)&&h.mi.isSensitive(t.target)&&"src"===t.attributeName&&(h.mi.unidentifySensitiveNodes(t.target),h.mi.identifySensitiveNodes(t.target)),h.en(t)})),this.Xi.onChildListMutation((function(t,i){cn(t.removedNodes,(function(t){h.mi.unidentifySensitiveNodes(t)})),cn(t.addedNodes,(function(t){h.mi.identifySensitiveNodes(t),h.pi.identifyNodes(t,i)})),h.un(t,i)})),this.Xi.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(h.mi.identifySensitiveNodes(t.target),h.pi.identifyNodes(csElementshadowRoot.apply(t.target)),h.hn(t))}))}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.isStarted=function(){return this.tn},t.prototype.start=function(){this.isStarted()||(this.tn=!0,this.Xi.start(),this.fn())},t.prototype.stop=function(){this.isStarted()&&(this.tn=!1,this.mi.unidentifySensitiveNodes(this.Qi),this.Xi.stop())},t.prototype.flushEvents=function(){this.Xi.flushPendingMutations()},t.prototype.fn=function(){this.Zi.emitInitialDomStart(),this.mi.identifySensitiveNodes(this.Qi),this.pi.identifyNodes(this.Qi),this.Yi.serializeInitialDom(this.Qi,this.nn)},t.prototype.hn=function(t){if(!this.mi.isSensitive(t.target)&&!this.mi.isSensitiveChild(t.target)){var i=this.Yi.serializeAttachShadowEvent(t);if(i){var n={args:i,date:t.date,type:Pi.ATTACH_SHADOW};this.cn(n)}}},t.prototype.en=function(t){if(!y(t.target)||!this.mi.isSensitiveChild(t.target)&&!this.mi.isSensitiveAttribute(t.target,t.attributeName)){var i=this.Yi.serializeMutationAttribute(t);if(i){var n={args:i,date:t.date,type:Pi.MUTATION_ATTRIBUTE};this.cn(n),this.$i.scanAttribute(t.target,t.attributeName)}}},t.prototype.rn=function(t){var i=t.target.parentElement;if(!i||!this.mi.isSensitive(i)&&!this.mi.isSensitiveChild(i)){var n=this.Yi.serializeMutationCharacterData(t);if(n){var r={args:n,date:t.date,type:Pi.MUTATION_CHARACTER_DATA};this.cn(r),this.$i.scanText(t.target)}}},t.prototype.un=function(t,i){var n=this;if(!y(t.target)&&!T(t.target)||!this.mi.isSensitive(t.target)&&!this.mi.isSensitiveChild(t.target)){var r=this.Yi.serializeMutationChildList(t,i);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(i){var r={args:i,date:t.date,type:Pi.MUTATION_REMOVE};n.cn(r)})),csArray.prototype.forEach.call(e,(function(i){var r={args:i,date:t.date,type:Pi.MUTATION_INSERT};n.cn(r)}))}}},t}(),yn=function(){function t(t){this.an=t,this.vn=0}return t.prototype.addString=function(t){this.vn+=2*t.length},t.prototype.addArrayBuffer=function(t){this.vn+=t.byteLength},t.prototype.isThresholdReached=function(){return this.vn>this.an},t.prototype.reset=function(){this.vn=0},t}(),pn=function(){function t(t,i,n){void 0===t&&(t=[]),void 0===i&&(i={}),void 0===n&&(n=512e3),this.ln=t,this.dn=i,this.wn=new yn(n)}return t.prototype.addEvent=function(t){this.wn.addString(F(t)),csArray.prototype.push.call(this.ln,t)},t.prototype.addEventByTimestamp=function(t){for(var i=0;i<this.ln.length;i+=1){if(this.ln[i].date>t.date)return this.wn.addString(F(t)),void csArray.prototype.splice.call(this.ln,i,0,t)}this.addEvent(t)},t.prototype.eventsCount=function(){return this.ln.length},t.prototype.clearEvents=function(){this.wn.reset(),this.ln=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.wn.isThresholdReached()},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.dn[n]=i[n])},t.prototype.removeRequestParameter=function(t){this.dn.hasOwnProperty(t)&&delete this.dn[t]},t.prototype.getEvents=function(){return this.ln},t.prototype.extractEvents=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=[],r=[];return csArray.prototype.forEach.call(this.ln,(function(i){-1!==csArray.prototype.indexOf.call(t,i.type)?csArray.prototype.push.call(n,i):csArray.prototype.push.call(r,i)})),this.ln=r,n},t.prototype.getRequestPayload=function(){return F(this.ln)},t.prototype.getRequestParameters=function(){var t=vt({},this.dn);return this.ln.length>0&&(t.let=this.ln[this.ln.length-1].date.toString()),t},t}(),mn=function(){function t(){this.yn=1}return t.prototype.getCurrentIndex=function(){return this.yn},t.prototype.increment=function(){this.yn+=1},t.prototype.reset=function(){this.yn=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.yn)}},t}(),gn=function(){function t(){}return t.prototype.emit=function(i,n){var r="".concat(t.mn,".").concat(i),s=t.createEvent(r,{detail:n});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,i){if(void 0===i&&(i={}),"function"==typeof CustomEvent)return new CustomEvent(t,i);var n=this.gn();if(null===n)return null;var r=i.bubbles,s=void 0!==r&&r,e=i.cancelable,u=void 0!==e&&e,h=i.detail;return n.initCustomEvent(t,s,u,h),n},t.gn=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.mn="cs.tracking",t}(),An=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),En=function(t){function i(i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b){var N=t.call(this)||this;return N.P=i,N.An=n,N.En=r,N.dn=s,N.Sn=e,N.bn=u,N.Nn=h,N.Tn=o,N.Rn=c,N.On=f,N.kn=a,N.Y=v,N.$i=l,N.In=d,N.xn=w,N.Ln=y,N.Cn=p,N._n=m,N.Mn=g,N.gi=A,N.Dn=E,N.Pn=S,N.Un=b,N.jn=0,N.qn=0,N.Fn=0,N.Hn=new gn,N.Vn={allowFromQuotaService:!0,allowFromSerialization:!0},N.zn=en((function(){N.pushEvents()}),2e3),N.Jn=function(t){return N.processBrowserEvent(t)},N.Gn=function(t){return N.Wn(t)},N}return at(i,t),i.prototype.init=function(){this.Bn(),this.Kn()},i.prototype.Bn=function(){var t=this;this.An.setRequestPayloadProvider(this.En),this.An.setRequestParametersProviders(this.En),this.An.afterProvidersCalled((function(){t.Dn.addBatchInProgress("".concat(t.Sn.getCurrentIndex()),t.En.getRequestParameters(),t.En.getEvents()),t.En.clearEvents(),t.Sn.increment(),t.En.setRequestParametersFromProvider(t.dn)})),this.An.after((function(i){"ri"in i&&t.Dn.removeBatchInProgress(i.ri)})),this.An.onError((function(i,n){t.Dn.saveFailedRecordingEvents(i,n)})),this.An.onLoad((function(i){i.status>=200&&i.status<=299?t.Dn.recover():Y.warn("recording request failed:".concat(i.status))}))},i.prototype.Kn=function(){var t=this;this.bn.onEvent(this.Jn),this.Nn.onEvent(this.Jn),this.Rn.onEvent(this.Jn),this.Tn.onEvent(this.Gn),this.$i.onEvent(this.Jn),this.In.onEvent(this.Jn),this._n.onEvent(this.Jn),this.On.onEvent(this.Gn),this.gi.onTextNodeToEncrypt(this.Jn),this.gi.onApiErrorToEncrypt((function(i){t.Yn(i)})),this.Un.onEvent(this.Jn),this.gi.onUserIdentifierToEncrypt(this.Jn),this.Pn.onEvent(this.Jn)},i.prototype.isRecording=function(){return this.Y.hasValidSession()&&this.isStarted},i.prototype.isMutationTrackerStarted=function(){return this.Nn.isStarted()},i.prototype.blockSendingEventsFromQuotaService=function(){this.Vn.allowFromQuotaService=!1},i.prototype.allowSendingEventsFromQuotaService=function(){this.Vn.allowFromQuotaService=!0},i.prototype.blockSendingEventsFromSerialization=function(){this.Vn.allowFromSerialization=!1},i.prototype.allowSendingEventsFromSerialization=function(){this.Vn.allowFromSerialization=!0},i.prototype.canSendEvents=function(){return this.Vn.allowFromQuotaService&&this.Vn.allowFromSerialization},i.prototype.onIframeJavascriptError=function(t){this.Xn(t)},i.prototype.onIframeDetailedApiError=function(t){this.$n(t)},i.prototype.onIframeRecordingUserEvent=function(t){for(var i=0,n=t;i<n.length;i++){var r=n[i];this.Wn(r)}},i.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var i=0,n=t;i<n.length;i++){var r=n[i];this.processBrowserEvent(r)}},i.prototype.processBrowserEvent=function(t){this.Y.hasValidSession()&&this.Zn(t)},i.prototype.Wn=function(t){this.kn.isSessionValid()&&this.Zn(t)},i.prototype.Zn=function(t){this.En.addEvent(t),this.En.isThresholdReached()?this.pushEvents():this.En.isFull()&&this.zn(),this.P.emitDebugEvents&&this.Hn.emit("recordingEvent",vt(vt({},t),{typeName:Pi[t.type]}))},i.prototype.onStart=function(){var t=this;this.initStates(),this.En.setRequestParametersFromProvider({getRequestParameters:function(){return{rst:Lt().toString()}}}),this.Pn.start(),this._n.start(),this.In.start(),this.Nn.start(),this.bn.start(),this.Rn.start(),this.On.start(),this.Un.start(),this.P.jsErrorsEnabled&&this.xn.subscribe(i.Qn,(function(i){return t.Xn(i)})),this.P.apiErrors.enabled&&this.Cn.subscribe(i.Qn,(function(i){return t.$n(i)}),{detailedEvent:!0}),this.P.emitDebugEvents&&this.Hn.emit("replayRecordingStarted")},i.prototype.onStop=function(){this.bn.stop(),this.Nn.stop(),this.Rn.stop(),this.Tn.stop(),this.xn.unsubscribe(i.Qn),this.Cn.unsubscribe(i.Qn),this._n.stop(),this.On.stop(),this.Pn.stop(),this.Un.stop()},i.prototype.clearStates=function(){this.Nn.flushEvents(),this.zn.cancel(),this.pushEvents(),this.tr()},i.prototype.initStates=function(){this.Sn.reset(),this.En.setRequestParametersFromProvider(this.dn),this.jn=0,this.qn=0,this.Fn=0},i.prototype.pushEvents=function(){this._n.flushEvents(),this.En.eventsCount()>0&&this.canSendEvents()&&(this.isStarted?this.An.send():this.En.clearEvents())},i.prototype.addInitialDom=function(t){this.En.addEventByTimestamp(t)},i.prototype.$n=function(t){t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody?this.gi.registerApiErrorToEncrypt(t):this.Yn(t)},i.prototype.Yn=function(t){if(this.qn<i.ir){var n={type:Pi.API_ERROR,date:Lt(),args:[this.Mn.anonymize(t)]};this.Jn(n),this.qn=this.qn+1}},i.prototype.Xn=function(t){if(this.jn<i.nr){var n={type:Pi.JAVASCRIPT_ERROR,date:Lt(),args:[this.Ln.anonymize(t)]};this.Jn(n),this.jn=this.jn+1}},i.prototype.rr=function(t){if(this.Fn<i.er){var n={type:Pi.CUSTOM_ERROR,date:Lt(),args:[t]};this.Jn(n),this.Fn=this.Fn+1}},i.prototype.ur=function(t){this.isStarted&&(t===oi.ETR_SESSION?this.En.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[i.hr]=i.cr,t}}):t===oi.ETR_PAGE&&this.En.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[i.ar]=i.cr,t}}))},i.prototype.tr=function(){this.En.removeRequestParameter(i.ar),this.En.removeRequestParameter(i.hr)},i.prototype.clearEvents=function(){this.En.clearEvents()},i.prototype.onCustomJavaScriptErrorEvent=function(t){this.Xn(t)},i.prototype.onCustomErrorEvent=function(t){this.rr(t)},i.prototype.onPageEvent=function(t){this.vr(t)},i.prototype.onUserIdentifierEvent=function(t){var i={userIdentifier:t,date:Lt(),keyId:this.P.encryptionPublicKeyId};this.gi.registerUserIdentifierToEncrypt(i)},i.prototype.onEventTriggerRecording=function(t,i){this.ur(i),this.vr(t),this.pushEvents()},i.prototype.vr=function(t){var n={type:Pi.PAGE_EVENT,date:Lt(),args:[{eventName:csString.prototype.slice.call(t,0,i.lr)}]};this.En.addEvent(n)},i.prototype.triggerConsentGranted=function(){var t={date:Lt(),type:Pi.CONSENT_GRANTED};this.En.addEvent(t)},i.prototype.triggerConsentWithdrawn=function(){var t={date:Lt(),type:Pi.CONSENT_WITHDRAWN};this.En.addEvent(t)},i.Qn="RecordingService",i.lr=255,i.nr=20,i.ir=20,i.er=20,i.ar="etrp",i.hr="etrs",i.cr="1",lt([nn("addInitialDom")],i.prototype,"addInitialDom",null),i}(An),Sn=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.wr=i,u.En=n,u.yr=r,u.P=s,u.pr=e,u.mr={},u.gr=!1,u.Ar=function(t){if(0!==t.length)for(var i=function(t){var i=t.metadata,n=t.events,r=i.datatype;if(!u.Er(i.rt))return"continue";u.wr.setRequestPayloadProvider({getRequestPayload:function(){return n}}),delete i.datatype,u.wr.setRequestParametersProviders({getRequestParameters:function(){return i}});var s="json"===r;u.wr.send(s)},n=0,r=t;n<r.length;n++){i(r[n])}},u.Sr=function(){try{if(!u.gr)return;u.br();var t=u.En.getRequestParameters();if(!u.Er(t.rt))return;if(u.sendLastMessageBeacon(),0===u.En.eventsCount())return;u.P.useMalkaPipeline&&(t.hlm="true"),u.yr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:vt(vt({},t),{datatype:"json"}),events:u.En.getRequestPayload()})}catch(t){}},u.Bn(),u.Nr=u.wr.getCompressionOutputType(),u}return at(i,t),i.prototype.Bn=function(){var t=this;this.wr.onLoad((function(i){i.status>=200&&i.status<=299?t.recover():Y.warn("recording request failed:".concat(i.status))})),this.wr.onError((function(i,n){t.saveFailedRecordingEvents(i,n)}))},i.prototype.onStart=function(){this.mr={},this.Tr()},i.prototype.onStop=function(){this.Rr()},i.prototype.recover=function(){this.yr.recover(this.Ar)},i.prototype.addBatchInProgress=function(t,i,n){this.mr[t]={metadata:i,events:n}},i.prototype.removeBatchInProgress=function(t){delete this.mr[t]},i.prototype.blockSendingLastMessage=function(){this.gr=!1},i.prototype.allowSendingLastMessage=function(){this.gr=!0},i.prototype.sendLastMessageBeacon=function(){this.P.useMalkaPipeline&&this.gr&&this.pr.send()},i.prototype.Tr=function(){window.addEventListener("pagehide",this.Sr)},i.prototype.Rr=function(){window.removeEventListener("pagehide",this.Sr)},i.prototype.Er=function(t){return!this.P.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,ui.TEMPORARILY_RECORDED)},i.prototype.saveFailedRecordingEvents=function(t,i){this.yr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri),metadata:vt(vt({},t),{datatype:this.Nr}),events:i})},i.prototype.br=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.mr),(function(i){var n=t.mr[i],r=n.metadata,s=n.events;t.yr.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:vt(vt({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},lt([X("RecordingRecovery")],i.prototype,"recover",null),i}(An),bn=/[^\s]/g;function Nn(t){return csString.prototype.replace.call(t,bn,"a")}!function(t){t.getShadowRoot=function(t){return t&&(y(i=t)&&csElementshadowRoot.apply(i)&&O(csElementshadowRoot.apply(i)))?t.shadowRoot:null;var i},t.getAllShadowHosts=function t(i){for(var n,r,s=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(n=csArray.prototype.push).call.apply(n,yt([e,r],t(r.shadowRoot),!1));return e}}(an||(an={})),function(t){function i(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function n(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return V(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return V(t)&&t>0?t:window.screen.height}t.documentHeight=i,t.documentWidth=n,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(n()),dh:"".concat(i()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(vn||(vn={})),function(t){var i="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function n(t){var i;return t.parentElement?t.parentElement:t.getRootNode?null===(i=t.getRootNode())||void 0===i?void 0:i.host:null}function r(t){var i;if(!1===(null===(i=t.checkVisibility)||void 0===i?void 0:i.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){var n=t.getBoundingClientRect();if(0==n.width&&0==n.height)return!0}var r,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(r=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(r)))}function s(t){var i=t.getBoundingClientRect(),n=i.left+.5*i.width,r=i.top+.5*i.height;return e(document,n,r)}function e(t,i,n){var r=t.elementFromPoint(i,n);if(!r)return null;var s=an.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,i,n):r}t.isConnected=function(t){return i(t)},t.isEmpty=function(t){for(var i=t.length,n=0;n<i;n++)switch(csString.prototype.charCodeAt.call(t,n)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0},t.getParentElement=n,t.findAllElements=function(t,i){var n;void 0===i&&(i=document);for(var r=on(i.querySelectorAll(t)),s=0,e=an.getAllShadowHosts(i);s<e.length;s++){var u=on(e[s].shadowRoot.querySelectorAll(t));(n=csArray.prototype.push).call.apply(n,yt([r],u,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(i){if(r(i))return!0;var s=n(i);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var i=null,s=t;do{if(!r(s))break;i=s}while(s=n(s));return i},t.createDeepTreeWalker=function(t,i){var n;void 0===i&&(i=NodeFilter.SHOW_ALL);var r=i|NodeFilter.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];return t instanceof Element&&(null===(n=csElementshadowRoot.apply(t))||void 0===n?void 0:n.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1)),{nextNode:function(){for(;s.length>0;){var t=s[s.length-1].nextNode();if(t){var n=an.getShadowRoot(t);if(n&&csArray.prototype.push.call(s,document.createTreeWalker(n,r,null,!1)),0!=(On[t.nodeType]&i))return t}else csArray.prototype.pop.call(s)}return null}}},t.getTopElement=s,t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var i=t.getBoundingClientRect();return i.right+vn.windowOffsetX()<0||i.bottom+vn.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var i=s(t);return null!==i&&!t.contains(i)}(t)},t.isVisibleInViewportInForeground=function(t){if(r(t))return!1;var i=s(t);return t.contains(i)},t.isInViewPort=function(t){var i=s(t);return null!==i&&(t===i||t.contains(i))},t.getAttributeNS=function(t,i,n){var r=t.getAttributeNS(i,n);return""===r?t.hasAttributeNS(i,n)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!m(t)||!t.hasAttribute("href"))||(!(!(y(i=t)&&"select"===i.localName||b(t)||S(t)||function(t){return y(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return y(t)&&"details"===t.localName}(t)&&!function(t){return y(t)&&"summary"===t.localName}(t)))));var i}}(dn||(dn={}));var Tn,Rn,On=((ln={})[Node.ATTRIBUTE_NODE]=NodeFilter.SHOW_ATTRIBUTE,ln[Node.CDATA_SECTION_NODE]=NodeFilter.SHOW_CDATA_SECTION,ln[Node.COMMENT_NODE]=NodeFilter.SHOW_COMMENT,ln[Node.DOCUMENT_FRAGMENT_NODE]=NodeFilter.SHOW_DOCUMENT_FRAGMENT,ln[Node.DOCUMENT_NODE]=NodeFilter.SHOW_ALL,ln[Node.DOCUMENT_TYPE_NODE]=NodeFilter.SHOW_DOCUMENT_TYPE,ln[Node.ELEMENT_NODE]=NodeFilter.SHOW_ELEMENT,ln[Node.ENTITY_NODE]=NodeFilter.SHOW_ENTITY,ln[Node.ENTITY_REFERENCE_NODE]=NodeFilter.SHOW_ENTITY_REFERENCE,ln[Node.NOTATION_NODE]=NodeFilter.SHOW_NOTATION,ln[Node.PROCESSING_INSTRUCTION_NODE]=NodeFilter.SHOW_PROCESSING_INSTRUCTION,ln[Node.TEXT_NODE]=NodeFilter.SHOW_TEXT,ln),kn=function(){function t(t,i,n,r){this.Or=t,this.pi=i,this.kr=n,this.gi=r,this.Ir=!1}var i;return t.prototype.setAnonymization=function(t){this.Lr=t},t.prototype.isDOMSerializationInProgress=function(){return this.Ir},t.prototype.serializeInitialDom=function(t,i){if(this.Or.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&i(t)})).catch((function(t){Y.error(t)}));else{var n=this.Cr(t);i(n)}},t.prototype.Cr=function(t){return{args:[this.Or.serialize(t,{withAnonymization:this.Lr})],date:Lt(),type:Pi.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return dt(this,void 0,void 0,(function(){return wt(this,(function(i){switch(i.label){case 0:this.Ir=!0,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.Or.startSerializeAsync(t,{withAnonymization:this.Lr})];case 2:return[2,i.sent()];case 3:return this.Ir=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var i=this.pi.getId(t.target);if(!i)return Y.warn("serializeMutationCharacterData: node without identifier"),null;var n=t.target;if(n.data===t.oldValue)return null;if(p(n)&&this.gi.shouldEncrypt(n))return this.gi.registerTextNodeMutationToEncrypt({targetId:i,textNode:n,serializedTextData:Nn(n.data),date:t.date}),null;var r=[i,this.kr.getAnonymizedText(this.Lr,n,n.data)];return this._r(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationCharacterData(t,r),r},t.prototype.serializeAttachShadowEvent=function(t){var i=this.pi.getId(t.target);return i?[i,this.Or.serialize(t.shadowRoot)]:(Y.warn("serializeAttachShadowEvent: node without identifier"),null)},t.prototype.serializeMutationAttribute=function(t){var i=this.pi.getId(t.target);if(!i)return null;var n=t.target,r=t.attributeName,s=t.attributeNamespace,e=dn.getAttributeNS(t.target,s,r);e&&(e=this.kr.getAnonymizedAttributeValue(n,this.Lr,r,e));var u=[i,s,r,e];return this._r(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationAttribute(t.oldValue?this.kr.getAnonymizedAttributeValue(n,this.Lr,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,i){var n=this.pi.getId(t.target);return n?this._r(this.Or)&&this.isDOMSerializationInProgress()?this.Or.serializeMutationChildList(t,this.Lr,i):{removedNodes:this.Mr(t),addedNodes:this.Dr(t,n,i)}:null},t.prototype._r=function(t){return t.isAsynchronous()},t.prototype.Mr=function(t){for(var i=[],n=0;n<t.removedNodes.length;n+=1){var r=this.pi.getId(t.removedNodes[n]);r&&csArray.prototype.push.call(i,[r])}return i},t.prototype.Dr=function(t,i,n){var r=[],s=null;if(t.nextSibling){var e=this.pi.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var h=t.addedNodes[u],o=this.Or.serialize(h,{excludedNodes:n,withAnonymization:this.Lr}),c=n.get(h);c&&n.set(h,c-1),csArray.prototype.push.call(r,[i,s,o])}return r},lt([(i="serializeDocumentAsync",function(t,n,r){var s=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!Ki)return r.value=s,s.apply(this,t);Qi(i);var e=s.apply(this,t);return e.then((function(){tn(i)})),e}})],t.prototype,"serializeDocumentAsync",null),t}(),In=function(){function t(t,i,n,r){var s=this;this.Pr=t,this.pi=i,this.mi=n,this.$i=r,this.Ur()&&(this.jr=this.Pr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var i=t.context,n=t.args;return s.sendInsertion(i,n)}})),this.qr()&&(this.Fr=this.Pr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var i=t.context,n=t.args;return s.sendDeletion(i,n)}})),this.Hr()&&(this.Vr=this.Pr.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,i){return s.setStyleDeclarationCssText(t,i)})))}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){this.jr&&this.jr.activate(),this.Fr&&this.Fr.activate(),this.Vr&&this.Vr.activate()},t.prototype.stop=function(){this.jr&&this.jr.deactivate(),this.Fr&&this.Fr.deactivate(),this.Vr&&this.Vr.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,i){var n=this.zr(t);if((null==n?void 0:n.ownerNode)&&(!K(n.ownerNode)||!this.mi.isSensitiveChild(n.ownerNode))){var r=this.pi.getId(n.ownerNode);if(r){var s=this.Jr(n.cssRules,t.parentRule),e={date:Lt(),type:Pi.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,i]};this.cn(e),this.$i.scanCssString(i)}}},t.prototype.zr=function(t){var i=t.parentRule;return i&&i.parentStyleSheet},t.prototype.Jr=function(t,i){return csArray.prototype.indexOf.call(csArray.from(t),i)},t.prototype.Ur=function(){var t,i;return"function"==typeof(null===(i=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===i?void 0:i.insertRule)},t.prototype.qr=function(){var t,i;return"function"==typeof(null===(i=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===i?void 0:i.deleteRule)},t.prototype.Hr=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,i){var n=i[0],r=i[1];if(t.ownerNode&&(!K(t.ownerNode)||!this.mi.isSensitiveChild(t.ownerNode))){var s=this.pi.getId(t.ownerNode);if(s){var e={date:Lt(),type:Pi.STYLESHEET_RULE_INSERT,args:G(r)?[s,n,r]:[s,n]};this.cn(e),this.$i.scanCssString(n)}}},t.prototype.sendDeletion=function(t,i){var n=i[0];if(t.ownerNode&&(!K(t.ownerNode)||!this.mi.isSensitiveChild(t.ownerNode))){var r=this.pi.getId(t.ownerNode);if(r){var s={date:Lt(),type:Pi.STYLESHEET_RULE_DELETE,args:[r,n]};this.cn(s)}}},lt([X("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),lt([X("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),lt([X("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),xn=function(){function t(){this.Gr=[],this.Wr=1}return t.prototype.identifyNodes=function(t,i){for(var n=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;n.length>0;)for(var s=csArray.prototype.pop.call(n),e=s.root;null!==e;)if(r&&i&&i.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.Wr,this.Wr+=1,y(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(n,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):T(e)&&this.Br(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var i,n=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);i=r.nextNode();){var s=i.__contentsquare_identifier;if(s&&n.add(s),y(i)&&csElementshadowRoot.apply(i)){var e=csElementshadowRoot.apply(i);this.getIds(e).forEach((function(t){return n.add(t)}))}}return n},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Gr,t)},t.prototype.Br=function(t){for(var i=0,n=this.Gr;i<n.length;i++){(0,n[i])(t)}},t}(),Ln="data-cs-mask",Cn=function(){function t(t){this.mi=t}return t.prototype.beforeSerializeChildren=function(t,i){return this.Kr(t)||this.Yr(t)?[]:i},t.prototype.beforeSerializeAttributes=function(t,i){var n=this;return this.Kr(t)&&!N(t)&&(csArray.prototype.push.call(i,this.Xr(t)),t.hasAttribute(Ln)||csArray.prototype.push.call(i,document.createAttribute(Ln))),csArray.prototype.filter.call(i,(function(i){return!n.mi.isSensitiveAttribute(t,i.name)}))},t.prototype.Kr=function(t){return y(t)&&this.mi.isSensitive(t)},t.prototype.Yr=function(t){return O(t)&&this.mi.isSensitive(t.host)},t.prototype.Xr=function(t){var i=t.getBoundingClientRect(),n=document.createAttribute("style");return n.value="width: ".concat(i.width,"px !important; height: ").concat(i.height,"px !important;"),n},t}(),_n=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Mn=null!==(Tn=_n(Element))&&void 0!==Tn?Tn:_n(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(Rn||(Rn={}));var Dn=function(t){this.csId=t.__contentsquare_identifier,this.nodeType=t.nodeType,this.format=Rn.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Pn,Un=function(t){function i(i){var n,r=t.call(this,i)||this;return r.attributes=[],r.localName=(n=i,Mn.get.call(n)),r.namespaceURI=i.namespaceURI,r.children=[],r}return at(i,t),i}(Dn),jn=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",it],qn=function(){function t(t,i){this.U=t,this.P=i,this.$r=[],this.Zr=""}return t.prototype.init=function(){this.$r=yt(yt([],jn,!0),this.P.whitelistedAttributes,!0)},t.prototype.beforeSerializeChildren=function(t,i,n){return(E(t)||this.Qr(t))&&(n.withAnonymization=!1),i},t.prototype.serializeAttribute=function(t,i,n,r){n.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,n.name,n.value);n.value=s},t.prototype.serializeTextNode=function(t,i,n){i.data=this.getAnonymizedText(n.withAnonymization,t,i.data)},t.prototype.serializeCDATASectionNode=function(t,i,n){var r=t.data;return i.data=n.withAnonymization?Nn(r):this.U.anonymizeEmail(r),i},t.prototype.getAnonymizedText=function(t,i,n){if(csNodeparentNode.apply(i)){if(E(csNodeparentNode.apply(i)))return n;if(this.Qr(csNodeparentNode.apply(i)))return this.U.anonymizeEmail(n)}return t?Nn(n):this.U.anonymizeEmail(n)},t.prototype.getAnonymizedAttributeValue=function(t,i,n,r){return this.ns(n)||y(s=t)&&"ownerSVGElement"in s?r:i?"":this.U.anonymizeEmail(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this.Zr=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Zr},t.prototype.afterSerialize=function(t,i,n){null==i.anonymized&&(i.anonymized=n.withAnonymization),i instanceof Un&&i.shadowRoot&&null==i.shadowRoot.anonymized&&(i.shadowRoot.anonymized=n.withAnonymization)},t.prototype.ns=function(t){return-1!==csArray.prototype.indexOf.call(this.$r,t)},t.prototype.Qr=function(t){return y(t)&&(t.hasAttribute("data-cs-capture")||this.rs(t))},t.prototype.rs=function(t){return!!this.Zr&&$.call(t,this.Zr)},t}(),Fn=function(){function t(t){this.ss={},this.es=new yn(t)}return t.prototype.save=function(t){var i=t.key,n=t.metadata,r=t.events;this.es.isThresholdReached()||(this.es.addString(i),"string"==typeof r?this.es.addString(r):this.es.addArrayBuffer(r),this.es.isThresholdReached()||(this.ss[i]={metadata:n,events:r}))},t.prototype.recover=function(t){var i=this,n=[];csArray.prototype.forEach.call(this.us(),(function(t){var r=i.ss[t];void 0!==r&&(csArray.prototype.push.call(n,r),i.hs(t))})),0!==n.length&&(t(n),this.es.reset())},t.prototype.us=function(){return Object.keys(this.ss)},t.prototype.hs=function(t){delete this.ss[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(Pn||(Pn={}));var Hn=function(){function t(t,i,n){this.cs=t,this.fs=n,this.vs=Pn.NOT_STARTED,this.ls=[],this.ds=0,this.es=new yn(i),this.ws()}return t.prototype.ws=function(){return dt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:return[4,this.ys()];case 1:return t.sent(),this.vs===Pn.READY?this.ps():this.fs(this.ls),[2]}}))}))},t.prototype.ps=function(){var t=this;csArray.prototype.forEach.call(this.ls,(function(i){t.save(i)})),this.ls=[]},t.prototype.save=function(t){return dt(this,void 0,void 0,(function(){var i,n,r;return wt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.vs===Pn.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.ls,t),[2]):this.vs!==Pn.READY||this.es.isThresholdReached()?[2]:(i=t.key,n=t.metadata,r=t.events,this.es.addString(i),"string"==typeof r?this.es.addString(r):this.es.addArrayBuffer(r),this.es.isThresholdReached()?[2]:[4,this.kt.put(i,new Response(r,{headers:n}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return dt(this,void 0,void 0,(function(){return wt(this,(function(i){switch(i.label){case 0:return this.kt?[3,2]:[4,this.ys()];case 1:if(i.sent(),this.vs!==Pn.READY)return[2];i.label=2;case 2:return this.gs(t),[2]}}))}))},t.prototype.ys=function(){return dt(this,void 0,void 0,(function(){var t;return wt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.vs=Pn.OPEN_IN_PROGRESS,t=this,[4,window.caches.open(this.cs)];case 1:return t.kt=i.sent(),this.vs=Pn.READY,[3,3];case 2:return i.sent(),this.vs=Pn.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.gs=function(t){return dt(this,void 0,void 0,(function(){var i,n,r,s,e=this;return wt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,,5,6]),this.ds++,this.ds>1?[2]:[4,this.kt.keys()];case 1:return 0===(i=u.sent()).length?[2]:[4,this.kt.matchAll()];case 2:return n=u.sent(),r=csArray.prototype.map.call(n,(function(t){var i={};t.headers.forEach((function(t,n){i[n]=t})),delete i["content-type"];var n=i.datatype;return"json"===n||"base64"===n?t.text().then((function(t){return{metadata:i,events:t}})):t.arrayBuffer().then((function(t){return{metadata:i,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return e.kt.delete(t)})))];case 4:return u.sent(),t(s),this.es.reset(),[3,6];case 5:return this.ds--,[7];case 6:return[2]}}))}))},t}(),Vn=function(){function t(t){"caches"in window?this.As(t):this.Es()}return t.prototype.save=function(t){this.Ss.save(t)},t.prototype.recover=function(t){this.Ss.recover(t)},t.prototype.As=function(i){var n=this;this.Ss=new Hn(i,t.bs,(function(t){n.Es(t)}))},t.prototype.Es=function(i){var n=this;this.Ss=new Fn(t.bs),i&&csArray.prototype.forEach.call(i,(function(t){n.Ss.save(t)}))},t.bs=16777216,t}(),zn=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.Ns=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ns,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ns,(function(t,i){return vt(vt({},i.getRequestParameters()),t)}),{})},t}(),Jn=function(){function t(t,i){this.Ts=t,this.P=i,this.Rs=!1,this.Os=null}return t.prototype.start=function(){this.Rs=!0,this.ks()},t.prototype.stop=function(){this.Rs=!1,this.Is()},t.prototype.trackActivity=function(){this.Rs||(this.Rs=!0,this.xs()),this.Is(),this.ks()},t.prototype.ks=function(){var t=this;this.Os=this.Ts.create("recorded user inactive",(function(){t.Rs=!1,t.Is(),t.Ls()}),this.P.pendingInactivityTimeout)},t.prototype.Is=function(){null!==this.Os&&(this.Os.cancel(),this.Os=null)},t.prototype.isUserActive=function(){return this.Rs},t.prototype.onActivityStopped=function(t){this.Ls=t},t.prototype.onActivityResumed=function(t){this.xs=t},t}(),Gn=function(){function t(t,i,n){var r=this;this.Cs=t,this._s=i,this.ui=n,this.$t=setTimeout((function(){r.execute()}),this.ui)}return t.prototype.execute=function(){var t=this;Y.tryToExecute(this.Cs,(function(){t._s()}))()},t.prototype.cancel=function(){clearTimeout(this.$t)},t}(),Wn=function(){function t(){}return t.prototype.create=function(t,i,n){return new Gn(t,i,n)},t}(),Bn=function(){function t(t,i){var n=this;this.qt=t,this.U=i,this.Ms=[{boundElement:window,type:"resize",listener:function(){return n.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return n.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return n.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){this.Mi(),this.triggerInitialEvents()},t.prototype.stop=function(){this.qi()},t.prototype.Mi=function(){csArray.prototype.forEach.call(this.Ms,(function(t){return Ji(t)}))},t.prototype.qi=function(){csArray.prototype.forEach.call(this.Ms,(function(t){return Gi(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t={type:Pi.RESIZE,args:[vn.windowWidth(),vn.windowHeight()],date:Lt()};this.cn(t)},t.prototype.hashChangeListener=function(){var t={type:Pi.HASH_CHANGE,args:[this.U.anonymizeEmail(this.qt.href)],date:Lt()};this.cn(t)},t.prototype.visibilityChangeListener=function(){var t={type:Pi.VISIBILITY_CHANGE,args:[document.visibilityState],date:Lt()};this.cn(t)},lt([X("resize")],t.prototype,"resizeListener",null),lt([X("hashChange")],t.prototype,"hashChangeListener",null),lt([X("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Kn=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.Tn=i,h.Nn=n,h.Ds=r,h.An=s,h.Yi=e,h.Zi=u,h.Ps=0,h}return at(i,t),i.prototype.init=function(){var t=this;this.Tn.onEvent((function(){t.Us()})),this.An.after((function(){t.Ps+=1,t.js()})),this.Ds.onActivityStopped((function(){t.js()})),this.Ds.onActivityResumed((function(){t.Nn.isStarted()||t.qs()}))},i.prototype.onIframeRecordingUserEvent=function(t){this.Us()},i.prototype.onStart=function(){this.Ds.start()},i.prototype.onStop=function(){this.Ds.stop()},i.prototype.js=function(){this.Nn.isStarted()&&!this.Yi.isDOMSerializationInProgress()&&!this.Ds.isUserActive()&&this.Ps>=2&&this.Fs()},i.prototype.Us=function(){this.Ds.trackActivity(),this.Ps=0},i.prototype.Fs=function(){this.Nn.stop(),this.Zi.emitRecordingStatusChange()},i.prototype.qs=function(){this.Nn.start(),this.Zi.emitRecordingStatusChange()},i}(An);function Yn(t){return t.replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,i,n,r){if("\\"===i)return t.slice(1);if(r)return r;var s=parseInt(n,16);return 55296<=s&&s<=57343||0===s||s>1114111?"":String.fromCodePoint(s)}))}var Xn=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function $n(t){return-1===t.indexOf('"')?'"'+t+'"':-1===t.indexOf("'")?"'"+t+"'":t}function Zn(t){var i=[];return function(t,i){var n=t.replace(Xn,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=Yn((r||s).trim());return(r?"@import ":"")+"url("+$n(i(e)||e)+")"}))}(t,(function(t){return i.push(t),t})),i}function Qn(t){var i=csString.prototype.trim.call(t);if(""===t)return[];var n,r=(n=i,csString.prototype.split.call(n,/\s(.+)/)),s=r[0],e=r[1];return e?(D(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),yt([tr(s)],Qn(e),!0)):[tr(s)]}function tr(t){return csString.prototype.split.call(t,/,$/)[0]}var ir,nr=function(){function t(){}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.serializeElementNode=function(t){this.scanElement(t)},t.prototype.beforeSerializeChildren=function(t,i,n){return this.Hs(t,i),i},t.prototype.scanElement=function(t){this.Vs(t)},t.prototype.scanAttribute=function(t,i){this.Vs(t,i)},t.prototype.scanText=function(t){p(t)&&csNodeparentNode.apply(t)&&E(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.Hs=function(t,i){var n=this;E(t)&&cn(i,(function(t){p(t)&&n.scanCssString(t.data)}))},t.prototype.Vs=function(t,i){this.zs(t,i),this.Js(t,i),this.Gs(t,i)},t.prototype.zs=function(t,i){!g(t)||i&&"href"!==i||!t.href||this.Ws(t.href)},t.prototype.Js=function(t,i){A(t)&&(i&&"src"!==i||!t.src||this.Bs(t.src)||null===t.getAttribute("src")||this.Ks(t.getAttribute("src"))||this.Ws(t.src),i&&"srcset"!==i||!t.srcset||this.Ys(t.srcset))},t.prototype.Gs=function(t,i){if((!i||"style"===i)&&t.hasAttribute("style")){var n=t.getAttribute("style");if("string"!=typeof n)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(n)}},t.prototype.Ks=function(t){return M(t,"#")},t.prototype.Bs=function(t){return M(t,"data:")},t.prototype.scanCssString=function(t){this.Xs(Zn(t))},t.prototype.Ys=function(t){this.Xs(Qn(t))},t.prototype.Xs=function(t){var i=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!i.Bs(t)})),(function(t){return!i.Ks(t)})),(function(t){return Ft(t)})),(function(t){return i.Ws(t)}))},t.prototype.Ws=function(t){var i={date:Lt(),type:Pi.STATIC_RESOURCE_URL,args:[t]};this.cn(i)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(ir||(ir={}));var rr=function(){function t(t){this.$s=t.performance}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){this.Zs()&&this.Qs()},t.prototype.Qs=function(){var t={args:this.te(),date:Lt(),type:Pi.PERFORMANCE_TIMINGS};this.cn(t)},t.prototype.Zs=function(){return!(!this.$s||!this.$s.timing)},t.prototype.te=function(){return[{performanceTiming:ir.REQUEST_START,timestamp:this.$s.timing.requestStart},{performanceTiming:ir.DOM_INTERACTIVE,timestamp:this.$s.timing.domInteractive}]},t}(),sr=function(){function t(t,i){void 0===t&&(t=40),void 0===i&&(i=0),this.ie=t,this.ne=i,this.se=[],this.i=!1,this.ee=0,this.$t=-1}return t.prototype.schedule=function(t){csArray.prototype.push.call(this.se,t),this.ue()},t.prototype.ue=function(){return dt(this,void 0,void 0,(function(){var t,i,n,r=this;return wt(this,(function(s){switch(s.label){case 0:if(this.i)return[2];this.i=!0,window.clearTimeout(this.$t),s.label=1;case 1:return this.se.length?this.ee>=this.ie?[4,this.he()]:[3,3]:[3,4];case 2:s.sent(),this.ee=0,s.label=3;case 3:return t=window.performance.now(),(i=csArray.prototype.shift.call(this.se))?(this.runTask(i),n=window.performance.now()-t,this.ee+=n,[3,1]):[3,4];case 4:return this.i=!1,this.$t=window.setTimeout((function(){r.ee=0})),[2]}}))}))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.se,(function(i){t.runTask(i)})),this.se=[]},t.prototype.clearQueue=function(){this.se=[]},t.prototype.he=function(){var t=this;return new Promise((function(i){return setTimeout((function(){i()}),t.ne)}))},t.prototype.isEmpty=function(){return 0===this.se.length},t.isSupported=function(){return"function"==typeof window.Promise},lt([X("TaskScheduler"),nn("runTask")],t.prototype,"runTask",null),lt([nn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),er=function(t){function i(i,n){var r=t.call(this)||this;return r.Pr=i,r.oe=r.handleMutationsSync,r.ce=new Map,n&&n.experimentalMutationObserver&&sr.isSupported()&&(r.fe=new sr(n.experimentalMutationObserver.maxProcessingTime,n.experimentalMutationObserver.waitDuration),r.oe=r.handleMutationsAsync),r}return at(i,t),i.prototype.init=function(){this.ae(),this.ve()},i.prototype.ve=function(){var t=this;this.le=new csMutationObserver((function(i){t.oe(i)}))},i.prototype.ae=function(){var t=this;this.de()&&(this.we=this.Pr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"attachShadow",hook:function(i){var n=i.context,r=i.result;return t.handleAttachShadow(n,r)}})),this.ye()&&(this.pe=this.Pr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"createShadowRoot",hook:function(i){var n=i.context,r=i.result;return t.handleAttachShadow(n,r)}}))},i.prototype.onChildListMutation=function(t){this.ge=t},i.prototype.onCharacterDataMutation=function(t){this.Ae=t},i.prototype.onAttributesMutation=function(t){this.Ee=t},i.prototype.onAttachShadowMutation=function(t){this.Se=t},i.prototype.observe=function(t,i){this.isStarted&&this.le.observe(t,i)},i.prototype.onStart=function(){this.we&&this.we.activate(),this.pe&&this.pe.activate()},i.prototype.onStop=function(){this.we&&this.we.deactivate(),this.pe&&this.pe.deactivate(),this.fe&&this.fe.clearQueue(),this.le.disconnect()},i.prototype.flushPendingMutations=function(){if(this.isStarted){this.fe&&this.fe.runPendingTasks();var t=this.le.takeRecords();this.handleMutationsSync(t)}},i.prototype.de=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},i.prototype.ye=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},i.prototype.handleMutationsSync=function(t){var i=Lt(),n=t.length>1?this.be(t):t;this.ce.clear(),this.Ne(n);for(var r=0;r<n.length;r+=1){var s=n[r];s.date=i,this.processMutation(s,this.ce)}},i.prototype.handleMutationsAsync=function(t){var i=Lt(),n=t.length>1?this.be(t):t;this.fe.isEmpty()&&this.ce.clear(),this.Ne(n);for(var r=0;r<n.length;r+=1){var s=n[r];s.date=i,this.Te(s,this.ce)}},i.prototype.be=function(t){for(var i=new Map,n=0;n<t.length;n+=1){if("attributes"===(a=t[n]).type){var r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e),h=i.get(r),o=dn.getAttributeNS(r,s,e)===a.oldValue?"none":"last";if(h)h.has(u)||h.set(u,o);else{var c=new Map;c.set(u,o),i.set(r,c)}}}var f=[];for(n=t.length-1;n>=0;n-=1){var a;if("attributes"===(a=t[n]).type){r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e);"last"===(h=i.get(r)).get(u)&&(csArray.prototype.push.call(f,a),h.set(u,"none"))}else csArray.prototype.push.call(f,a)}return csArray.prototype.reverse.call(f)},i.prototype.handleAttachShadow=function(t,i){this.Se({shadowRoot:i,date:Lt(),target:t})},i.prototype.processMutation=function(t,i){switch(t.type){case"attributes":this.Ee(t);break;case"characterData":this.Ae(t);break;case"childList":this.ge(t,i);break;default:throw new Error("mutation type is not supported")}},i.prototype.Te=function(t,i){var n=this;this.fe.schedule((function(){n.processMutation(t,i)}))},i.prototype.Ne=function(t){var i=this;csArray.prototype.forEach.call(t,(function(t){cn(t.addedNodes,(function(t){var n=i.ce.get(t);n?i.ce.set(t,n+1):i.ce.set(t,1)}))}))},lt([nn("handleMutationsSync"),X("handleMutationsSync")],i.prototype,"handleMutationsSync",null),lt([X("handleMutationsAsync")],i.prototype,"handleMutationsAsync",null),lt([nn("handleAttachShadow")],i.prototype,"handleAttachShadow",null),lt([nn("processMutation")],i.prototype,"processMutation",null),i}(An),ur=function(t){function i(i,n,r){var s=t.call(this,i,null==r?void 0:r.experimental)||this;return s.pi=n,s.Re={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},s}return at(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.Ci()},i.prototype.Ci=function(){var t=this;this.pi.onDocumentIdentified((function(i){t.observe(i,t.Re)}))},i}(er);function hr(){var t,i=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===i.length)return"";var n=function(t){return t.length>0?or(t[0]):""}(i);return""===n?"":(i=function(t,i){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,i)}))}(i,n),0===i.length?"":or(i[0]))}function or(t){var i,n="";i=t;var r=(-1!==csString.prototype.indexOf.call(i,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(n=r[1]),n}var cr,fr=function(){function t(){this.Oe=function(t,i){return{context:t,args:i}}}return t.prototype.ke=function(t,i){t.prototype=i.prototype,Object.defineProperty(t,"toString",{value:function(){return i.toString()}})},t.prototype.createSyncFunctionInterceptor=function(t){var i,n=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(i=Object.getOwnPropertyDescriptor(n,r))||void 0===i?void 0:i.writable))return Y.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(n,"'")),null;var o=!1,c=n[r];if("function"==typeof c){var f=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n,r=u(this,t),e=c.apply(this,t);o&&(h&&h.withCallerName&&(n=hr()),Y.tryToExecute("SyncFunctionInterceptor",(function(){s(vt(vt({result:e},r),{callerName:n}))}))());return e};this.ke(f,c),n[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createAsyncFunctionInterceptor=function(t){var i,n=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(i=Object.getOwnPropertyDescriptor(n,r))||void 0===i?void 0:i.writable))return Y.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(n,"'")),null;var o=!1,c=n[r];if("function"==typeof c){var f=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return dt(this,void 0,void 0,(function(){var i,n,r;return wt(this,(function(e){return i=u(this,t),n=c.apply(this,t),o&&(h&&h.withCallerName&&(r=hr()),Y.tryToExecute("AsyncFunctionInterceptor",(function(){s(vt(vt({result:n},i),{callerName:r}))}))()),[2,n]}))}))};this.ke(f,c),n[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createDescriptorInterceptor=function(t,i,n){var r=!1,s=Object.getOwnPropertyDescriptor(t,i);if(s){if(!s.configurable)return Y.warn("Cannot intercept read only property '".concat(csString(i),"' of object '").concat(t,"'")),null;Object.defineProperty(t,i,vt(vt({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=this,i=arguments,e=s.set.apply(this,i);return r&&Y.tryToExecute("DescriptorInterceptor",(function(){n(t,i[0])}))(),e}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t}();!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(cr||(cr={}));var ar=function(){function t(){}return t.init=function(t){var i;void 0===t&&(t=document.cookie);var n=null===(i=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===i?void 0:i[1];if(this.Ie=new Map,n)for(var r=csString.prototype.split.call(n,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],h=e[1];this.Ie.set(u,h||"true")}},t.getBoolean=function(t){var i=this.getString(t);return null!=i&&"false"!==i&&0!==parseInt(i)},t.getString=function(t){var i;return null===(i=this.Ie)||void 0===i?void 0:i.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(cr.COMPRESSION_DISABLED)},t.Log=function(i){return function(n,r,s){var e,u=r.toString(),h="".concat(null===(e=n.constructor)||void 0===e?void 0:e.name,".").concat(u),o=s.value;(function(t,i){var n;if(null==t)return!1;return t===i||!!(null===(n=csString.prototype.match.call(t,new RegExp("(^|,)("+i+")(,|$)")))||void 0===n?void 0:n.length)})(t.getString("debugLog"),i)&&(s.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return console.log.apply(console,yt([h],t,!1)),o.bind(this).apply(void 0,t)})}},t}();ar.init();var vr=function(){function t(){this.xe=[],this.Le=[]}return t.prototype.isFull=function(){return this.xe.length>=t.Ce||this.Le.length>=t.Ce},t.prototype.isEmpty=function(){return 0===this.xe.length&&0===this.Le.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.xe,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Le,t)},t.prototype.clear=function(){this.xe=[],this.Le=[]},t.prototype.flushIdsSeenGlobally=function(){var t=yt([],this.xe,!0);return this.xe=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=yt([],this.Le,!0);return this.Le=[],t},t.Ce=20,t}();function lr(t){return"$$"+t}lr.asyncIterator="$$asyncIterator";var dr=void 0!==window.Symbol?window.Symbol:lr,wr=!!window.IntersectionObserver&&!!window.IntersectionObserverEntry;function yr(t,i){if(!wr)throw new Error("IntersectionObserver is not supported");if((null==i?void 0:i.delay)<100)throw new Error("Visibility delay should be > 100ms");var n="isVisible"in IntersectionObserverEntry.prototype;return(null==i?void 0:i.trackVisibility)&&(t=n?function(t){return function(i,n){i=csArray.prototype.map.call(i,(function(t){return{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,isVisible:t.isVisible||dn.isInViewPort(t.target),rootBounds:t.rootBounds,target:t.target,time:t.time}})),t(i,n)}}(t):function(t){return function(i,n){csArray.prototype.forEach.call(i,(function(t){return t.isVisible=dn.isInViewPort(t.target)})),t(i,n)}}(t)),new IntersectionObserver(t,i)}var pr,mr=function(){function t(t,i){var n=this;this._e=t,this.Me=dr("isVisible"),this.De=dr("knownElement"),this.Pe=dr("Tracked"),this.Ue=[],this.je=!0,this.qe=function(t){for(var i=0,r=t;i<r.length;i++){var s=r[i];if(s.isVisible){var e=null===s.target[n.Me];s.target[n.Me]=!0,e&&!n.Fe.delay&&n.He(s.target,pr.VisibleInViewPort)}else{switch(dn.isVisibleInDocument(s.target)?pr.VisibleOutsideViewPort:s.isIntersecting?pr.HiddenByAnother:pr.Hidden){case pr.Hidden:case pr.HiddenByAnother:n.Ve(s.target);break;case pr.VisibleOutsideViewPort:n.He(s.target,pr.VisibleOutsideViewPort)}}}n.Fe.delay&&setTimeout((function(){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.isIntersecting&&s.isVisible;s.target[n.Me]&&e&&n.He(s.target,pr.VisibleInViewPort)}}),n.Fe.delay)},this.Fe=vt(vt({},gr),i),this.ze()}return t.prototype.onVisibilityChange=function(t){csArray.prototype.push.call(this.Ue,t)},t.prototype.stop=function(){this.je=!0},t.prototype.ze=function(){return dt(this,void 0,void 0,(function(){var t,i=this;return wt(this,(function(n){return this.je=!1,t={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300},this.Je=yr(this.qe,t),this.Xi=new csMutationObserver((function(t){return csArray.prototype.forEach.call(t,(function(t){i.Ge(t.target)}))})),this._e.onElementAvailable((function(t){i.je||i.We(t)})),[2]}))}))},t.prototype.Ge=function(t){if(t.isConnected&&!dn.areAncestorsHiddenByCSS(t))for(var i,n=this._e.getElements(t);i=n.next().value;)this.We(i)},t.prototype.We=function(t){if(!t[this.De]){this.Je.unobserve(t);var i=dn.getTopAncestorHiddenByCSS(t);i?this.Ve(i):(t[this.De]=!0,this.Je.observe(t))}},t.prototype.Ve=function(i){delete i[this.Me],delete i[this.De],this.Je.unobserve(i),this.Xi.observe(i,{attributeFilter:t.Be,subtree:!0})},t.prototype.He=function(t,i){if(i===pr.VisibleInViewPort&&this.Fe.trackOnce){if(t[this.Pe])return;t[this.Pe]=!0,this.Je.unobserve(t)}csArray.prototype.forEach.call(this.Ue,(function(n){return n(t,i)}))},t.Be=["style","class","hidden"],t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(pr||(pr={}));var gr={delay:1e3,trackOnce:!0};function Ar(t,i){var n,r,s,e,u=function(){r=null;var i=Lt()-s;e=t.apply(void 0,yt([i],n,!1)),s=null},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return s||(s=Lt()),r&&window.clearTimeout(r),n=yt([],t,!0),r=window.setTimeout(u,i),e};return h.flushPending=function(){r&&(window.clearTimeout(r),u())},h}function Er(t){return void 0===t&&(t=0),function(i,n,r){var s=r.value,e=!1;r.value=function(){for(var i=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(i,n)}),t))}}}var Sr,br,Nr=function(){function t(t){this.Ft=t}return t.prototype.push=function(t){this.Ke||(this.Ke=[],this.flush()),csArray.prototype.push.call(this.Ke,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.Ke,this.Ft),this.Ke=void 0},lt([Er(),X("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),Tr=function(){function t(t){var i=this;this.mi=t,this.Ye=!1,this.Ke=new Nr((function(t){return t.isConnected&&i.Xe(t)}))}return t.prototype.onElementAvailable=function(t){this.Xe=t},t.prototype.serializeTextNode=function(t,i,n){if(n.withAnonymization||!this.Ye)return i;var r=this.$e(t);return r&&this.Ke.push(r),i},t.prototype.getElements=function(t){var i,n,r;return wt(this,(function(s){switch(s.label){case 0:i=dn.createDeepTreeWalker(t,NodeFilter.SHOW_TEXT),s.label=1;case 1:return(n=i.nextNode())?(r=this.$e(n))?[4,r]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.start=function(){this.Ye=!0},t.prototype.stop=function(){this.Ye=!1},t.prototype.$e=function(t){var i=dn.getParentElement(t);return!i||!i.isConnected||this.mi.isSensitive(i)||this.mi.isSensitiveChild(i)||E(i)||N(i)||dn.isEmpty(t.data)?null:i},t}(),Rr=function(){function t(t,i){var n=this;this.mi=t,this.Ze=i,this.Ye=!1,this.Qe=new Set,this.tu=new Set,this.iu=new vr,this.He=function(t,i){switch(i){case pr.VisibleInViewPort:n.onVisibleInViewPort(t);break;case pr.VisibleOutsideViewPort:n.onVisibleOutsideViewPort(t)}n.iu.isFull()&&n.nu()}}return t.isSupported=function(){return!!window.IntersectionObserver},t.prototype.serializeTextNode=function(i,n,r){return this._e||(Y.warn("TextVisibility: Source was not initialized. (".concat(t.isSupported(),")")),this.start()),this._e.serializeTextNode(i,n,r)},t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){this.Ye||(this._e=new Tr(this.mi),this._e.start(),this.ru=new mr(this._e,{delay:this.Ze}),this.ru.onVisibilityChange(this.He),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(this._e.stop(),this.ru&&this.ru.stop(),this.iu.clear(),this.Qe.clear(),this.tu.clear(),this.Ye=!1)},t.prototype.flushEvents=function(){this.Ye&&this.nu()},t.prototype.onVisibleInViewPort=function(t){var i=xn.getId(t);this.onVisibleOutsideViewPort(t),this.Qe.has(i)||(this.Qe.add(i),this.iu.addIdInViewPort(i))},t.prototype.onVisibleOutsideViewPort=function(t){var i=xn.getId(t);this.tu.has(i)||(this.tu.add(i),this.iu.addIdInGlobally(i))},t.prototype.nu=function(){if(!this.iu.isEmpty()){var t={visibleGlobally:this.iu.flushIdsSeenGlobally(),visibleInViewPort:this.iu.flushIdsSeenInViewport()},i={type:Pi.TEXT_VISIBILITY,date:Lt(),args:[t]};this.cn(i)}},lt([ar.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),lt([ar.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),Or=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.su=[],r.eu=[],r}return at(i,t),i.prototype.setRequestPayloadProvider=function(t){this.fi=t},i.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.su,t)},i.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.eu,t)},i.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters(),i=pt.toQuery(t),n=this.li();this.hu(i,n)?csArray.prototype.forEach.call(this.su,(function(t){return t()})):csArray.prototype.forEach.call(this.eu,(function(t){return t()})),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},i.prototype.li=function(){return this.fi?this.fi.getRequestPayload():""},i.prototype.hu=function(t,i){return void 0!==navigator.sendBeacon&&navigator.sendBeacon("".concat(this.domainUri,"/").concat(this.path,"?").concat(t),i)},i}(At),kr=function(){function t(t,i,n,r,s,e,u,h,o,c){this.pi=t,this.C=i,this.ou=n,this.fu=r,this.au=s,this.vu=e,this.lu=u,this.du=h,this.wu=o,this.oi=c,this.yu=8e3,this.pu=64e3,this.mu=2e3,this.gu=2e3,this.Au="",this.Eu=document.createElement("div"),this.Su=null,this.bu=!1,this.Nu="[data-cs-encrypt]"}return t.prototype.setEncryptionSelectors=function(t){Z(t,this.Eu)&&(this.Nu+=",".concat(t))},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return!(!S(t)&&!b(t)||!$.call(t,this.Nu)||"password"===t.type);case Node.COMMENT_NODE:case Node.TEXT_NODE:var i=t.parentElement;return!!(i&&p(t)&&$.call(i,this.Nu));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.Tu=t},t.prototype.onInputNodeToEncrypt=function(t){this.Ru=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.Ou=t},t.prototype.onApiErrorToEncrypt=function(t){this.ku=t},t.prototype.init=function(){var t=this;this.Iu()&&(this.xu=new TextEncoder,this.au.onSerializeData((function(i){return t.Lu(i)})),this.vu.onSerializeData((function(i){return t.Cu(i)})),this.lu.onSerializeData((function(i){return t._u(i)})),this.du.onSerializeData((function(i){return t.Mu(i)})),this.wu.onSerializeData((function(i){return t.Du(i)})),this.Pu(this.C.encryptionPublicKey))},t.prototype.Pu=function(t){return dt(this,void 0,void 0,(function(){var i;return wt(this,(function(n){switch(n.label){case 0:return[4,this.ou.importKey(t)];case 1:return i=n.sent(),this.bu=!0,i?(this.Su=i,this.au.serializeDataFromBuffer(),this.du.serializeDataFromBuffer()):(this.au.clear(),this.du.clear(),Y.warn("Fail to import public key '".concat(t,"'"))),this.vu.serializeDataFromBuffer(),this.lu.serializeDataFromBuffer(),this.wu.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Iu()&&(this.bu?this.Lu(t):this.au.addData(t))},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Iu()&&(this.bu?this.Cu(t):this.vu.addData(t))},t.prototype.registerInputNodeToEncrypt=function(t){this.Iu()&&(this.bu?this._u(t):this.lu.addData(t))},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Iu()&&(this.bu?this.Mu(t):this.du.addData(t))},t.prototype.registerApiErrorToEncrypt=function(t){this.Iu()?this.bu?this.Du(t):this.wu.addData(t):this.Uu(t)},t.prototype.Iu=function(){return this.C.encryptionEnabled&&!!this.C.encryptionPublicKey&&this.C.encryptionPublicKeyId>0&&this.ou.isSupported()&&this.fu.isSupported()},t.prototype.Lu=function(t){var i=this,n=t.textNode,r=this.pi.getId(n);if(r){if(this.Su){var s=vt(vt({},t),{targetId:r,date:Lt()});this.ju(s,(function(t){return t.textNode.data}),(function(){return Y.warn("Fail to encrypt text node data")}),(function(t,n){return i.qu(t,n)}))}}else Y.warn("serializeTextNodeToEncrypt: node without identifier")},t.prototype.Cu=function(t){var i=this;if(!this.Su)return this.Fu(t);this.ju(t,(function(t){return t.textNode.data}),(function(){Y.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),i.Fu(t)}),(function(t,n){return i.qu(t,n)}))},t.prototype._u=function(t){var i=this;if(!this.Su)return this.Hu(t);this.ju(t,(function(t){return t.targetValue}),(function(){Y.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),i.Hu(t)}),(function(t,n){return i.Vu(t,n)}))},t.prototype.Mu=function(t){var i=this;this.Su&&this.ju(t,(function(t){return t.userIdentifier}),(function(){Y.warn("Fail to encrypt userIdentifier")}),(function(t,n){return i.zu(t,n)}))},t.prototype.ju=function(t,i,n,r){return dt(this,void 0,void 0,(function(){var s,e;return wt(this,(function(u){switch(u.label){case 0:return s=i(t),[4,this.ou.encrypt({publicKey:this.Su},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(n(t),[2])}}))}))},t.prototype.Fu=function(t){var i=t.targetId,n=t.serializedTextData,r={date:t.date,args:[i,n],type:Pi.MUTATION_CHARACTER_DATA};this.Tu(r)},t.prototype.Hu=function(t){var i=t.targetId,n=t.targetValue,r={date:t.date,args:[i,csString.prototype.replace.call(n,/\S/g,"")],type:Pi.INPUT_TEXT};this.Ru(r)},t.prototype.qu=function(t,i){var n=t.targetId,r=t.serializedTextData,s={date:t.date,args:[n,r,i,this.C.encryptionPublicKeyId],type:Pi.MUTATION_ENCRYPTED_CHARACTER_DATA};this.Tu(s)},t.prototype.Vu=function(t,i){var n=t.targetId,r=t.targetValue,s={date:t.date,args:[n,csString.prototype.replace.call(r,/\S/g,""),i,this.C.encryptionPublicKeyId],type:Pi.INPUT_ENCRYPTED_TEXT};this.Ru(s)},t.prototype.zu=function(t,i){var n={type:Pi.USER_IDENTIFIER,args:[i,t.keyId],date:t.date};this.Ou(n)},t.prototype.Du=function(t){return dt(this,void 0,void 0,(function(){var i,n,r,s,e,u,h,o,c,f,a;return wt(this,(function(v){switch(v.label){case 0:return this.Su?[4,this.fu.generateEncryptionKey()]:(this.Uu(t),[2]);case 1:if(i=v.sent(),n=this.fu.generateInitializationVector(),null===i||null===n)return this.Uu(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Ju(t.customRequestHeaders,this.yu)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.Gu(i,n,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Ju(t.customResponseHeaders,this.yu)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.Gu(i,n,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Ju(t.queryParameters,this.gu)?[3,9]:(t.queryParameters=this.Au,[3,11]):[3,11];case 9:return e=this.oi.compressSync(t.queryParameters),u=t,[4,this.Gu(i,n,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Ju(t.requestBody,this.pu)?[3,12]:(t.requestBody=this.Au,[3,14]):[3,14];case 12:return h=this.oi.compressSync(t.requestBody),o=t,[4,this.Gu(i,n,h)];case 13:o.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Ju(t.responseBody,this.mu)?[3,15]:(t.responseBody=this.Au,[3,17]):[3,17];case 15:return c=this.oi.compressSync(t.responseBody),f=t,[4,this.Gu(i,n,c)];case 16:f.responseBody=v.sent(),v.label=17;case 17:return a=t,[4,this.Wu(i,this.Su)];case 18:return a.secret=v.sent(),[3,20];case 19:return v.sent(),this.Uu(t),[2];case 20:return t.initializationVector=this.fu.exportInitializationVector(n),t.encryptionKeyId=this.C.encryptionPublicKeyId,this.ku(t),[2]}}))}))},t.prototype.Ju=function(t,i){return this.xu.encode(t).byteLength<=i},t.prototype.Uu=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.ku(t)},t.prototype.Gu=function(t,i,n){return dt(this,void 0,void 0,(function(){var r;return wt(this,(function(s){switch(s.label){case 0:return[4,this.fu.encrypt({encryptionKey:t,initializationVector:i},n)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.Wu=function(t,i){return dt(this,void 0,void 0,(function(){var n,r;return wt(this,(function(s){switch(s.label){case 0:return[4,this.fu.exportSecret(t)];case 1:if(!(n=s.sent()))throw new Error("Export secret failed");return[4,this.ou.encrypt({publicKey:i},n)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),Ir=function(){function t(t){this.gi=t}return t.prototype.serializeTextNode=function(t,i){this.gi.shouldEncrypt(t)&&(i.data=Nn(t.data),this.gi.registerTextNodeToEncrypt({textNode:t,serializedTextData:i.data}))},t}(),xr=function(){function t(){this.Bu=[]}return t.prototype.onSerializeData=function(t){this.Ku=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.Bu,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.Bu.length>0;){var t=csArray.prototype.shift.call(this.Bu);this.Ku(t)}},t.prototype.clear=function(){this.Bu=[]},t}(),Lr=function(){function t(t){this.crypto=t,this.Yu=!1}return t.prototype.init=function(){this.Yu=this.canSupportEncryption(),this.Yu&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.Yu},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),Cr="AES-CTR",_r=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.exportInitializationVector=function(t){return Mi(t)},i.prototype.exportSecret=function(t){var i;return dt(this,void 0,void 0,(function(){var n;return wt(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return n=r.sent(),[2,null!==(i=n.k)&&void 0!==i?i:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.generateEncryptionKey=function(){return dt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:Cr,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},i.prototype.encrypt=function(t,i){return dt(this,void 0,void 0,(function(){var n,r;return wt(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];n={counter:t.initializationVector,name:Cr,length:64},r=this.textEncoder.encode(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(n,t.encryptionKey,r)];case 2:return[2,Mi(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},i}(Lr),Mr="RSA-OAEP",Dr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.importKey=function(t){return dt(this,void 0,void 0,(function(){return wt(this,(function(i){switch(i.label){case 0:if(!this.isSupported())return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",Di(t),{name:Mr,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,i.sent()];case 3:return i.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.encrypt=function(t,i){return dt(this,void 0,void 0,(function(){var n;return wt(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(n=this.Xu(i,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:Mr},t.publicKey,n)];case 2:return[2,Mi(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},i.prototype.Xu=function(t,i){for(var n=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.$u(e);if(u+n>i)break;r++,n+=u}var h=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(h)},i.prototype.$u=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},i.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},i}(Lr);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(Sr||(Sr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(br||(br={}));var Pr=function(){function t(t,i,n){this.Zu=t,this.pi=i,this.mi=n}return t.prototype.start=function(){var i=this;this.Zu.subscribe(t.Qu,(function(t){return i.th(t)}))},t.prototype.stop=function(){this.Zu.unsubscribe(t.Qu)},t.prototype.onEvent=function(t){this.cn=t},t.prototype.th=function(t){if(t.target&&(!y(t.target)||!this.mi.isSensitiveChild(t.target))){var i=this.pi.getId(t.target);if(i)switch(t.type){case Sr.DRAG:case Sr.FLICK:this.ih(ji.SWIPE,t,i);break;case Sr.LONG_PRESS:this.ih(ji.LONG_PRESS,t,i);break;case Sr.TAP:this.ih(ji.TAP,t,i);break;case Sr.PINCH_IN:this.ih(ji.PINCH_IN,t,i);break;case Sr.PINCH_OUT:this.ih(ji.PINCH_OUT,t,i)}else Y.warn("processGesture: node without identifier")}},t.prototype.ih=function(t,i,n){var r=this.nh(i,t),s={type:Pi.GESTURE_RECOGNITION,args:[n,r],date:Lt()};this.cn(s)},t.prototype.nh=function(t,i){var n={type:i};return t.direction&&(n.direction=t.direction),t.distance&&(n.distance=t.distance),t.velocity&&(n.velocity=t.velocity),n},t.Qu="RecordingGesturesTracker",t}(),Ur=function(t){function i(i){var n=t.call(this,i)||this;return n.name=i.name,n.publicId=i.publicId,n.systemId=i.systemId,n}return at(i,t),i}(Dn),jr=function(t){var i;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(i=t.namespaceURI)&&void 0!==i?i:""},qr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return at(i,t),i}(Dn),Fr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return at(i,t),i}(Dn),Hr=function(t){function i(i){var n=t.call(this,i)||this;return n.data=i.data,n}return at(i,t),i}(Dn),Vr=function(t){function i(n){var r=t.call(this,n)||this;return r.baseURI=i.getBaseURI(n),r.children=[],r}return at(i,t),i.getBaseURI=function(t){var i=t.baseURI;if(null==i){var n=t.getElementsByTagName("base");i=0!==n.length?n[0].href:t.URL}return i},i}(Dn),zr=function(t){function i(i){var n=t.call(this,i)||this;return n.mode=i.mode,n.children=[],n}return at(i,t),i}(Dn),Jr=function(){function t(t){this.processors=t}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,i){var n,r=vt({},i),s=t.nodeType;switch(s){case Node.ELEMENT_NODE:n=this.rh(t,r);break;case Node.TEXT_NODE:n=this.eh(t,r);break;case Node.CDATA_SECTION_NODE:n=this.uh(t,r);break;case Node.COMMENT_NODE:n=this.hh(t,r);break;case Node.DOCUMENT_TYPE_NODE:n=new Ur(t);break;case Node.DOCUMENT_NODE:n=this.oh(t,r);break;case Node.DOCUMENT_FRAGMENT_NODE:n=this.fh(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return cn(this.processors,(function(i){var s;null===(s=i.afterSerialize)||void 0===s||s.call(i,t,n,r)})),n},t.prototype.rh=function(t,i){var n,r=new Un(t);cn(this.processors,(function(n){var s;null===(s=n.serializeElementNode)||void 0===s||s.call(n,t,r,i)})),(n=csArray.prototype.push).call.apply(n,yt([r.attributes],this.ah(t,i),!1));var s=csElementshadowRoot.apply(t);return s&&(r.shadowRoot=this.lh(s,i)),r.children=this.yh(t,i),r},t.prototype.ah=function(t,i){var n=this,r=on(t.attributes);return cn(this.processors,(function(n){var s,e=null===(s=null==n?void 0:n.beforeSerializeAttributes)||void 0===s?void 0:s.call(n,t,r,i);e&&(r=e)})),csArray.prototype.map.call(r,(function(r){return n.ph(t,r,i)}))},t.prototype.ph=function(t,i,n){var r=new jr(i);return cn(this.processors,(function(s){var e;null===(e=s.serializeAttribute)||void 0===e||e.call(s,t,i,r,n)})),r},t.prototype.runBeforeSerializeChildrenHook=function(t,i,n){var r=n||csNodechildNodes.apply(t);return r=i.excludedNodes?fn(r,(function(t){return!i.excludedNodes.get(t)})):r,cn(this.processors,(function(n){n.beforeSerializeChildren&&(r=n.beforeSerializeChildren(t,r,i))})),on(r)},t.prototype.yh=function(t,i){var n=this;return i.skipChildrenSerialization?[]:function(t,i){for(var n=t.length,r=new csArray(n),s=0;s<n;s+=1)r[s]=i(t[s]);return r}(this.runBeforeSerializeChildrenHook(t,i),(function(t){return n.serialize(t,i)}))},t.prototype.eh=function(t,i){var n=new qr(t);return cn(this.processors,(function(r){var s;null===(s=r.serializeTextNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.uh=function(t,i){var n=new Fr(t);return cn(this.processors,(function(r){var s;null===(s=r.serializeCDATASectionNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.hh=function(t,i){var n=new Hr(t);return cn(this.processors,(function(r){var s;null===(s=r.serializeCommentNode)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.oh=function(t,i){var n=new Vr(t);return n.children=this.yh(t,i),n},t.prototype.lh=function(t,i){var n=new zr(t);return cn(this.processors,(function(r){var s;null===(s=r.serializeShadowRootNode)||void 0===s||s.call(r,t,n,i)})),n.children=this.yh(t,i),cn(this.processors,(function(r){var s;null===(s=r.afterSerializeShadowRoot)||void 0===s||s.call(r,t,n,i)})),n},t.prototype.fh=function(t,i){if(t.mode)return this.lh(t,i);throw new Error("Not implemented yet.")},t}();function Gr(){return dt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Wr=function(){function t(t){this.pi=t,this.mh=!1,this.gh=new Map,this.Ah={},this.Eh=new Map,this.Sh=new Map,this.bh=new Set,this.Nh=new Map}return t.prototype.beforeSerializeChildren=function(t,i){var n=this;return this.mh?fn(i,(function(t){return!n.isAddedNodeDuringSerialization(t)})):i},t.prototype.beforeSerializeAttributes=function(t,i,n){if(!this.mh)return i;var r=this.pi.getId(t);if(!r)return i;var s=this.Sh.get(r);return s?csArray.prototype.filter.call(i,(function(t){var i="".concat(t.name).concat(t.namespaceURI||""),n=s.get(i);return!(n&&null===n.value)})):i},t.prototype.serializeTextNode=function(t,i,n){if(this.mh){var r=this.Eh.get(i.csId);r&&(i.data=r)}},t.prototype.serializeCommentNode=function(t,i){if(this.mh){var n=this.Eh.get(i.csId);n&&(i.data=n)}},t.prototype.afterSerialize=function(t,i,n){this.mh&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||n.skipRegisterNode||this.Th(i,n))},t.prototype.afterSerializeShadowRoot=function(t,i,n){this.mh&&(n.skipRegisterNode||this.Th(i,n))},t.prototype.enable=function(){this.mh=!0,this.Rh()},t.prototype.disable=function(){this.mh=!1,this.Rh()},t.prototype.deleteNode=function(t){this.gh.delete(t)},t.prototype.setDefaultSerializationOptions=function(t){this.Ah=t},t.prototype.getSerializedNodeById=function(t){var i;return null===(i=this.gh.get(t))||void 0===i?void 0:i.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var i,n=this.pi.getId(t);if(n)return null===(i=this.gh.get(n))||void 0===i?void 0:i.serializedNode},t.prototype.getOptions=function(t){var i,n=this.pi.getId(t);return n&&(null===(i=this.gh.get(n))||void 0===i?void 0:i.options)||this.Ah},t.prototype.registerInitialCharacterData=function(t,i){this.Eh.get(t)||this.Eh.set(t,i)},t.prototype.registerInitialAttributes=function(t,i,n,r){var s=this.Sh.get(t),e="".concat(n).concat(i||"");if(s){if(s.has(e))return}else s=new Map,this.Sh.set(t,s);var u={name:n,namespaceURI:i||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var i,n=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);i=n.nextNode();){var r=this.pi.getId(i);r&&this.bh.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,i,n){var r=this.pi.getId(n),s=this.pi.getId(t);if(r&&s){var e=this.Nh.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s);else{for(var u=[],h=i?this.pi.getId(i):null,o=0;o<csNodechildNodes.apply(n).length;o+=1){var c=this.pi.getId(csNodechildNodes.apply(n)[o]);c&&!this.bh.has(c)&&(h&&c===h&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===h&&csArray.prototype.push.call(u,s);var f=[s];this.Nh.set(r,{childNodeIds:u,removedNodeIds:f})}}},t.prototype.addSerializedChildToParent=function(t,i,n){var r=this.getSerializedNodeByNode(t);r&&Br(r)&&this.Oh(i,r,n)},t.prototype.isAddedNodeDuringSerialization=function(t){var i=this.pi.getId(t);return!!i&&this.bh.has(i)},t.prototype.getInitialIndexInParent=function(t,i){var n=this.pi.getId(i),r=this.pi.getId(t);if(!n||!r)return-1;var s=this.Nh.get(n);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.Rh=function(){this.gh.clear(),this.Eh.clear(),this.Sh.clear(),this.bh.clear(),this.Nh.clear()},t.prototype.Th=function(t,i){t.csId&&(this.kh(t.csId,t,i),this.Ih(t.csId,t),this.gh.set(t.csId,{serializedNode:t,options:i}))},t.prototype.kh=function(t,i,n){if(function(t){return t instanceof Un}(i)){var r=this.Sh.get(t);if(r){for(var s=0,e=i.attributes;s<e.length;s++){var u=e[s],h="".concat(u.name).concat(u.namespaceURI||""),o=r.get(h);o&&null!==o.value&&(u.value=o.value,r.delete(h))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(i.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:n.withAnonymization||!1})}))}}},t.prototype.Oh=function(t,i,n){t>=0?csArray.prototype.splice.call(i.children,t,0,n):"artificial"in n&&csArray.prototype.push.call(i.children,n)},t.prototype.Ih=function(t,i){var n;if(Br(i)){var r=this.Nh.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],h=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==h){var o=null===(n=this.gh.get(u))||void 0===n?void 0:n.serializedNode;void 0!==o&&this.Oh(h,i,o)}}}},t}();function Br(t){return"children"in t}var Kr,Yr,Xr={taskTime:25},$r=function(t){function i(i,n,r,s){void 0===r&&(r=new Wr(n)),void 0===s&&(s=Xr);var e=t.call(this,yt([r],i,!0))||this;return e.xh=n,e.Lh=r,e.Ch=s,e._h=0,e.Mh=e.Ch.taskTime,e}return at(i,t),i.prototype.isAsynchronous=function(){return!0},i.prototype.handleMutationAttribute=function(t,i){var n=i[0],r=i[1],s=i[2];this.Lh.getSerializedNodeById(n)||this.Lh.registerInitialAttributes(n,r,s,t)},i.prototype.handleMutationCharacterData=function(t,i){var n=i[0];this.Lh.getSerializedNodeById(n)||this.Lh.registerInitialCharacterData(n,t.oldValue||"")},i.prototype.serializeMutationChildList=function(t,i,n){var r=this.Dr(t,i,n);return this.Dh(t),{removedNodes:this.Mr(t,i),addedNodes:r}},i.prototype.startSerializeAsync=function(t,i){return void 0===i&&(i={}),dt(this,void 0,void 0,(function(){return wt(this,(function(n){return this._h+=1,this.Lh.setDefaultSerializationOptions(i),[2,this.Ph(t,i)]}))}))},i.prototype.Dr=function(t,i,n){var r=[],s=null;if(t.nextSibling){var e=this.xh.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.xh.getId(t.target),h=0;h<t.addedNodes.length;h+=1){var o=t.addedNodes[h],c=this.serialize(o,{excludedNodes:n,skipRegisterNode:!0,withAnonymization:i}),f=n.get(o);f&&n.set(o,f-1),csArray.prototype.push.call(r,[u,s,c])}return r},i.prototype.Dh=function(t){for(var i=0;i<t.addedNodes.length;i+=1){var n=t.addedNodes[i];this.Lh.markAddedTreeAsProcessed(n)}},i.prototype.Uh=function(t,i){if(!i)return-1;var n=this.Lh.getInitialIndexInParent(t,i);return n>=0?n:csArray.prototype.indexOf.call(csNodechildNodes.apply(i),t)},i.prototype.Mr=function(t,i){for(var n=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Lh.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.jh(s))this.qh(s)&&this.Fh(s,i);else{var e=this.serialize(s,{withAnonymization:i});if(this.qh(t.target)){var u=this.Uh(s,t.target);this.Lh.addSerializedChildToParent(t.target,u,e)}}var h=this.xh.getId(s);h&&csArray.prototype.push.call(n,[h])}return n},i.prototype.Fh=function(t,i){for(var n=0;n<csNodechildNodes.apply(t).length;n+=1){var r=csNodechildNodes.apply(t)[n];if(this.qh(r))this.Fh(r,i);else if(!this.Lh.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:i}),e=this.Uh(r,t);this.Lh.addSerializedChildToParent(t,e,s)}}},i.prototype.qh=function(t){return!!this.Lh.getSerializedNodeByNode(t)},i.prototype.jh=function(t){return this.qh(t)||this.Lh.isAddedNodeDuringSerialization(t)},i.prototype.Ph=function(t,i){return void 0===i&&(i={}),dt(this,void 0,void 0,(function(){var n,r,s,e,u,h,o,c,f,a,v;return wt(this,(function(l){switch(l.label){case 0:return n=this._h,r=Lt(),this.Lh.enable(),i.skipChildrenSerialization=!0,s=[t],[4,Gr()];case 1:if(l.sent(),n!==this._h)return[2,null];this.Hh=csDate.now(),this.serialize(t,i),l.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Lh.getOptions(e),h=this.runBeforeSerializeChildrenHook(e,u),o=csArray.prototype.shift.call(h),l.label=3;case 3:return o?csDate.now()-this.Hh>this.Mh?[4,Gr()]:[3,5]:[3,6];case 4:if(l.sent(),n!==this._h)return[2,null];this.Hh=csDate.now(),l.label=5;case 5:return this.jh(o)?(o=csArray.prototype.shift.call(h),[3,3]):(csArray.prototype.push.call(s,o),c=this.serialize(o,u),f=this.Uh(o,e),this.Lh.addSerializedChildToParent(e,f,c),y(o)&&csElementshadowRoot.apply(o)&&(a=csElementshadowRoot.apply(o),csArray.prototype.push.call(s,a)),o=csArray.prototype.shift.call(h),[3,3]);case 6:return[3,2];case 7:if(!(v=this.Lh.getSerializedNodeByNode(t)))throw this.Lh.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Lh.disable(),[2,{args:[v],date:r,type:Pi.INITIAL_DOM}]}}))}))},i}(Jr),Zr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.isAsynchronous=function(){return!1},i}(Jr),Qr=function(){function t(){this.Vh=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.Vh&&this.isSupported()&&(this.zh?this.zh.clear():this.zh=new Set,this.Vh=!0)},t.prototype.stop=function(){this.Vh&&(this.Vh=!1)},t.prototype.onEvent=function(t){this.cn=t},t.prototype.Jh=function(t){return dt(this,void 0,void 0,(function(){return wt(this,(function(i){switch(i.label){case 0:return this.zh.has(t)?[2]:(this.zh.add(t),[4,window.customElements.whenDefined(t)]);case 1:return i.sent(),this.Gh(t),[2]}}))}))},t.prototype.Gh=function(t){if(this.Vh){var i={type:Pi.CUSTOM_ELEMENT_REGISTRATION,date:Lt(),args:[t]};this.cn(i)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.Wh=t}return t.prototype.serializeElementNode=function(t){(function(t){return y(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&csArray.prototype.indexOf.call(k,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.Wh.Jh(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},t}(),ts=function(){function t(t){this.En=t}return t.prototype.getRequestPayload=function(){var t=this.En.extractEvents(Pi.JAVASCRIPT_ERROR,Pi.API_ERROR,Pi.CUSTOM_ERROR);return t.length?F(t):""},t}(),is=function(){function t(){this.Bh=new Map,this.Kh=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,i){if(!E(t))return i;var n=this.Yh(t);if(null===n||0===n.length)return i;if(dn.isEmpty(t.textContent)){var r=on(i);return csArray.prototype.push.call(r,this.Xh(n)),r}var s=this.$h(t);if(s===n.length)return i;for(var e=new csArray(n.length-s),u=s,h=0;u<n.length;u+=1,h+=1)e[h]=n[u];r=on(i);return csArray.prototype.push.call(r,this.Xh(e)),r},t.prototype.$h=function(t){var i=this.Bh.get(t.textContent);if(i)return i;var n=t.cloneNode(!0);n.textContent=t.textContent,this.Kh.head.appendChild(n);var r=this.Yh(n);return i=r?r.length:0,this.Bh.set(t.textContent,i),this.Kh.head.removeChild(n),i},t.prototype.Yh=function(t){try{var i=t.sheet;return i?i.cssRules||i.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Xh=function(t){var i="";cn(t,(function(t){return i+=t.cssText}));var n=document.createTextNode(i);return n.__contentsquare_artificial=!0,n},t}(),ns=function(){function t(t,i){this.Pr=t,this.pi=i,this.Zh=1}return t.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){var i=this;t.isAdoptedStyleSheetsSupported()&&(this.Qh=new Set,this.jr=this.Pr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,r=t.args;i.io(n,r)}}),this.Fr=this.Pr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,r=t.args;i.no(n,r)}}),this.ro=this.Pr.createDescriptorInterceptor(window.ShadowRoot.prototype,"adoptedStyleSheets",this.so.bind(this)),this.eo=this.Pr.createDescriptorInterceptor(window.Document.prototype,"adoptedStyleSheets",this.so.bind(this)))},t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){t.isAdoptedStyleSheetsSupported()&&(this.jr&&this.jr.activate(),this.Fr&&this.Fr.activate(),this.ro&&this.ro.activate(),this.eo&&this.eo.activate())},t.prototype.stop=function(){t.isAdoptedStyleSheetsSupported()&&(this.Qh.clear(),this.jr&&this.jr.deactivate(),this.Fr&&this.Fr.deactivate(),this.ro&&this.ro.deactivate(),this.eo&&this.eo.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.so(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.so(t,t.adoptedStyleSheets)},t.prototype.so=function(t,i){var n=this;csArray.prototype.forEach.call(i,(function(t){return n.uo(t)}));var r=csArray.prototype.map.call(i,(function(t){return n.ho(t)})),s=this.pi.getId(t);s&&queueMicrotask((function(){var t={type:Pi.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:Lt()};n.cn(t)}))},t.prototype.ho=function(t){return t.__adopted_stylesheet_id},t.prototype.io=function(t,i){var n=i[0],r=i[1],s=this.oo(t);if(s){var e={date:Lt(),type:Pi.ADOPTED_STYLESHEET_RULE_INSERT,args:G(r)?[s,n,r]:[s,n]};this.cn(e)}},t.prototype.no=function(t,i){var n=i[0],r=this.oo(t);if(r&&r){var s={date:Lt(),type:Pi.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,n]};this.cn(s)}},t.prototype.oo=function(t){return this.Qh.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.uo=function(t){if(!this.Qh.has(t)){var i=this.Zh++;t.__adopted_stylesheet_id=i,this.Qh.add(t);var n=this.co(t),r={type:Pi.REGISTER_ADOPTED_STYLE_SHEET,args:[i,n],date:Lt()};this.cn(r)}},t.prototype.co=function(t){var i=[];try{i=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){Y.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:i}},t}(),rs=function(){function t(t,i,n){this.fo=t,this.P=i,this.X=n}return t.prototype.shouldUseAnonymization=function(){var t=!this.fo.isAllowedByConsent();return t?this.P.replayRecordingUnmaskedUrlRegex&&this.P.replayRecordingUnmaskedUrlRegex.test(this.X.getAnonymizedUrl())&&(t=!1):this.P.replayRecordingMaskedUrlRegex&&this.P.replayRecordingMaskedUrlRegex.test(this.X.getAnonymizedUrl())&&(t=!0),t},t}(),ss=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),es="v2/recording",us=["setCapturedElementsSelector"],hs=["setPIISelectors"],os=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A){this.ao=t,this.Y=i,this.P=n,this.oi=r,this.yi=s,this.fo=e,this.vo=u,this.lo=h,this.U=o,this.kn=c,this.X=f,this.mi=a,this.xn=v,this.Ln=l,this.Cn=d,this.Zu=w,this.Mn=y,this.Zi=p,this.do=m,this.wo=g,this.yo=A}return t.prototype.init=function(){var t=this,i=new fr,n=new xn,r=new Cn(this.mi);this.po=new qn(this.U,this.P),this.po.init();var s=new nr,e=new ur(i,n,this.P),u=new _r(window.crypto),h=new Dr(window.crypto);h.init(),u.init();var o=new xr,c=new xr,f=new xr,a=new xr,v=new xr,l=new kr(n,this.P,h,u,o,c,f,v,a,this.oi);l.init();var d=[new is,r,this.po,s];if(this.P.encryptionEnabled){var w=new Ir(l);csArray.prototype.push.call(d,w)}var y=new ns(i,n);y.init(),ns.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(d,y);var p=new Rr(this.mi,1e3);this.P.textVisibilityEnabled&&Rr.isSupported()&&csArray.prototype.push.call(d,p);var m,g=new Qr;g.isSupported()&&csArray.prototype.push.call(d,g.getProcessor()),m=this.mo()?new $r(d,n):new Zr(d),this.En=new pn;var A=new mn,E=new zn(A,this.vo),S=new Or(this.P.getRecordingUri(),es);this.P.useMalkaPipeline&&(E.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Y.getRecordingStates())}}}),S.setRequestParametersProviders(this.vo,{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Y.getRecordingStates()),ct:ki.UNCOMPRESSED,hlm:"true"}}}),S.setRequestPayloadProvider(new ts(this.En)));var b=this.Ao(this.oi);this.Eo=new rs(this.fo,this.P,this.X),this.Yi=new kn(m,n,this.po,l),this.Yi.setAnonymization(this.Eo.shouldUseAnonymization()),this.Tn=new hn(this.yi,n,this.mi,l),this.Tn.init();var N=new wn(this.Yi,e,s,this.Zi,n,this.mi),T=new Vn("csPersisted"),R=this.Ao(this.oi);this.So=new Sn(R,this.En,T,this.P,S),this.bo=new En(this.P,b,this.En,E,A,new In(i,n,this.mi,s),N,this.Tn,new Bn(window.location,this.U),new Pr(this.Zu,n,this.mi),this.kn,this.Y,s,new rr(window),this.xn,this.Ln,this.Cn,p,this.Mn,l,this.So,g,y),this.To=new Kn(this.Tn,N,new Jn(new Wn,this.P),b,this.Yi,this.Zi),this.do.addListeners(this.bo),this.wo.addListeners(this.bo),this.wo.addListeners(this.To),e.init(),this.To.init(),this.bo.init(),this.lo.register(["isRecording"],(function(){return t.Y.isReplayRecorded()&&!t.yo.isUrlExcludedForSessionReplay()})),this.lo.register(us,(function(i){t.po.setWhitelistedElementsSelector(i),t.Zi.emitRecordingStatusChange()})),this.lo.register(hs,(function(i){t.mi.setPIISelectors(i),t.Zi.emitRecordingStatusChange()})),this.lo.register(["setEncryptionSelectors"],(function(t){l.setEncryptionSelectors(t)})),this.ao.enableRecordingStatus(this.bo,this.mi,this.Eo,this.po)},t.prototype.onStartTracking=function(){this.So.recover(),this.Y.isReplayRecorded()&&!this.yo.isUrlExcludedForSessionReplay()&&(this.P.useMalkaPipeline&&this.Y.isTemporarilyRecorded()&&this.bo.blockSendingEventsFromQuotaService(),this.Ro())},t.prototype.onArtificialPageViewEnd=function(){this.bo.clearStates(),!this.Y.isReplayRecorded()||this.yo.isUrlExcludedForSessionReplay()||this.Y.isTemporarilyRecorded()||this.So.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Yi.setAnonymization(this.Eo.shouldUseAnonymization()),this.Y.isReplayRecorded()&&!this.yo.isUrlExcludedForSessionReplay()?(this.P.useMalkaPipeline&&this.Y.isTemporarilyRecorded()&&this.bo.blockSendingEventsFromQuotaService(),this.Oo()):this.ko()},t.prototype.onBeforeSessionRenewal=function(){this.bo.clearStates(),this.ko()},t.prototype.onOptout=function(){this.ko()},t.prototype.onConsentGranted=function(){this.Yi.setAnonymization(this.Eo.shouldUseAnonymization()),this.bo.triggerConsentGranted(),this.Zi.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.Yi.setAnonymization(this.Eo.shouldUseAnonymization()),this.bo.triggerConsentWithdrawn(),this.Zi.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,i){var n=this;this.P.useMalkaPipeline&&(t===ui.NOT_RECORDED&&i===hi.ETR_OFF?(this.bo.clearEvents(),this.ko()):(this.En.setRequestParametersFromProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(n.Y.getRecordingStates())}}}),this.bo.allowSendingEventsFromQuotaService(),this.Yi.isDOMSerializationInProgress()||this.bo.pushEvents()))},t.prototype.onInitialDomStart=function(){this.bo.blockSendingEventsFromSerialization(),this.So.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.Tn.start(),this.bo.addInitialDom(t),this.bo.allowSendingEventsFromSerialization(),this.So.allowSendingLastMessage()},t.prototype.Ro=function(){this.To.start(),this.bo.start(),this.So.start(),this.Zi.emitRecordingStatusChange()},t.prototype.ko=function(){this.To.stop(),this.bo.stop(),this.So.stop(),this.Zi.emitRecordingStatusChange()},t.prototype.Oo=function(){this.ko(),this.Ro()},t.prototype.Ao=function(t){var i=this.P.useMalkaPipeline?es:"recording",n=this.P.useMalkaPipeline?"byteArray":"base64",r=new Hi(this.P.getRecordingUri(),i);return r.setCompressionOptions(t,n),r},t.prototype.mo=function(){return ss.isAsyncSerializationSupported()&&this.P.asyncSerializerEnabled},lt([nn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),lt([nn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),cs=function(){function t(t,i,n){this.K=t,this.Y=i,this.P=n,this.Io=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Io},t.prototype.setNaturalPageViewSent=function(t){this.Io=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),i=this.xo(),n=this.Lo();return t&&i?{projectId:n,sessionKey:t,pageNumber:i}:null},t.prototype.getSessionKey=function(){var t=this.K.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.xo=function(){return this.Y.doesSessionExist()?this.Y.getSession().pageNumber:null},t.prototype.Lo=function(){return this.P.projectId},t}(),fs=function(){function t(t){this.Co=t,this._o=[]}return t.prototype.handleCommand=function(t){if(B(t)&&(this.Mo(t),this.Co.isNaturalPageViewSent())){var i=this.Co.getTrackingContext();null!==i&&this.Do(t,i)}},t.prototype.Mo=function(t){csArray.prototype.push.call(this._o,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,i=this.Co.getTrackingContext();null!==i&&csArray.prototype.map.call(this._o,(function(n){return t.Do(n,i)}))},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),as=function(){function t(t){this.Co=t,this.Po=[]}return t.prototype.handleCommand=function(t){return this.Co.isNaturalPageViewSent()?this.Uo(t):void this.jo(t)},t.prototype.Uo=function(t){var i=this.Co.getSessionKey();return this.qo(t)&&null!==i&&this.Do(t.callback,i),i},t.prototype.jo=function(t){this.qo(t)&&csArray.prototype.push.call(this.Po,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,i=this.Co.getSessionKey();null!==i&&csArray.prototype.forEach.call(this.Po,(function(n){t.Do(n,i)})),this.Po=[]},t.prototype.qo=function(t){return t&&"function"==typeof t.callback},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),vs=function(){function t(t,i){this.Fo=t,this.Co=i}return t.prototype.onIframeIntegrationCallback=function(t){if(this.Co.isNaturalPageViewSent()){var i=this.Co.getTrackingContext();null!==i&&(t.trackingContext=i,this.Fo.sendToChildren(Gt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Co.getTrackingContext();if(null!==t){var i={trackingContext:t,initiator:zt.AfterPageView};this.Fo.sendToChildren(Gt.IntegrationCallback,i)}},t}(),ls=["afterPageView"],ds=["getSessionKey"],ws=function(){function t(t,i,n,r,s,e){this.K=t,this.Y=i,this.lo=n,this.Ho=r,this.Fo=s,this.P=e}return t.prototype.init=function(){var t=this;this.Co=new cs(this.K,this.Y,this.P),this.Vo=new fs(this.Co),this.zo=new as(this.Co),this.Jo=new vs(this.Fo,this.Co),this.Ho.addListeners(this.Jo),this.lo.register(ds,(function(i){return t.zo.handleCommand(i)})),this.lo.register(ls,(function(i){t.Vo.handleCommand(i)}))},t.prototype.onAfterNaturalPageView=function(){this.Co.setNaturalPageViewSent(!0),this.zo.flushPendingCallbacks(),this.Vo.executeRegisteredCallbacks(),this.Jo.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Vo.executeRegisteredCallbacks(),this.Jo.sendAfterPageViewCallbackToChildren()},t}(),ys=function(){function t(t,i){this.key=csString.prototype.slice.call(t,0,512),this.value=z(i)?csString.prototype.slice.call(i,0,255):i}return t.isValid=function(t,i){return z(t)&&(z(i)||V(i))},t}(),ps=function(t){function i(i,n){var r=t.call(this)||this;return r.Go=i,r.U=n,r.Wo=[],r}return at(i,t),i.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Wo,(function(i){return t.trackDynamicVariable(i.key,i.value)})),this.Wo=[]},i.prototype.onStop=function(){},i.prototype.trackDynamicVariable=function(t,i){this.isStarted?ys.isValid(t,i)&&this.Go.add(new ys(this.U.anonymizeEmail(t),this.U.anonymizeEmail(i))):csArray.prototype.push.call(this.Wo,{key:t,value:i})},i}(An),ms=function(){function t(t){this.oi=t,this.Go=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Go,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Go=[]},t.prototype.onBatchReady=function(t){this.Bo=t},t.prototype.getRequestParameters=function(){for(var t={},i=0,n=this.Go;i<n.length;i++){var r=n[i];t[r.key]=r.value}return{dv:this.oi.compressSync(csJSON.stringify(t)),ct:this.oi.algorithm}},t.prototype.setBatchReadyCall=function(){this.Bo()},lt([Er(),X("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),gs=["trackDynamicVariable"],As=function(){function t(t,i,n,r,s,e){this.lo=t,this.Y=i,this.P=n,this.vo=r,this.oi=s,this.U=e,this.M=new Et(this.P.getTrackerUri(),"dvar"),this.Go=new ms(this.oi),this.Ko=new ps(this.Go,this.U)}return t.prototype.init=function(){var t=this;this.M.setRequestParametersProviders(this.vo,this.Go),this.Y.setDynamicVariablesService(this.Ko),this.Go.onBatchReady((function(){return t.M.send()})),this.M.after((function(){return t.Go.clear()})),this.lo.register(gs,(function(i){var n=void 0===i?{}:i,r=n.key,s=n.value;t.Ko.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.Ko.start()},t}(),Es=function(){function t(t,i){this.id=t,this.revenue=i}return t.from=function(i){var n=new t(i.id,parseFloat(i.revenue));return isNaN(parseFloat(i.tax))||(n.tax=parseFloat(i.tax)),isNaN(parseFloat(i.shipping))||(n.shipping=parseFloat(i.shipping)),z(i.currency)&&i.currency.length<=10&&(n.currency=i.currency),n},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t}(),Ss=function(){function t(t,i,n,r){this.id=t,this.name=i,this.price=n,this.quantity=r}return t.from=function(i){if(!t.Yo(i))return null;var n=new t(i.id,i.name,parseFloat(i.price),parseInt(i.quantity,10));return G(i.sku)&&(n.sku=i.sku),G(i.category)&&(n.category=i.category),G(i.merchant)&&i.merchant.length>0&&(n.merchant=i.merchant.slice(0,100)),n},t.Yo=function(t){return z(t.id)&&z(t.name)&&H(parseFloat(t.price))&&V(parseInt(t.quantity,10))&&(!G(t.sku)||z(t.sku))&&(!G(t.category)||z(t.category))&&(!G(t.merchant)||z(t.merchant))},t}(),bs=function(){function t(t,i,n){this.U=t,this.Xo=i,this.kn=n,this.clear()}return t.prototype.addTransaction=function(t){var i=this.U.anonymizeFields(t,["id"]);this.$o=Es.from(i)},t.prototype.getTransaction=function(){return this.$o},t.prototype.sendTransaction=function(){this.kn.isSessionValid()&&(this.$o.hasValidRevenue()?this.Xo.send():Y.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!B(t)){var i=this.U.anonymizeFields(t,["id","name","sku","category"]),n=Ss.from(i);null!==n&&csArray.prototype.push.call(this.Zo,n)}},t.prototype.getItems=function(){return this.Zo},t.prototype.clear=function(){this.$o=Es.from({revenue:NaN}),this.Zo=[]},t.prototype.getRequestParameters=function(){var t={id:this.$o.id?"".concat(this.$o.id):"",revenue:"".concat(this.$o.revenue)};return G(this.$o.tax)&&(t.tax="".concat(this.$o.tax)),G(this.$o.shipping)&&(t.shipping="".concat(this.$o.shipping)),G(this.$o.currency)&&(t.cu="".concat(this.$o.currency)),t.items=window.csJSON.stringify(this.Zo),t},t}(),Ns=function(){function t(t,i){this.Qo=csString.prototype.slice.call(t,0,100),this.tc=i&&csString.prototype.slice.call(i,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.tc},enumerable:!1,configurable:!0}),t}(),Ts=function(){function t(t,i){this.ic=t,this.kn=i,this.nc=null}return t.prototype.addToCart=function(t){!this.rc(t.sku)||G(t.merchant)&&!z(t.merchant)||(this.nc=new Ns(t.sku,t.merchant),this.sendCartItem())},t.prototype.rc=function(t){return z(t)&&t.length>0},t.prototype.getCartItem=function(){return this.nc},t.prototype.sendCartItem=function(){this.kn.isSessionValid()&&this.ic.send()},t.prototype.clear=function(){this.nc=null},t.prototype.getRequestParameters=function(){if(!this.nc)return{};var t={sku:"".concat(this.nc.sku)};return G(this.nc.merchant)&&this.nc.merchant.length>0&&(t.me=this.nc.merchant),t},t}(),Rs=["ecommerce:addToCart","ec:cart:add"],Os=["ecommerce:addTransaction","ec:transaction:create"],ks=["ecommerce:addItem","ec:transaction:items:add"],Is=["ecommerce:send","ec:transaction:send"],xs=function(){function t(t,i,n,r,s,e,u){this.P=t,this.K=i,this.Y=n,this.lo=r,this.U=s,this.kn=e,this.X=u}return t.prototype.init=function(){var t=new Et(this.P.getTrackerUri(),"transaction"),n=new Et(this.P.getTrackerUri(),"addtocart"),r=new bs(this.U,t,this.kn),s=new Ts(n,this.kn);t.setRequestParametersProviders(this.P,this.K,this.Y,this.X,r,i),t.after((function(){r.clear()})),n.setRequestParametersProviders(this.P,this.K,this.Y,this.X,s,i),n.after((function(){s.clear()})),this.lo.register(Os,(function(t){r.addTransaction(t)})),this.lo.register(ks,(function(t){return r.addItem(t)})),this.lo.register(Is,(function(){return r.sendTransaction()})),this.lo.register(Rs,(function(t){s.addToCart(t)}))},t}(),Ls=function(){function t(t){this.$s=t.performance}return t.prototype.getRequestParameters=function(){if(this.sc())return{};var t=this.ec();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.ec=function(){var t=this.$s.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.sc=function(){return!(this.$s&&this.$s.timing&&this.$s.timing.loadEventEnd>0)},t}();function Cs(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(Kr||(Kr={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Yr||(Yr={}));var _s,Ms=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,i){return this.isEventTypeSupported(i.type)?this.baseEnhanceAnalysisEvent(t,i):i},t}(),Ds=function(t){function i(i,n){var r=t.call(this)||this;return r.C=i,r.hc=n,r.supportedEventTypes=[Kr.MOUSEDOWN,Kr.MOUSEUP,Kr.CLICK,Kr.MOUSEOVER,Kr.TAP],r}return at(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){if(this.C.eMerchandisingEnabled){var n=this.hc.getEventTargetPathAndTargetLink(t),r=n.path,s=n.targetLink;i.tgt=r,i.tgtLk=s}return i},i}(Ms),Ps=function(){function t(){}return t.build=function(t,i,n){return csArray.prototype.reduce.call(n,(function(i,n){return n.enhanceAnalysisEvent(t,i)}),i)},t}(),Us=function(t){function i(i){var n=t.call(this)||this;return n.hc=i,n.supportedEventTypes=[Kr.MOUSEDOWN,Kr.MOUSEUP,Kr.CLICK,Kr.MOUSEOVER,Kr.TAP,Kr.DRAG,Kr.FLICK],n}return at(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){return i.tgt||(i.tgt=this.hc.getEventTargetPath(t)),i},i}(Ms),js=function(){function t(t,i,n){this.P=t,this.hc=i,this.Zu=n,this.oc=[new Ds(this.P,this.hc),new Us(this.hc)]}return t.prototype.th=function(t,i){switch(t.type){case Sr.TAP:this.cc(i);break;case Sr.FLICK:this.fc(t,i);break;case Sr.DRAG:this.ac(t,i)}},t.prototype.cc=function(t){var i={type:Kr.TAP,ts:0,x:0,y:0,tgt:""},n=Ps.build(t,i,this.oc);n.tgt!==ht.INVALID_ELEMENT&&this.cn(n)},t.prototype.ac=function(t,i){var n={type:Kr.DRAG,ts:0,fd:t.direction,tgt:""},r=Ps.build(i,n,this.oc);r.tgt!==ht.INVALID_ELEMENT&&this.cn(r)},t.prototype.fc=function(t,i){var n={type:Kr.FLICK,ts:0,fd:t.direction,tgt:""},r=Ps.build(i,n,this.oc);r.tgt!==ht.INVALID_ELEMENT&&this.cn(r)},t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){var i=this;this.Zu.subscribe(t.Qu,(function(t,n){return i.th(t,n)}))},t.prototype.stop=function(){this.Zu.unsubscribe(t.Qu)},t.Qu="AnalysisGestureTracker",t}(),qs="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(W(t)&&function(t){try{if(W(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&K(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(qs))},t.getScrollContainer=function(){return document.querySelector("[".concat(qs,"]"))}}(_s||(_s={}));var Fs;!function(t){t.getRelativePosition=function(t){var i=rn(t);if(!(i&&K(i)&&B(i.getBoundingClientRect)&&W(t.pageX)&&W(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var n=i.getBoundingClientRect(),r=t.pageX-n.left-vn.windowOffsetX(),s=t.pageY-n.top-vn.windowOffsetY();i!==document.documentElement&&(r+=i.scrollLeft,s+=i.scrollTop);var e=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Fs||(Fs={}));var Hs,Vs,zs,Js,Gs,Ws,Bs=function(t){function i(i,n){var r=t.call(this)||this;return r.C=i,r.hc=n,r.supportedEventTypes=[Kr.MOUSEMOVE],r.vc="",r}return at(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){if(!this.C.mouseMoveHeatmapEnabled)return i;var n=Fs.getRelativePosition(t),r=n.valid,s=n.xRel,e=n.yRel;if(r){var u=this.hc.getEventTargetPath(t);u!==ht.INVALID_ELEMENT&&(i.xRel=s,i.yRel=e,u!==this.vc||this.C.iframesTracking?(this.vc=u,i.tgtHM=u):i.tgtHM="")}else this.vc="";return i},i}(Ms),Ks=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.supportedEventTypes=[Kr.CHANGE],i.lc=["text","email","number","search","tel","url","password"],i}return at(i,t),i.prototype.baseEnhanceAnalysisEvent=function(t,i){var n=rn(t);return S(n)&&csArray.prototype.indexOf.call(this.lc,n.type)>=0&&(i.isBlank=""===n.value),i},i}(Ms),Ys=function(){function t(t,i,n){var r=this;this.C=t,this.hc=i,this.yi=n,this.wc="select, select *, input, textarea",this.yc="select, select *, input, textarea",this.mc="a, a *, button, button *, select, select *, input, textarea",this.gc="input, select, textarea",this.Ac=150,this.Ec=400,this.Sc=!1,this.bc=Ar((function(t,i){return r.scrollListener(t,i)}),this.Ac),this.Nc=Ar((function(t){return r.resizeListener(t)}),this.Ac),this.Tc=en((function(t){return r.mouseMoveListener(t)}),this.Ec),this.Rc=[{boundElement:window,type:"resize",listener:function(){return r.Nc()}},{boundElement:document,type:"scroll",listener:function(t){return r.bc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Tc(r.Oc(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.kc=[{boundElement:document,type:"mouseover",listener:this.yi.on(this.mc,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.yi.on(this.mc,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.yi.on(this.wc,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.yi.on(this.wc,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.yi.on(this.yc,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.yi.on(this.gc,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.yi.on(this.gc,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.yi.on(this.gc,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.yi.on(this.gc,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.yi.on(this.gc,(function(t){return r.pasteListener(t)}))}],this.oc=[new Ds(this.C,this.hc),new Bs(this.C,this.hc),new Ks,new Us(this.hc)],this.Ki={},this.Li()}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){var t=this.Ic();csArray.prototype.forEach.call(t,(function(t){return Ji(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.Ic();csArray.prototype.forEach.call(t,(function(t){return Gi(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.bc.flushPending(),this.Nc.flushPending()},t.prototype.Ic=function(){return this.yi.isMatchesSelectorSupported()?yt(yt([],this.Rc,!0),this.kc,!0):(Y.warn("Element.matches is not implemented yet"),this.Rc)},t.prototype.resizeListener=function(t){var i=_s.getScrollContainer(),n=K(i);n&&(this.Sc=!0);var r={type:Kr.RESIZE,ts:0,x:n?i.clientWidth:vn.windowWidth(),y:n?i.clientHeight:vn.windowHeight()};void 0!==t&&(r.d=t),this.cn(r)},t.prototype.scrollListener=function(t,i){var n=_s.isEventOnScrollContainer(i);!this.Sc&&n&&this.resizeListener();var r={type:Kr.SCROLL,ts:0,x:n?csEventtarget.apply(i).scrollLeft:vn.windowOffsetX(),y:n?csEventtarget.apply(i).scrollTop:vn.windowOffsetY(),d:t},s=Ps.build(i,r,this.oc);this.cn(s)},t.prototype.mouseMoveListener=function(t){var i={type:Kr.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},n=Ps.build(t,i,this.oc);this.cn(n)},t.prototype.mouseDownListener=function(t){var i={type:Kr.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.mouseUpListener=function(t){var i={type:Kr.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.clickListener=function(t){var i={type:Kr.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.mouseOverListener=function(t){var i={type:Kr.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.mouseOutListener=function(t){var i={type:Kr.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.hc.getEventTargetPath(t)},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.focusInListener=function(t){var i={type:Kr.FOCUSIN,ts:0,tgt:this.hc.getEventTargetPath(t)},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.focusOutListener=function(t){var i={type:Kr.FOCUSOUT,ts:0,tgt:this.hc.getEventTargetPath(t)},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.changeListener=function(t){var i={type:Kr.CHANGE,ts:0,tgt:this.hc.getEventTargetPath(t)},n=Ps.build(t,i,this.oc);this.xc(n)},t.prototype.copyListener=function(t){var i={type:Kr.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:zi.COPY};this.xc(i)},t.prototype.cutListener=function(t){var i={type:Kr.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:zi.CUT};this.xc(i)},t.prototype.pasteListener=function(t){var i={type:Kr.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:zi.PASTE};this.xc(i)},t.prototype.keyUpListener=function(t){var i={type:Kr.KEYUP,ts:0,tgt:this.hc.getEventTargetPath(t),key:this.Lc(t)};this.xc(i)},t.prototype.keyDownListener=function(t){var i={type:Kr.KEYDOWN,ts:0,tgt:this.hc.getEventTargetPath(t),key:this.Lc(t)};this.xc(i)},t.prototype.Lc=function(t){var i=this.Ki[t.key];return void 0===i?Vi.ALPHANUMERICAL:i},t.prototype.xc=function(t){Cs(t)&&t.tgt!==ht.INVALID_ELEMENT&&this.cn(t)},t.prototype.Oc=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.Li=function(){this.Ki[" "]=Vi.SPACE,this.Ki.Spacebar=Vi.SPACE,this.Ki.Enter=Vi.ENTER,this.Ki.Backspace=Vi.BACKSPACE,this.Ki.Delete=Vi.DELETE,this.Ki.ArrowUp=Vi.ARROWUP,this.Ki.ArrowDown=Vi.ARROWDOWN,this.Ki.ArrowLeft=Vi.ARROWLEFT,this.Ki.ArrowRight=Vi.ARROWRIGHT,this.Ki.Up=Vi.ARROWUP,this.Ki.Down=Vi.ARROWDOWN,this.Ki.Left=Vi.ARROWLEFT,this.Ki.Right=Vi.ARROWRIGHT,this.Ki.CapsLock=Vi.CAPSLOCK,this.Ki.Shift=Vi.SHIFT,this.Ki.Tab=Vi.TAB},lt([X("Event handler type: resize")],t.prototype,"resizeListener",null),lt([X("Event handler type: scroll")],t.prototype,"scrollListener",null),lt([X("Event handler type: mouseMove"),un()],t.prototype,"mouseMoveListener",null),lt([X("Event handler type: mouseDown"),un()],t.prototype,"mouseDownListener",null),lt([X("Event handler type: mouseUp"),un()],t.prototype,"mouseUpListener",null),lt([X("Event handler type: click"),un()],t.prototype,"clickListener",null),lt([X("Event handler type: mouseOver"),un()],t.prototype,"mouseOverListener",null),lt([X("Event handler type: mouseOut"),un()],t.prototype,"mouseOutListener",null),lt([X("Event handler type: focusIn")],t.prototype,"focusInListener",null),lt([X("Event handler type: focusOut")],t.prototype,"focusOutListener",null),lt([X("Event handler type: change")],t.prototype,"changeListener",null),lt([X("Event handler type: copy")],t.prototype,"copyListener",null),lt([X("Event handler type: cut")],t.prototype,"cutListener",null),lt([X("Event handler type: paste")],t.prototype,"pasteListener",null),lt([X("Event handler type: keyup")],t.prototype,"keyUpListener",null),lt([X("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Xs=function(){function t(){var t=this;this.Cc=100,this._c=0,this.Mc=vn.documentHeight(),this.Dc={boundElement:document,type:"scroll",listener:function(i){return t.maxScrollRateListener(i)}}}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){Ji(this.Dc),this.reset()},t.prototype.stop=function(){Gi(this.Dc)},t.prototype.reset=function(){this.Mc=vn.documentHeight();var t=_s.getScrollContainer();if(null===t)this._c=this.Pc(vn.documentHeight());else{var i=this.Uc(t);this._c=this.jc(t,i)}this.cn()},t.prototype.maxScrollRateListener=function(t){var i,n;if(_s.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.Uc(r);i=this.qc(r,s),n=this.jc(r,s)}else i=vn.documentHeight(),n=this.Pc(i);(n>this._c||i>this.Mc)&&(this._c=n,i>this.Mc&&(this.Mc=i),this.cn())},t.prototype.Pc=function(t){var i=Math.round(this.Fc()/t*100);return Math.min(i,this.Cc)},t.prototype.Fc=function(){var t=vn.windowHeight();return vn.windowOffsetY()+t},t.prototype.jc=function(t,i){var n=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+i,r=this.qc(t,i),s=Math.round(n/r*100);return Math.min(s,this.Cc)},t.prototype.Uc=function(t){var i=window.getComputedStyle(t).paddingTop||"0px";return parseInt(i,10)},t.prototype.qc=function(t,i){return t.scrollHeight+t.getBoundingClientRect().top+i},t.prototype.getRequestParameters=function(){return{sr:"".concat(this._c),mdh:"".concat(this.Mc)}},lt([X("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),$s=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m){this.P=t,this.Hc=i,this.Zu=n,this.Vc=r,this.zc=s,this.Jc=e,this.Gc=u,this.Wc=h,this.Bc=o,this.kn=c,this.Y=f,this.yr=a,this.Kc=v,this.Yc=l,this.Xc=d,this.$c=w,this.Zc=y,this.Qc=p,this.tf=m,this.Hn=new gn}return t.prototype.init=function(){var t,i,n,r,s=this;this.Hc.onEvent((function(t){return s.Wn(t)})),this.Zu.onEvent((function(t){return s.Wn(t)})),this.Vc.onEvent((function(){s.Jc.setRequestParametersFromProvider(s.Vc)})),this.Yc.onEvent((function(t){return s.if(t)})),this.Xc.onEvent((function(){var t,i;null===(t=s.Zc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(i=s.tf)||void 0===i||i.flushPendingTextHighlightEvent(),s.Jc.isEmpty()||s.Wc.send()})),null===(t=this.$c)||void 0===t||t.onEvent((function(t){return s.Wn(t)})),null===(i=this.Qc)||void 0===i||i.onEvent((function(t){return s.Wn(t)})),null===(n=this.Zc)||void 0===n||n.onEvent((function(t){return s.Wn(t)})),null===(r=this.tf)||void 0===r||r.onEvent((function(t){return s.Wn(t)})),this.nf()},t.prototype.nf=function(){var t=this;this.Gc.setRequestParametersProviders(this.Jc),this.Gc.before((function(){t.Jc.setRequestParametersFromProvider(t.zc),t.Jc.enableCompression()})),this.Gc.after((function(){t.Jc.setRequestParametersFromProvider(t.Bc)})),this.Gc.setRequestPayloadProvider(this.Jc),this.Gc.afterProvidersCalled((function(){return t.Jc.clearEvents()})),this.Wc.setRequestParametersProviders(this.Jc),this.Wc.setRequestPayloadProvider(this.Jc),this.Wc.before((function(){t.Jc.setRequestParametersFromProvider(t.zc),t.Jc.disableCompression()})),this.Wc.onBeaconSuccess((function(){t.Jc.clearEvents(),t.Jc.setRequestParametersFromProvider(t.Bc)})),this.Wc.onBeaconFailure((function(){t.rf()}))},t.prototype.initStates=function(){this.Jc.setRequestParametersFromProvider(this.Bc),this.sf()},t.prototype.start=function(t){var i,n,r,s;this.Xc.start(),this.Hc.start(),this.Vc.start(),this.Zu.start(),null===(i=this.$c)||void 0===i||i.start(),null===(n=this.tf)||void 0===n||n.start(),null===(r=this.Qc)||void 0===r||r.start(),t||this.Yc.start(),null===(s=this.Zc)||void 0===s||s.start()},t.prototype.collectInitialEvents=function(){var t,i;null===(t=this.Qc)||void 0===t||t.collectInitialEvent(),null===(i=this.$c)||void 0===i||i.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Zn(t)},t.prototype.if=function(t){this.Y.hasValidSession()&&this.Zn(t)},t.prototype.Wn=function(t){this.kn.isSessionValid()&&this.Zn(t)},t.prototype.Zn=function(t){this.Jc.addEvent(this.ef(t)),this.Jc.isFull()&&this.sendEvents(),this.P.emitDebugEvents&&this.Hn.emit("analysisEvent",vt(vt({},t),{typeName:Kr[t.type]}))},t.prototype.ef=function(t){return t.ts=this.uf(),t},t.prototype.sendEvents=function(){this.Jc.isEmpty()||this.Gc.send()},t.prototype.stop=function(){var t,i,n,r;this.Xc.stop(),this.Hc.stop(),this.Vc.stop(),this.Zu.stop(),this.Yc.stop(),null===(t=this.$c)||void 0===t||t.stop(),null===(i=this.Qc)||void 0===i||i.stop(),null===(n=this.Zc)||void 0===n||n.stop(),null===(r=this.tf)||void 0===r||r.stop(),this.Jc.empty()},t.prototype.clearStates=function(){var t,i;this.Hc.flushPendingDebouncedListeners(),null===(t=this.Zc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(i=this.tf)||void 0===i||i.flushPendingTextHighlightEvent(),this.sendEvents(),this.Vc.reset(),this.Yc.stop()},t.prototype.sf=function(){this.hf=Lt()},t.prototype.uf=function(){return Lt()-this.hf},t.prototype.rf=function(){try{this.Jc.isEmpty()||this.yr.save({events:this.Jc.getEvents(),metadata:this.Jc.getMetadata()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,i){if(function(t){return t===Yr.SUCCESS||t===Yr.FAILURE||t===Yr.ATTEMPT}(t))if(K(i)){var n={status:t,type:Kr.SUBMIT,ts:0,tgt:this.Kc.getElementPath(i)};n.tgt!==ht.INVALID_ELEMENT&&this.if(n)}else Y.warn("AnalysisEvents Service: invalid element: ".concat(i));else Y.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Zs=function(){function t(t){var i=t.events,n=void 0===i?[]:i,r=t.requestParameters,s=void 0===r?{}:r,e=t.stringCompression;this.cf=!0,this.ln=[],this.dn={},this.ln=n,this.dn=s,this.ff=e}return t.prototype.getRequestPayload=function(){return this.af()?this.ff.compressSync(csJSON.stringify(this.ln)):csJSON.stringify(this.ln)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.ln,t)},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.dn[n]=i[n])},t.prototype.eventsCount=function(){return this.ln.length},t.prototype.clearEvents=function(){this.ln=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.ln.length},t.prototype.getEvents=function(){return this.ln},t.prototype.getMetadata=function(){return this.dn},t.prototype.getRequestParameters=function(){return vt(vt({},this.dn),{ct:this.af()?this.ff.algorithm:ki.UNCOMPRESSED})},t.prototype.enableCompression=function(){this.cf=!0},t.prototype.disableCompression=function(){this.cf=!1},t.prototype.af=function(){return this.cf},t}(),Qs=function(){function t(t,i,n){var r=this;this.vf=t,this.yr=i,this.ff=n,this.lf=function(){"visible"===document.visibilityState&&r.df()}}return t.prototype.start=function(){this.df(),this.wf()},t.prototype.stop=function(){this.yf()},t.prototype.getRecoveryStorage=function(){return this.yr},t.prototype.df=function(){var t=this.yr.recover();if(null!==t){var i=t,n=i.metadata,r=i.events,s=new Zs({events:r,requestParameters:n,stringCompression:this.ff});this.vf.setRequestParametersProviders(s),this.vf.before((function(){s.enableCompression()})),this.vf.setRequestPayloadProvider(s),this.vf.afterProvidersCalled((function(){return s.clearEvents()})),this.vf.send()}},t.prototype.wf=function(){document.addEventListener("visibilitychange",this.lf)},t.prototype.yf=function(){document.removeEventListener("visibilitychange",this.lf)},t}(),te=function(){function t(t){this.cs=t}return t.prototype.save=function(t){localStorage.setItem(this.cs,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.cs)},t.prototype.recover=function(){var t=localStorage.getItem(this.cs);if(null===t)return null;var i=null;try{i=csJSON.parse(t)}catch(i){Y.error("Invalid item in localStorage.\n         (key:".concat(this.cs,"; value:").concat(t,")"))}finally{this.clear()}return i},t}(),ie=function(){function t(t){var i=this;this.pf=t,this.mf=function(t){return i.processMetric(t)},this.Ye=!1}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){this.Ye||(this.Ye=!0,this.pf.onFCP(this.mf),this.pf.onCLS(this.mf),this.pf.onFID(this.mf),this.pf.onLCP(this.mf),this.pf.onTTFB(this.mf))},t.prototype.stop=function(){this.Ye=!1},t.prototype.processMetric=function(t){if(this.Ye){var i={type:Kr.PERFORMANCE,name:t.name,val:t.value,ts:0};this.cn(i)}},lt([X("Performance metric handler")],t.prototype,"processMetric",null),t}(),ne=function(t,i){return{name:t,value:void 0===i?-1:i,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},re=function(t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(i)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},se=function(t,i){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),i&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},ee=function(t){addEventListener("pageshow",(function(i){i.persisted&&t(i)}),!0)},ue=function(t,i,n){var r;return function(s){i.value>=0&&(s||n)&&(i.delta=i.value-(r||0),(i.delta||void 0===r)&&(r=i.value,t(i)))}},he=-1,oe=function(){return"hidden"===document.visibilityState?0:1/0},ce=function(){se((function(t){var i=t.timeStamp;he=i}),!0)},fe=function(){return he<0&&(he=oe(),ce(),ee((function(){setTimeout((function(){he=oe(),ce()}),0)}))),{get firstHiddenTime(){return he}}},ae=function(t,i){var n,r=fe(),s=ne("FCP"),e=function(t){"first-contentful-paint"===t.name&&(h&&h.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=t.startTime,s.entries.push(t),n(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],h=u?null:re("paint",e);(u||h)&&(n=ue(t,s,i),u&&e(u),ee((function(r){s=ne("FCP"),n=ue(t,s,i),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,n(!0)}))}))})))},ve=!1,le=-1,de={passive:!0,capture:!0},we=new Date,ye=function(t,i){Hs||(Hs=i,Vs=t,zs=new Date,ge(removeEventListener),pe())},pe=function(){if(Vs>=0&&Vs<zs-we){var t={entryType:"first-input",name:Hs.type,target:Hs.target,cancelable:Hs.cancelable,startTime:Hs.timeStamp,processingStart:Hs.timeStamp+Vs};Js.forEach((function(i){i(t)})),Js=[]}},me=function(t){if(t.cancelable){var i=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,i){var n=function(){ye(t,i),s()},r=function(){s()},s=function(){removeEventListener("pointerup",n,de),removeEventListener("pointercancel",r,de)};addEventListener("pointerup",n,de),addEventListener("pointercancel",r,de)}(i,t):ye(i,t)}},ge=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(i){return t(i,me,de)}))},Ae={},Ee=function(){function t(){}return t.prototype.onFCP=function(t){ae(t,!0)},t.prototype.onCLS=function(t){!function(t,i){ve||(ae((function(t){le=t.value})),ve=!0);var n,r=function(i){le>-1&&t(i)},s=ne("CLS",0),e=0,u=[],h=function(t){if(!t.hadRecentInput){var i=u[0],r=u[u.length-1];e&&t.startTime-r.startTime<1e3&&t.startTime-i.startTime<5e3?(e+=t.value,u.push(t)):(e=t.value,u=[t]),e>s.value&&(s.value=e,s.entries=u,n())}},o=re("layout-shift",h);o&&(n=ue(r,s,i),se((function(){o.takeRecords().map(h),n(!0)})),ee((function(){e=0,le=-1,s=ne("CLS",0),n=ue(r,s,i)})))}(t,!0)},t.prototype.onFID=function(t){!function(t,i){var n,r=fe(),s=ne("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),n(!0))},u=re("first-input",e);n=ue(t,s,i),u&&se((function(){u.takeRecords().map(e),u.disconnect()}),!0),u&&ee((function(){var r;s=ne("FID"),n=ue(t,s,i),Js=[],Vs=-1,Hs=null,ge(addEventListener),r=e,Js.push(r),pe()}))}(t,!0)},t.prototype.onLCP=function(t){!function(t,i){var n,r=fe(),s=ne("LCP"),e=function(t){var i=t.startTime;i<r.firstHiddenTime&&(s.value=i,s.entries.push(t),n())},u=re("largest-contentful-paint",e);if(u){n=ue(t,s,i);var h=function(){Ae[s.id]||(u.takeRecords().map(e),u.disconnect(),Ae[s.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,h,{once:!0,capture:!0})})),se(h,!0),ee((function(r){s=ne("LCP"),n=ue(t,s,i),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,Ae[s.id]=!0,n(!0)}))}))}))}}(t,!0)},t.prototype.onTTFB=function(t){!function(t){var i,n=ne("TTFB");i=function(){try{var i=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,i={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(i[n]=Math.max(t[n]-t.navigationStart,0));return i}();if(n.value=n.delta=i.responseStart,n.value<0||n.value>performance.now())return;n.entries=[i],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(i,0):addEventListener("load",(function(){return setTimeout(i,0)}))}(t)},t}(),Se=function(){function t(){var t=this;this.Ye=!1,this.gf=function(i){try{if(("pagehide"===i.type||"visibilitychange"===i.type)&&"hidden"!==document.visibilityState)return;t.Af()}catch(t){}}}return t.prototype.start=function(){this.Ye||(this.Ye=!0,this.wf(),this.Ef(),this.Sf())},t.prototype.stop=function(){this.Ye&&(this.Ye=!1,this.yf(),this.bf(),this.Nf())},t.prototype.onEvent=function(t){this.Af=t},t.prototype.wf=function(){document.addEventListener("visibilitychange",this.gf)},t.prototype.yf=function(){document.removeEventListener("visibilitychange",this.gf)},t.prototype.Ef=function(){window.addEventListener("pagehide",this.gf)},t.prototype.bf=function(){window.removeEventListener("pagehide",this.gf)},t.prototype.Sf=function(){window.addEventListener("blur",this.gf)},t.prototype.Nf=function(){window.removeEventListener("blur",this.gf)},t}(),be=function(){function t(){var t=this;this.Ac=500,this.Tf=500,this.Rf=Ar((function(i,n){return t.onResize(n)}),this.Ac),this.Of=null,this.kf=!0}return t.prototype.start=function(){var i=this;this.Of||(this.If=t.scheduleStart((function(){i.run()}),this.Tf))},t.prototype.stop=function(){this.Of&&(Gi(this.Of),this.Of=null),this.If()},t.scheduleStart=function(t,i){var n=0,r=null,s=function(){n=window.setTimeout((function(){n=0,t()}),i)};return"visible"===document.visibilityState?s():Ji(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),Gi(r),r=null)}}),function(){n>0&&(window.clearTimeout(n),n=0),null!==r&&(Gi(r),r=null)}},t.prototype.onEvent=function(t){this.cn=t},t.prototype.run=function(){var i,n=this;0!==window.outerWidth&&(this.xf=this.Lf=t.Cf(),this._f=window.devicePixelRatio,this.Mf=this._f,this.Df=window.outerWidth,this.Pf=window.innerWidth,this.Uf=window.innerHeight,this.jf=(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1,this.Of={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return n.Rf(t)}},Ji(this.Of),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.Of){var i={type:Kr.ZOOM,ts:0,val:t.qf(this.Lf)};if(this.cn(i),window.visualViewport){var n={type:Kr.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.cn(n)}}},t.prototype.onResize=function(t){var i,n=(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1;this.Ff(n),window.visualViewport&&this.Hf(n),this.Df=window.outerWidth,this.Pf=window.innerWidth,this.Uf=window.innerHeight,this.jf=n},t.prototype.Ff=function(i){var n;window.devicePixelRatio!==this.Mf?(n=window.devicePixelRatio/this._f*this.xf,this.Mf=window.devicePixelRatio,this.kf=!1):this.Df===window.outerWidth&&this.Uf!==window.innerHeight&&this.Pf!==window.innerWidth&&this.jf===i&&this.kf&&(n=window.outerWidth/window.innerWidth/i);if(void 0!==n){this.Lf=n;var r={type:Kr.ZOOM,ts:0,val:t.qf(n)};this.cn(r)}},t.prototype.Hf=function(t){if(t!==this.jf){var i={type:Kr.VIEWPORT_SCALE,ts:0,val:t};this.cn(i)}},t.Cf=function(){return t.Vf()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.Vf=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.qf=function(t){return 100*t<<0},lt([X("ZoomTracker.run")],t.prototype,"run",null),lt([X("ZoomTracker.onResize")],t.prototype,"onResize",null),lt([X("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}();!function(t){t[t.MUTATION=0]="MUTATION",t[t.WINDOW_PROPERTY=1]="WINDOW_PROPERTY"}(Gs||(Gs={})),function(t){t[t.COLOR_ENHANCER=0]="COLOR_ENHANCER",t[t.OTHER=1]="OTHER"}(Ws||(Ws={}));var Ne,Te=function(){function t(t){this.zf=t,this.Jf=500}return t.prototype.start=function(){var i=this;this.If=t.Gf((function(){i.initialDetection()}),this.Jf)},t.prototype.stop=function(){var t;null===(t=this.Xi)||void 0===t||t.disconnect(),this.Xi=null,this.If()},t.prototype.onEvent=function(t){this.cn=t},t.prototype.initialDetection=function(){var i=this;this.Wf=[],this.Bf=[],csArray.prototype.forEach.call(this.zf,(function(n){for(var r=n.id,s=!1,e={id:r,attributesBasedDetectors:{},childListBasedDetectors:{}},u=0,h=n.detectors;u<h.length;u++){var o=h[u],c=o.type;switch(c){case Gs.MUTATION:(s=!!document.querySelector(o.selector))||t.Kf(e,o);break;case Gs.WINDOW_PROPERTY:s=o.property in window;break;default:}if(s){csArray.prototype.push.call(i.Bf,r);break}}s||csArray.prototype.push.call(i.Wf,e)})),this.ve(),this.collectInitialEvent()},t.prototype.collectInitialEvent=function(){this.Bf.length>0&&this.Yf(this.Bf)},t.prototype.Yf=function(t){var i={type:Kr.EXTENSION,ts:0,ids:yt([],t,!0)};this.cn(i)},t.prototype.ve=function(){var t=this;0!==this.Wf.length&&(this.Xi=new csMutationObserver((function(i){return t.handleMutations(i)})),this.Xi.observe(document.documentElement,{childList:!1,attributes:!0}),this.Xi.observe(document.head,{childList:!0,attributes:!1}),this.Xi.observe(document.body,{childList:!0,attributes:!0}))},t.prototype.handleMutations=function(t){var i,n=this,r=[];csArray.prototype.forEach.call(t,(function(t){"childList"===t.type?n.handleChildListMutation(t,r):"attributes"===t.type&&n.handleAttributesMutation(t,r)})),r.length>0&&((i=csArray.prototype.push).call.apply(i,yt([this.Bf],r,!1)),this.Yf(r)),0===this.Wf.length&&this.stop()},t.prototype.handleChildListMutation=function(i,n){var r=this;if(0!==i.addedNodes.length){var s=i.target;cn(i.addedNodes,(function(i){if(y(i))for(var e=0;e<=r.Wf.length;e++){var u=r.Wf[e];if(t.Xf(u,s.localName))if(null==u.childListBasedDetectors[s.localName]?void 0:csArray.prototype.some.call(u.childListBasedDetectors[s.localName],(function(t){return i.matches(t.selector)}))){csArray.prototype.push.call(n,u.id),csArray.prototype.splice.call(r.Wf,e,1);break}}}))}},t.prototype.handleAttributesMutation=function(i,n){for(var r=i.target,s=0;s<=this.Wf.length;s++){var e=this.Wf[s];if(t.$f(e,r.localName))if(null==e.attributesBasedDetectors[r.localName]?void 0:csArray.prototype.some.call(e.attributesBasedDetectors[r.localName],(function(t){return r.matches(t.selector)}))){csArray.prototype.push.call(n,e.id),csArray.prototype.splice.call(this.Wf,s,1);break}}},t.Xf=function(t,i){return i in t.childListBasedDetectors},t.$f=function(t,i){return i in t.attributesBasedDetectors},t.Kf=function(t,i){var n=t.attributesBasedDetectors;"childList"===i.mutationType&&(n=t.childListBasedDetectors),i.target in n?csArray.prototype.push.call(n[i.target],i):n[i.target]=[i]},t.Gf=function(t,i){var n,r=0,s=function(){r=0,t()};return window.requestIdleCallback?(r=window.requestIdleCallback(s,{timeout:i}),n=window.cancelIdleCallback):(r=window.setTimeout(s,i),n=window.clearTimeout),function(){r>0&&(n.call(window,r),r=0)}},t.isSupported=function(){return/Chrome/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)},lt([X("ExtensionsTracker.initialDetection")],t.prototype,"initialDetection",null),lt([X("ExtensionsTracker.handleMutations")],t.prototype,"handleMutations",null),lt([X("ExtensionsTracker.handleChildListMutation")],t.prototype,"handleChildListMutation",null),lt([X("ExtensionsTracker.handleAttributesMutation")],t.prototype,"handleAttributesMutation",null),t}(),Re=[{id:Ws.COLOR_ENHANCER,detectors:[{type:Gs.MUTATION,target:"html",selector:"html[data-darkreader-mode]",mutationType:"attributes"},{type:Gs.MUTATION,target:"body",selector:"#hc_extension_svg_filters",mutationType:"childList"},{type:Gs.MUTATION,target:"body",selector:"#cvd_extension_svg_filter",mutationType:"childList"},{type:Gs.MUTATION,target:"html",selector:"html[class~=ss-shaded-scrollbars]",mutationType:"attributes"}]},{id:Ws.OTHER,detectors:[{type:Gs.MUTATION,target:"body",selector:"th-rw4gc",mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="cdnapgfjopgaggbmfgbiinmmbdcglnam"]',mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="dgmanlpmmkibanfdgjocnabmcaclkmod"]',mutationType:"childList"},{type:Gs.WINDOW_PROPERTY,property:"cvox"},{type:Gs.MUTATION,target:"body",selector:"#highlighter[style*=box-shadow]",mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="ddnpdohiipephjpdpohikkamhdikbldp"]',mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="emgfmfgandmhbgleikkoaebngboghfpe"]',mutationType:"childList"}]}],Oe=function(){function t(){this.Zf=0,this.Qf=0,this.ta=0,this.ia=0,this.na=0}return t.prototype.incrementFocusWithKeyboard=function(){this.Zf+=1},t.prototype.incrementFocusWithMouse=function(){this.Qf+=1},t.prototype.incrementClickWithKeyboard=function(){this.ta+=1},t.prototype.incrementClickWithMouse=function(){this.ia+=1},t.prototype.incrementScrollWithKeyboard=function(){this.na+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.Zf,mouseCounter:this.Qf},click:{keyboardCounter:this.ta,mouseCounter:this.ia},scroll:{keyboardCounter:this.na}}},t.prototype.reset=function(){this.Zf=0,this.Qf=0,this.ta=0,this.ia=0,this.na=0},t}(),ke=function(){function t(){var t=this;this.ra=en((function(){return t.sa()}),5e3),this.bc=Ar((function(i,n){return t.scrollListener()}),150),this.Zf=!1,this.ta=!1,this.na=!1,this.ea=[{boundElement:document,type:"click",listener:function(i){return t.clickListener(i)}},{boundElement:document,type:"focus",listener:function(i){return t.focusListener(i)}},{boundElement:document,type:"keydown",listener:function(i){return t.keyDownListener(i)}},{boundElement:document,type:"mousedown",listener:function(){return t.ua()}},{boundElement:document,type:"mouseover",listener:function(i){return t.mouseOverListener(i)}},{boundElement:document,type:"scroll",listener:function(){return t.bc()}},{boundElement:document,type:"wheel",listener:function(){return t.ha()}}],this.oa=new Oe}return t.prototype.start=function(){csArray.prototype.forEach.call(this.ea,(function(t){return Ji(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.ea,(function(t){return Gi(t)}))},t.prototype.onEvent=function(t){this.cn=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.bc.flushPending(),this.ra.flushPending()},t.prototype.clickListener=function(t){var i=rn(t);K(i)&&dn.isElementFocusable(i)&&(this.ta?(this.oa.incrementClickWithKeyboard(),this.ta=!1):this.oa.incrementClickWithMouse(),this.ra())},t.prototype.focusListener=function(t){var i=rn(t);this.Zf&&K(i)&&dn.isElementFocusable(i)&&(this.oa.incrementFocusWithKeyboard(),this.ra(),this.Zf=!1)},t.prototype.keyDownListener=function(t){this.Zf||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.Zf=!0),this.ta||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.ta=!0),this.na||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.na=!0)},t.prototype.ua=function(){this.Zf=!1,this.ta=!1},t.prototype.mouseOverListener=function(t){var i=rn(t);K(i)&&dn.isElementFocusable(i)&&(this.oa.incrementFocusWithMouse(),this.ra())},t.prototype.scrollListener=function(){this.na&&(this.oa.incrementScrollWithKeyboard(),this.ra(),this.na=!1)},t.prototype.ha=function(){this.na=!1},t.prototype.sa=function(){var t={type:Kr.KEYBOARD_NAVIGATION,ts:0,val:this.oa.buildKeyboardNavigationCounters()};this.cn(t),this.oa.reset()},lt([X("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),lt([X("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),lt([X("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),lt([X("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),lt([X("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Ie=function(){function t(){var t=this;this.ca=null,this.fa=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.fa,(function(t){return Ji(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.fa,(function(t){return Gi(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.ca&&this.aa(this.ca)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.ca){var i=this.ca,n=i.anchorNode,r=i.anchorOffset;if(n===t.anchorNode&&r===t.anchorOffset){if(p(t.anchorNode)){var s=t.toString().length;s>this.ca.length&&(this.ca.length=s)}}else this.aa(this.ca)}else t.anchorNode&&p(t.anchorNode)&&0!==t.toString().length&&(this.ca={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.ca&&this.va()},t.prototype.aa=function(t){var i={type:Kr.TEXT_HIGHLIGHT,ts:0,len:t.length};this.cn(i),this.va()},t.prototype.va=function(){this.ca=null},lt([X("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),lt([X("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),xe="v2/events",Le=["submit"],Ce=function(){function t(t,i,n,r,s,e,u,h,o,c){this.P=t,this.K=i,this.Y=n,this.Kc=r,this.yi=s,this.lo=e,this.kn=u,this.Zu=h,this.Ho=o,this.ff=c}return t.prototype.init=function(){var t=this,i=new Zs({stringCompression:this.ff});this.da=this.wa(),this.ya=this.pa(i,this.da.getRecoveryStorage()),this.ya.init(),this.Ho.addListeners(this.ya),this.lo.register(Le,(function(i,n){t.ya.pushSubmitEvent(i,n)}))},t.prototype.onStartTracking=function(t){this.da.start(),this.ya.start(t)},t.prototype.onAfterNaturalPageView=function(){this.ya.initStates()},t.prototype.onAfterArtificialPageView=function(){this.ya.initStates(),this.ya.collectInitialEvents()},t.prototype.onBeforeArtificialPageView=function(){this.ya.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.ya.clearStates(),this.ya.stop(),this.da.stop()},t.prototype.onOptout=function(){this.ya.stop(),this.da.stop()},t.prototype.pa=function(t,n){var r,s,e,u,h=new Ls(window),o=new Xs,c=new Ys(this.P,this.Kc,this.yi),f=new js(this.P,this.Kc,this.Zu),a=new ie(new Ee),v=new Se;this.P.accessibilityEnabled&&(r=new be,s=new ke,e=new Ie,Te.isSupported()&&(u=new Te(Re)));var l=new Hi(this.P.getTrackerUri(),xe),d=new Or(this.P.getTrackerUri(),xe),w=new zn(this.P,this.K,this.Y,o,h,i);return new $s(this.P,c,f,o,h,t,l,d,w,this.kn,this.Y,n,this.Kc,a,v,r,s,u,e)},t.prototype.wa=function(){var t=new Hi(this.P.getTrackerUri(),xe);return new Qs(t,new te("csAnalysisEventsPersisted"),this.ff)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ne||(Ne={}));var _e=function(){function t(){this.ma=Ne.Natural}return t.prototype.setPageViewType=function(t){this.ma=t},t.prototype.getRequestParameters=function(){return{pvt:this.ma}},t}(),Me=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Zi=i,e.ga=n,e.X=r,e.Aa=s,e}return at(i,t),i.prototype.init=function(){this.Ea()},i.prototype.onStart=function(t){t?this.Sa():this.ba()},i.prototype.onStop=function(){},i.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Na(t):this.X.overridePath(t)},i.prototype.ba=function(){this.Aa.setPageViewType(Ne.Natural),this.Zi.emitBeforeNaturalPageView(),this.ga.send(),this.Zi.emitAfterNaturalPageView()},i.prototype.Sa=function(){this.Aa.setPageViewType(Ne.Renewal),this.Zi.emitBeforeNaturalPageView(),this.ga.send(),this.Zi.emitAfterNaturalPageView()},i.prototype.Na=function(t){this.Aa.setPageViewType(Ne.Artificial),this.Zi.emitArtificialPageViewEnd(),t&&this.X.overridePath(t),this.Zi.emitBeforeArtificialPageView(),this.ga.send(),this.Zi.emitAfterArtificialPageView()},i.prototype.Ea=function(){var t=this;window.addEventListener("pageshow",(function(i){t.isStarted&&i.persisted&&t.Na()}))},i}(An),De=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Pe(){return{la:De}}var Ue,je=function(){function t(t){this.Ta=t,this.Ra=[],this.Oa=!1}return t.prototype.getRequestParameters=function(){return{dr:this.ka()}},t.prototype.addUrlMaskingPattern=function(t){var i=this.Ta.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ra,i)},t.prototype.enableRemoveQueryString=function(){this.Oa=!0},t.prototype.disableRemoveQueryString=function(){this.Oa=!1},t.prototype.ka=function(){var t=this.Oa?this.Ta.removeQueryString(this.Ia()):this.Ia();return this.Ta.anonymizeUrl(t,this.Ra)},t.prototype.Ia=function(){var t="";try{t=window.top.document.referrer}catch(i){if(window.parent)try{t=window.parent.document.referrer}catch(i){t=""}}return""===t&&(t=document.referrer),t},t}(),qe=function(){function t(t){this.Y=t,this.xa=this.La()&&"currentScript"in document}return t.prototype.Ca=function(){var t=document.currentScript;if(!t)return null;var i=window.performance.getEntriesByName(t.src,"resource")[0];return!i||this._a(i)?null:Math.round(i.responseEnd-i.fetchStart)},t.prototype._a=function(t){var i=t.transferSize;return void 0!==i?0===i||i<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.xa||1!==this.xo())return{};var t=this.Ca();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.xo=function(){var t;return(null===(t=this.Y.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.La=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Fe=["trackPageview"],He=["setPath"],Ve=["setQuery"],ze=["referrer:maskUrl"],Je=["referrer:removeQueryString"],Ge=["referrer:keepQueryString"],We=function(){function t(t,i,n,r,s,e,u,h,o,c){this.P=t,this.lo=i,this.Zi=n,this.K=r,this.Y=s,this.fo=e,this.Nt=u,this.Ta=h,this.X=o,this.yo=c}return t.prototype.init=function(){var t=this,r=new Et(this.P.getTrackerUri(),"pageview"),s=new _e;this.Ma=new Me(this.Zi,r,this.X,s);var e=new je(this.Ta);this.Ma.init(),r.setRequestParametersProviders(this.P,this.K,this.Y,vn,e,this.X,this.fo,n,this.Nt,i,s,new qe(this.Y),this.yo),this.lo.register(Fe,(function(i){return t.Ma.triggerArtificialPageView(i)})),this.lo.register(He,(function(i){return t.X.overridePath(i)})),this.lo.register(Ve,(function(i){return t.X.overrideQuery(i)})),this.lo.register(ze,(function(t){return e.addUrlMaskingPattern(t)})),this.lo.register(Je,(function(){return e.enableRemoveQueryString()})),this.lo.register(Ge,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Ma.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Ma.stop()},t}(),Be=function(){function t(t){this.hc=t}return t.prototype.on=function(t,i){var n=this;return function(r){n.hc.hasValidEventTarget(r)&&n.Da(r,t)&&i(r)}},t.prototype.Da=function(t,i){var n=rn(t);return $.call(n,i)},t.prototype.isMatchesSelectorSupported=function(){return!!$},t}(),Ke=function(){function t(){}return t.prototype.onLoad=function(t){this.ai=t},t.prototype.onLoadCallbackExecute=function(){this.ai()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Pa(t)},t.prototype.Pa=function(t){function i(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i))},lt([X("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Ye=["clearSession"],Xe=["extendSession"],$e=function(){function t(t,i,n){this.K=t,this.Y=i,this.lo=n}return t.prototype.init=function(){var t=this;this.lo.register(Ye,(function(){return t.Y.removeSession()})),this.lo.register(Xe,(function(){return t.Y.extendSessionPeriodically()}))},t.prototype.onBeforeNaturalPageView=function(){this.K.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.Y.abortQuotaServiceRequest(),this.K.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onOptout=function(){this.K.removeVisitor(),this.Y.removeSession()},t.prototype.onRecordingStateChange=function(t,i){this.Y.updateRecordingState(t,i)},t}(),Ze=function(){function t(t,i){this.Y=t,this.K=i,this.Ua=!1}return t.prototype.onSessionExpired=function(t){this.ja=t},t.prototype.isSessionValid=function(){if(this.Ua)return!0;var t=this.Y.hasValidSession(),i=!1;return this.Y.pollCacheRefreshEvent()&&(i=this.K.isSessionRenewed()),t&&!i||!this.qa()?t:(this.Fa=Lt(),this.Ua=!0,this.ja(),this.Ua=!1,this.Y.hasValidSession())},t.prototype.qa=function(){return!G(this.Fa)||Lt()-this.Fa>6e4},t}(),Qe=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.X=i,h.Ha=n,h.Xc=r,h.Va=s,h.za=e,h.Ja=u,h}return at(i,t),i.prototype.init=function(){this.Va.init(),this.Ga(),this.Wa(),this.Ba()},i.prototype.collectInitialProducts=function(){var t=this.Ha.collectProductsAndAnchors(),i=t.products,n=t.anchors;this.Ka(n),this.Va.send(this.Ya(i))},i.prototype.Ka=function(t){var i=this;csArray.prototype.forEach.call(t,(function(t){i.Ja.track(t)}))},i.prototype.onIframeEmerchandisingMessage=function(t){this.Va.send(t)},i.prototype.clearState=function(){this.Ja.clearState(),this.Ha.flushEvents(),this.za.isEmpty()||this.Xa(!1)},i.prototype.initStates=function(){this.Va.initStates()},i.prototype.onStart=function(){this.Xc.start(),this.Ha.start(),this.Ja.start()},i.prototype.onStop=function(){this.Xc.stop(),this.Ha.stop(),this.Ja.stop()},i.prototype.Ba=function(){var t=this;this.Ja.init(),this.Ja.onProductExposed((function(i){t.za.addProductExposure(i),t.za.isFull()&&t.Xa(!1)}))},i.prototype.Ya=function(t,i){void 0===i&&(i=[]);var n={products:t,targetUrl:this.X.getAnonymizedUrl(),windowWidth:vn.windowWidth(),windowHeight:vn.windowHeight()};return i.length>0&&(n.exposures=i),n},i.prototype.Ga=function(){var t=this;this.Ha.init(),this.Ha.onProductsDetection((function(i){var n=i.products,r=i.anchors;t.za.addProducts(n),t.za.isFull()&&t.Xa(!1),t.Ka(r)}))},i.prototype.Wa=function(){var t=this;this.Xc.onEvent((function(){t.Ja.clearState(),t.$a()}))},i.prototype.$a=function(){this.za.isEmpty()||this.Xa(!0)},i.prototype.Xa=function(t){var i=this.Ya(this.za.getProducts(),this.za.getProductsExposure());t?this.Va.sendBeacon(i):this.Va.send(i)},i}(An),tu=function(){function t(t,i){this.configuration=t,this.projectPathComputation=i}return t.prototype.collectProductsAndAnchors=function(t){void 0===t&&(t=document);for(var i=[],n=this.getAllValidAnchors(this.configuration.hostnames,t),r=0,s=n;r<s.length;r++){var e=s[r];csArray.prototype.push.call(i,this.buildProductFromAnchor(e))}return{products:i,anchors:n}},t.prototype.getAllValidAnchors=function(t,i){var n=this;return void 0===i&&(i=document),csArray.prototype.filter.call(dn.findAllElements("a",i),(function(i){return n.isAnchorValid(i,t)}))},t.prototype.isAnchorValid=function(t,i){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Vt(t.hostname,i)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},lt([nn("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),iu=function(t){function i(i,n,r){var s=t.call(this,i,n)||this;return s.Xi=r,s.Za={subtree:!0,childList:!0},s}return at(i,t),i.prototype.init=function(){this.ve()},i.prototype.start=function(){this.Xi.start(),this.Qa()},i.prototype.stop=function(){this.Xi.stop()},i.prototype.flushEvents=function(){this.Xi.flushPendingMutations()},i.prototype.onProductsDetection=function(t){this.tv=t},i.prototype.ve=function(){this.Xi.init(),this.iv()},i.prototype.iv=function(){var t=this;this.Xi.onChildListMutation((function(i){return t.nv(i)})),this.Xi.onAttachShadowMutation((function(i){return t.rv(i)}))},i.prototype.nv=function(t){for(var i=0;i<t.addedNodes.length;i+=1){var n=t.addedNodes[i];if(m(n)&&this.isAnchorValid(n,this.configuration.hostnames)){var r=this.buildProductFromAnchor(n);this.sv({products:[r],anchors:[n]})}else if(K(n)){var s=this.collectProductsAndAnchors(n);this.sv(s)}}},i.prototype.rv=function(t){var i=t.shadowRoot;this.sv(this.collectProductsAndAnchors(i)),this.Xi.observe(i,this.Za)},i.prototype.sv=function(t){t.products.length>0&&this.tv(t)},i.prototype.Qa=function(){this.Xi.observe(document,this.Za),this.ev(document)},i.prototype.ev=function(t){var i=this,n=an.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){t.shadowRoot&&i.Xi.observe(t.shadowRoot,i.Za)}))},i}(tu),nu=function(){function t(i){void 0===i&&(i=t.uv),this.dn={},this.hv=[],this.ov=[],this.cv=new yn(i)}return t.prototype.addProducts=function(t){var i;this.cv.addString(csJSON.stringify(t)),(i=csArray.prototype.push).call.apply(i,yt([this.hv],t,!1))},t.prototype.addProductExposure=function(t){this.cv.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.ov,t)},t.prototype.reset=function(){this.cv.reset(),this.hv=[],this.ov=[]},t.prototype.isEmpty=function(){return 0===this.hv.length&&0===this.ov.length},t.prototype.isFull=function(){return this.cv.isThresholdReached()},t.prototype.getProducts=function(){return this.hv},t.prototype.getProductsExposure=function(){return this.ov},t.prototype.setRequestParametersFromProvider=function(t){var i=t.getRequestParameters();for(var n in i)i.hasOwnProperty(n)&&(this.dn[n]=i[n])},t.prototype.getRequestParameters=function(){return vt({},this.dn)},t.uv=10240,t}(),ru=function(){function t(){var t=this;this.Ye=!1,this.fv="function"==typeof window.IntersectionObserver,this.isGetRootNodeSupported="getRootNode"in Node.prototype,this.av=function(){"visible"===document.visibilityState?t.vv():t.lv()}}return t.prototype.init=function(){this.fv&&this.isGetRootNodeSupported&&(this.wv=new Map,this.yv=new Map,this.pv(),this.ve())},t.prototype.start=function(){!this.Ye&&this.fv&&this.isGetRootNodeSupported&&(document.addEventListener("visibilitychange",this.av),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(this.Je.disconnect(),this.Xi.disconnect(),this.wv.clear(),this.yv.clear(),this.Ye=!1,document.removeEventListener("visibilitychange",this.av))},t.prototype.vv=function(){var t=this;this.yv.forEach((function(i,n){t.Je.unobserve(n),t.Je.observe(n)}))},t.prototype.lv=function(){var t=this;this.yv.forEach((function(i,n){var r=!1;t.yv.get(n)!==r&&(t.yv.set(n,r),t.mv(n,r))}))},t.prototype.onEvent=function(t){this.gv=t},t.prototype.track=function(t){this.Ye&&(this.Je.observe(t),this.Av(t))},t.prototype.pv=function(){var i=this;this.Je=new IntersectionObserver((function(t){i.Ev(t)}),t.Sv)},t.prototype.ve=function(){var t=this;this.Xi=new csMutationObserver((function(i){csArray.prototype.forEach.call(i,(function(i){return t.Ge(i)}))}))},t.prototype.Av=function(i){var n=i.getRootNode();this.Xi.observe(n,t.bv),this.Nv(i,n)},t.prototype.Nv=function(t,i){var n=this.wv.get(i);n?n.add(t):this.wv.set(i,new Set([t]))},t.prototype.Ev=function(t){for(var i=0,n=t;i<n.length;i++){var r=n[i];this.processElementVisiblityFromIntersection(r.target,r.isIntersecting)}},t.prototype.Ge=function(t){var i=this,n=t.target.getRootNode(),r=this.wv.get(n);r&&r.forEach((function(t){i.Je.unobserve(t),i.Je.observe(t)}))},t.prototype.processElementVisiblityFromIntersection=function(t,i){var n="visible"===document.visibilityState,r=this.yv.get(t),s=n&&i&&dn.isVisibleInViewportInForeground(t);r!==s&&(this.yv.set(t,s),this.mv(t,s))},t.prototype.mv=function(t,i){this.gv({target:t,isVisible:i})},t.prototype.isSupported=function(){return this.fv&&this.isGetRootNodeSupported},t.Tv=["style","class","hidden"],t.bv={subtree:!0,childList:!0,attributes:!0,attributeFilter:t.Tv},t.Sv={root:null,rootMargin:"0px",threshold:1},lt([nn("processElementVisiblityFromIntersection")],t.prototype,"processElementVisiblityFromIntersection",null),t}(),su=function(t){function i(i,n){var r=t.call(this)||this;return r.P=i,r.ru=n,r.Rv=r.ru.isSupported(),r}return at(i,t),i.prototype.init=function(){this.Rv&&(this.Ov=new Map,this.kv())},i.prototype.onProductExposed=function(t){this.Iv=t},i.prototype.track=function(t){this.Rv&&this.ru.track(t)},i.prototype.clearState=function(){this.Rv&&this.isStarted&&this.xv()},i.prototype.onStart=function(){this.Rv&&this.ru.start()},i.prototype.onStop=function(){this.Rv&&(this.xv(),this.ru.stop())},i.prototype.kv=function(){var t=this;this.ru.init(),this.ru.onEvent((function(i){var n=i.target;i.isVisible?t.Lv(n):t.Cv(n)}))},i.prototype.xv=function(){var t=this;this.Ov.forEach((function(i,n){t.Cv(n)})),this.Ov.clear()},i.prototype.Lv=function(t){this.Ov.set(t,Lt())},i.prototype.Cv=function(t){var n=this.Ov.get(t);if(void 0!==n){var r=Lt()-n;this.Ov.delete(t),r<i.EXPOSURE_DURATION_THRESHOLD||this.Iv(this._v(t,r))}},i.prototype._v=function(t,i){var n=t.href;return{targetPath:ht.getElementPath(t,{dynamicIdRegex:this.P.dynamicIdRegex}),duration:i,href:n}},i.EXPOSURE_DURATION_THRESHOLD=150,i}(An),eu=function(){function t(t,i,n,r,s){this.Mv=t,this.Dv=i,this.za=n,this.oi=r,this.Pv=s}return t.prototype.init=function(){this.Uv(),this.jv()},t.prototype.initStates=function(){this.qv(!0)},t.prototype.send=function(t){this.Fv(t)},t.prototype.sendBeacon=function(t){this.Hv(t)},t.prototype.Uv=function(){var t=this,i=ar.isCompressionEnabled();i&&this.Vv(),this.Mv.afterProvidersCalled((function(){t.za.reset()})),this.Mv.setRequestParametersProviders(this.za),this.Mv.after((function(){t.qv(i)}))},t.prototype.qv=function(t){var i=this;this.za.setRequestParametersFromProvider(new zn(this.Pv,{getRequestParameters:function(){return{ct:t?i.oi.algorithm:ki.UNCOMPRESSED}}}))},t.prototype.jv=function(){var t=this;this.Dv.before((function(){t.qv(!1)})),this.Dv.setRequestParametersProviders(this.za),this.Dv.after((function(){t.za.reset(),t.qv(!0)}))},t.prototype.Fv=function(t){this.Mv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Mv.send()},t.prototype.Hv=function(t){this.Dv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Dv.send()},t.prototype.Vv=function(){this.Mv.setCompressionOptions(this.oi,"base64"),this.Mv.setRequestHeader({name:"Content-type",value:"text/plain; charset=UTF-8"})},t}(),uu="display",hu=function(){function t(t,i,n,r,s,e,u,h){this.P=t,this.Kc=i,this.oi=n,this.zv=r,this.Nt=s,this.X=e,this.Ho=u,this.lo=h}return t.prototype.init=function(){var t=new er(new fr),i=new iu(this.P,this.Kc,t),n=new Se,r=new ru,s=new su(this.P,r),e=new nu,u=new eu(new Hi(this.P.getTrackerUri(),uu),new Or(this.P.getTrackerUri(),uu),e,this.oi,new zn(this.zv,this.Nt));this.Jv=new Qe(this.X,i,n,u,e,s),this.Jv.init(),this.Ho.addListeners(this.Jv)},t.prototype.onStartTracking=function(){this.Jv.start(),this.Jv.collectInitialProducts()},t.prototype.onArtificialPageViewEnd=function(){this.Jv.clearState()},t.prototype.onAfterNaturalPageView=function(){this.Jv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Jv.initStates(),this.Jv.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.Jv.clearState(),this.Jv.stop()},t.prototype.onOptout=function(){this.Jv.stop()},lt([nn("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function ou(t){return t.tagDeploymentMode===Ue.DualCollectionReview||t.tagDeploymentMode===Ue.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(Ue||(Ue={}));var cu,fu=function(){function t(t,i,n,r){this.P=t,this.K=i,this.Y=n,this.mi=r}return t.prototype.init=function(){this.Gv=!1,this.Wv=!1},t.prototype.loadClicktalePtc=function(){!this.Gv&&this.P.ptcDomain&&this.P.ptcGuid&&this.Bv()},t.prototype.getSessionData=function(){var t=this.P.projectId,i=this.K.getVisitor();null==i&&Y.warn("Visitor is null. This happen when a snippet try to get Session Data before the tag was initialized");var n=null!=i?i:{};return{projectId:t,userId:n.id,sessionNumber:n.visitsCount,pageNumber:this.Y.getSession().pageNumber}},t.prototype.startDataCollection=function(t){this.Wv||(this.P.tagDeploymentMode===Ue.LoadClicktalePtc&&this.Kv()&&this.mi.initCTPII(),ou(this.P)&&(this.mi.initCTPII(),t(),this.Wv=!0))},t.prototype.Kv=function(){return this.P.useMalkaPipeline&&this.Y.isReplayRecorded()},t.prototype.Bv=function(){this.Gv=!0;var t=this.Yv();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.Yv=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.P.ptcSha512&&this.P.ptcSnapshotPath?(t.integrity="sha512-".concat(this.P.ptcSha512),t.src="https://".concat(this.P.ptcDomain,"/").concat(this.P.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.P.ptcDomain,"/ptc/").concat(this.P.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(cu||(cu={}));var au,vu=function(){function t(t,i,n,r,s,e,u){this.P=t,this.K=i,this.Y=n,this.X=r,this.lo=s,this.Xv=e,this.mi=u}return t.prototype.init=function(){var t=this;this.$v=new fu(this.P,this.K,this.Y,this.mi),this.$v.init(),this.Zv(),this.lo.register(["getSessionData"],(function(){return t.$v.getSessionData()})),this.lo.register(["startDataCollection"],(function(){t.$v.startDataCollection(t.Xv)}))},t.prototype.Zv=function(){ou(this.P)&&this.$v.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.P.tagDeploymentMode===Ue.LoadClicktalePtc&&(!this.P.useMalkaPipeline&&this.Y.isReplayRecorded()||this.$v.loadClicktalePtc())},t.prototype.onAfterArtificialPageView=function(){!this.Y.isReplayRecorded()&&cu.isRecording()&&this.P.tagDeploymentMode===Ue.LoadClicktalePtc&&cu.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.Y.isReplayRecorded()&&cu.isRecording()&&cu.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onOptout=function(){cu.isRecording()&&cu.stopRecording()},t}(),lu="@user-identifier@",du=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.P=i,u.Qv=n,u.oi=r,u.tl=s,u.il=e,u.nl=[],u.rl=[],u}return at(i,t),i.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.nl,(function(i){return t.trackPageEvent(i)})),this.nl=[],csArray.prototype.forEach.call(this.rl,(function(i){return t.trackEventTriggerRecording(i)})),this.rl=[]},i.prototype.onStop=function(){},i.prototype.trackPageEvent=function(t){this.isStarted?i.sl(t)&&(this.el(t)?this.il.isSupported()&&this.ul(t):this.hl(t)):csArray.prototype.push.call(this.nl,t)},i.prototype.el=function(t){return M(t,lu)},i.prototype.ul=function(t){return dt(this,void 0,void 0,(function(){var i,n;return wt(this,(function(r){switch(r.label){case 0:return this.P.customHashIdEnabled?(i=csString.prototype.slice.call(t,lu.length),this.il.isValidInput(i)?[4,this.il.digest(i,this.P.projectId)]:(Y.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(n=r.sent())?(this.ol={eventName:n,isETR:!1,isCustomHashId:!0},this.cl()):Y.warn("Page event: unable to compute customHashId"),this.P.encryptionEnabled?(this.tl.emitUserIdentifierEvent(i),[2]):[2]}}))}))},i.prototype.hl=function(t){this.tl.emitPageEvent(t),this.ol={eventName:t,isETR:!1,isCustomHashId:!1},this.cl(),this.P.tagDeploymentMode===Ue.LoadClicktalePtc&&cu.sendPageEvent(t)},i.prototype.trackEventTriggerRecording=function(t){this.isStarted?i.sl(t)&&(this.P.useMalkaPipeline&&this.P.malkaEtrEnabled?this.al(t):this.vl(t)):csArray.prototype.push.call(this.rl,t)},i.prototype.al=function(t){M(t,"@ETP@")?this.tl.emitEventTriggerRecording(t,oi.ETR_PAGE):this.tl.emitEventTriggerRecording(t,oi.ETR_SESSION),this.ol={eventName:t,isETR:!0,isCustomHashId:!1},this.cl()},i.prototype.vl=function(t){(function(t){return ou(t)||t.tagDeploymentMode===Ue.LoadClicktalePtc})(this.P)&&(this.tl.emitEventTriggerRecording(t,oi.ETR_LEGACY),this.ol={eventName:t,isETR:!0,isCustomHashId:!1},this.cl(),this.P.tagDeploymentMode===Ue.LoadClicktalePtc&&cu.sendEventTriggerRecording(t))},i.prototype.getRequestParameters=function(){return{value:this.oi.compressSync(this.ol.eventName),ct:this.oi.algorithm,isETR:"".concat(this.ol.isETR),isCustomHashId:"".concat(this.ol.isCustomHashId)}},i.prototype.cl=function(){this.Qv.send()},i.sl=function(t){return z(t)&&!!csString.prototype.trim.call(t)},i}(An),wu=function(){function t(t){this.ll=t,this.dl=!1}return t.prototype.init=function(){this.dl=this.wl(),this.dl&&(this.xu=new TextEncoder)},t.prototype.wl=function(){return!!(this.ll&&this.ll.subtle&&this.ll.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.dl},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.yl=function(t,i){var n=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(n,":").concat(i)},t.prototype.digest=function(t,i){return dt(this,void 0,void 0,(function(){var n,r,s;return wt(this,(function(e){switch(e.label){case 0:if(!this.dl)return[2,null];n=this.yl(t,i),r=this.xu.encode(n),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return s=e.sent(),[2,(u=s,h=csArray.from(new Uint8Array(u)),csArray.prototype.join.call(csArray.prototype.map.call(h,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return e.sent(),[2,null];case 4:return[2]}var u,h}))}))},t}(),yu=["trackPageEvent"],pu=["trackEventTriggerRecording"],mu=function(){function t(t,i,n,r,s){this.P=t,this.lo=i,this.oi=n,this.vo=r,this.tl=s}return t.prototype.init=function(){var t=this,i=new Et(this.P.getTrackerUri(),"pageEvent"),n=new wu(window.crypto);n.init(),this.pl=new du(this.P,i,this.oi,this.tl,n),i.setRequestParametersProviders(this.pl,this.vo),this.lo.register(yu,(function(i){t.pl.trackPageEvent(i)})),this.lo.register(pu,(function(i){t.pl.trackEventTriggerRecording(i)}))},t.prototype.onStartTracking=function(){this.pl.start()},t}();!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(au||(au={}));var gu,Au=["value","checked","src","data","alt"],Eu=["[data-cs-mask]","img[src^='data:']","script"],Su=[{selector:"input:not([type=button])",attrName:"value"}],bu=[".ctHidden, textarea"],Nu=[{selector:".ctHidden, input:not([type=button])",attrName:"value"}],Tu=function(){function t(t){var i;this.P=t,this.ml=[],this.gl="",this.Eu=document.createElement("div"),ou(this.P)||(this.gl=this.Al(this.gl,Eu),(i=csArray.prototype.push).call.apply(i,yt([this.ml],Su,!1)))}return t.prototype.setPIISelectors=function(t){var i,n=this;if(t){if(null===(i=t.PIISelectors)||void 0===i?void 0:i.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return Z(t,n.Eu)}));this.gl=this.Al(this.gl,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&Z(t.selector,n.Eu)&&!n.El(t)&&csArray.prototype.push.call(n.ml,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.gl],Attributes:this.ml}},t.prototype.initCTPII=function(){var t,i,n,r=this;if(this.gl=this.Al(this.gl,bu),null===(n=null===(i=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===i?void 0:i.DOM)||void 0===n?void 0:n.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return Z(t,r.Eu)}));this.gl=this.Al(this.gl,s),(t=csArray.prototype.push).call.apply(t,yt([this.ml],Nu,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&Z(t.rule,r.Eu)&&csArray.prototype.push.call(r.ml,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,i){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(Au,i)||this.Sl(t,i,this.ml)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===au.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===au.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var i=this;if(y(t)||T(t)){this.bl(t);var n=an.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){return t.shadowRoot&&i.bl(t.shadowRoot)}))}},t.prototype.unidentifySensitiveNodes=function(t){var i=this;if(y(t)||T(t)){this.Nl(t);var n=an.getAllShadowHosts(t);csArray.prototype.forEach.call(n,(function(t){return t.shadowRoot&&i.Nl(t.shadowRoot)}))}},t.prototype.Nl=function(t){for(var i,n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);i=n.nextNode();)"__contentsquare_sensitive"in i&&delete i.__contentsquare_sensitive},t.prototype.bl=function(t){var i=this;if(this.Tl(t))return this.Rl(t),void this.Ol(t);this.kl(t,this.gl)?(this.Il(t),this.Ol(t)):cn(t.querySelectorAll(this.gl),(function(t){i.xl(t)||(i.Il(t),i.Ol(t))}))},t.prototype.xl=function(t){return A(t)&&M(t.src,"data:image/svg+xml")&&t.src.length<=1024},t.prototype.Il=function(t){t.__contentsquare_sensitive=au.Sensitive},t.prototype.Rl=function(t){t.__contentsquare_sensitive=au.SensitiveChild},t.prototype.Ol=function(t){var i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),n=i.nextNode();for(t===n&&(n=i.nextNode());n;)this.Rl(n),n=i.nextNode()},t.prototype.Tl=function(t){return!(!csNodeparentNode.apply(t)||!y(csNodeparentNode.apply(t))&&!T(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||O(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.kl=function(t,i){return y(t)&&$.call(t,i)},t.prototype.Sl=function(t,i,n){return csArray.prototype.some.call(n,(function(n){return t.hasAttribute(i)&&csString.prototype.indexOf.call(n.attrName,i)>-1&&$.call(t,n.selector)}))},t.prototype.Al=function(t,i){if(0===i.length)return t;if(0===t.length)return csArray.prototype.join.call(i,",");for(var n=t,r=0,s=i;r<s.length;r++)for(var e=s[r],u=0,h=csString.prototype.split.call(e,",");u<h.length;u++){var o=h[u];-1===csString.prototype.indexOf.call(n,o)&&(n+=",".concat(o))}return n},t.prototype.El=function(t){return csArray.prototype.some.call(this.ml,(function(i){return i.selector===t.selector&&i.attrName===t.attrName}))},t}(),Ru=function(){function t(t){this.lo=t}return t.prototype.init=function(){this.Ll(t.Cl,Ut),this.Ll(t._l,Pt)},t.prototype.Ll=function(t,i){this.lo.register([t],(function(t,n){z(t)&&z(n)&&Y.error(n,"".concat(i).concat(t))}))},t._l="logSnippetError",t.Cl="logImplementationSnippetError",t}(),Ou=function(){function t(t,i,n,r){this.P=t,this.Fo=i,this.ao=n,this.Ho=r}return t.prototype.init=function(){var t=this;this.Fo.onChildMessage((function(i,n,r){return t.Ho.emitIframeEvent(i,n,r)})),this.Fo.setRecordingStatusCallback((function(){return t.ao.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.P.iframesTracking&&this.Fo.start()},t.prototype.onOptout=function(){this.P.iframesTracking&&this.Fo.stop()},t.prototype.onRecordingStatusChange=function(){this.P.iframesTracking&&this.Fo.onRecordingStatusChange(this.ao.getRecordingStatus())},t}(),ku=function(t){function i(i,n){var r=t.call(this)||this;return r.P=i,r.mi=n,r.Ml=0,r.Dl=new Map,r.Pl={boundElement:window,type:"message",listener:function(t){return r.Ul(t)}},r}return at(i,t),i.prototype.onChildMessage=function(t){this.jl=t},i.prototype.setRecordingStatusCallback=function(t){this.ql=t},i.prototype.onRecordingStatusChange=function(t){var i=this,n=Wt.buildBaseMessage(Gt.RecordingStatus,Jt.Parent,this.P.projectId);n.content=t,this.Dl.forEach((function(t){!i.Fl(t)&&t.port&&Wt.sendChannelMessage(t.port,n)}))},i.prototype.sendToChildren=function(t,i){var n=Wt.buildBaseMessage(t,Jt.Parent,this.P.projectId);n.content=i,this.Hl(n)},i.prototype.onStart=function(){Ji(this.Pl,!1),this.Vl()},i.prototype.onStop=function(){this.zl(),Gi(this.Pl,!1),this.Jl()},i.prototype.Vl=function(){var t=this,i=this.Gl();this.Wl(i),csArray.prototype.forEach.call(i,(function(i){if(null===t.Bl(i)){var n={iframe:i};t.Dl.set(t.Ml,n),t.Ml+=1}})),this.Kl()},i.prototype.Gl=function(){var t=this;return csArray.prototype.filter.call(dn.findAllElements("iframe"),(function(i){return t.Yl(i)}))},i.prototype.Wl=function(t){var i=this;this.Dl.forEach((function(n,r){n.iframe&&-1===csArray.prototype.indexOf.call(t,n.iframe)&&i.Xl(r,n)}))},i.prototype.Xl=function(t,i){i.port&&Wt.closeChannelPort(i.port),this.Dl.delete(t)},i.prototype.Jl=function(){this.Dl.forEach((function(t){t.port&&Wt.closeChannelPort(t.port)})),this.Dl.clear()},i.prototype.Bl=function(t){var i=null;return this.Dl.forEach((function(n,r){null===i&&n.iframe===t&&(i=r)})),i},i.prototype.Yl=function(t){return t.id!==r&&(!t.src||Vt(Ht(t.src),this.P.hostnames))},i.prototype.Hl=function(t){this.Dl.forEach((function(i){i.port&&Wt.sendChannelMessage(i.port,t)}))},i.prototype.Kl=function(){var t=this;this.Dl.forEach((function(i,n){if(i.iframe.contentWindow){var r=t.$l(n);Wt.sendPostMessage(i.iframe.contentWindow,"*",r)}}))},i.prototype.zl=function(){var t=this.Zl();this.Dl.forEach((function(i){i.port?Wt.sendChannelMessage(i.port,t):i.iframe.contentWindow&&Wt.sendPostMessage(i.iframe.contentWindow,"*",t)}))},i.prototype.$l=function(t){return Wt.buildBaseMessage(Gt.Discovery,Jt.Parent,this.P.projectId,t)},i.prototype.Zl=function(){return Wt.buildBaseMessage(Gt.Stop,Jt.Parent,this.P.projectId)},i.prototype.Ql=function(t,i){var n=this,r=this.Dl.get(t);void 0!==r?(r.port=i,r.port.onmessage=function(t){n.td(t,r)}):Y.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Ml,")"))},i.prototype.nd=function(t){if(t.port){var i=Wt.buildBaseMessage(Gt.RecordingStatus,Jt.Parent,this.P.projectId),n=this.ql();this.Fl(t)&&(n.isRecording=!1,n.isMutationTrackerStarted=!1),i.content=n,Wt.sendChannelMessage(t.port,i)}},i.prototype.td=function(t,i){if(void 0!==i){var n=t.data.type,r=t.data.content;n===Gt.EndOfBufferedMessages?this.nd(i):this.jl(i.iframe,n,r)}else Y.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},i.prototype.Ul=function(t){if(Wt.isMessageValid(t,Jt.Child,this.P.projectId,this.P.hostnames))switch(t.data.type){case Gt.Discovery:if(void 0===t.data.id)return void this.Vl();if(t.ports&&1===t.ports.length&&this.Dl.has(t.data.id))return void this.Ql(t.data.id,t.ports[0]);Y.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Gt.ChildLogMessage:this.jl(null,Gt.ChildLogMessage,t.data.content);break;default:Y.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},i.prototype.Fl=function(t){return this.mi.isSensitive(t.iframe)||this.mi.isSensitiveChild(t.iframe)},i}(An),Iu=function(){function t(){}return t.prototype.compute=function(t,i){var n=this.rd(i.x)-this.rd(t.x),r=this.rd(i.y)-this.rd(t.y),s=i.time-t.time;return{duration:s,distance:this.sd(n,r),direction:this.ud(n,r),velocity:this.od(n,r,s)}},t.prototype.computePinchMetrics=function(t,i){var n=this.rd(i.x)-this.rd(t.x),r=this.rd(i.y)-this.rd(t.y);return{duration:i.time-t.time,distance:this.sd(n,r)}},t.prototype.getScale=function(t,i){return Math.abs(i/t-1)},t.prototype.rd=function(t){return t/window.devicePixelRatio},t.prototype.sd=function(t,i){return Math.round(Math.sqrt(t*t+i*i))},t.prototype.od=function(t,i,n){var r=n/1e3,s=t/r,e=i/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.ud=function(t,i){return Math.abs(t)>Math.abs(i)?t>0?br.RIGHT:br.LEFT:i>0?br.DOWN:br.UP},t}(),xu=function(){function t(){this.ad={},this.vd=new Iu,this.ld()}return t.prototype.onGesture=function(t){this.dd=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.wd(t)){this.yd(t)&&this.ld();var i={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Lt()};if(1===t.touches.length)this.ad.startPinchTime=i.time,this.ad.firstTouch=i;else if(2===t.touches.length&&(this.ad.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Lt()},this.ad.firstTouch&&this.ad.secondTouch)){var n=this.vd.computePinchMetrics(this.ad.firstTouch,this.ad.secondTouch);this.pd=n.distance}csArray.prototype.push.call(this.md,i),this.gd=rn(t)}},t.prototype.processActionMove=function(){this.Ad=!0},t.prototype.processActionUp=function(t){if(this.Ed(t)){if(csArray.prototype.push.call(this.md,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Lt()}),this.Sd(t)&&this.ad.startPinchTime){var i={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.ad.startPinchTime},n={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Lt()};this.ad.firstTouch&&(this.ad.firstTouch=i,this.ad.secondTouch=n),this.bd(t)}this.pd||this.Nd()&&this.Td(t)}},t.prototype.ld=function(){this.md=[],this.gd=null,this.Ad=!1,this.pd=null},t.prototype.Td=function(t){var i=this.vd.compute(this.md[0],this.md[1]),n=this.Ad?this.Rd(i):this.Od(i);this.dd(n,t)},t.prototype.bd=function(t){if(this.ad.firstTouch&&this.ad.secondTouch){var i=this.vd.computePinchMetrics(this.ad.firstTouch,this.ad.secondTouch),n=this.kd(i);n&&this.dd(n,t)}},t.prototype.kd=function(t){if(this.pd&&!(this.vd.getScale(this.pd,t.distance)<.1))return{type:this.pd>t.distance?Sr.PINCH_IN:Sr.PINCH_OUT,target:this.gd,distance:t.distance}},t.prototype.Rd=function(t){return{type:t.velocity<100?Sr.DRAG:Sr.FLICK,target:this.gd,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.Od=function(t){return{type:t.duration<1e3?Sr.TAP:Sr.LONG_PRESS,target:this.gd}},t.prototype.yd=function(t){return 1===t.touches.length},t.prototype.Nd=function(){return 2===this.md.length},t.prototype.wd=function(t){return t.touches.length>0},t.prototype.Ed=function(t){return t.changedTouches.length>0},t.prototype.Sd=function(t){return this.Ad&&!!this.pd&&1===t.changedTouches.length&&1===t.touches.length},t}(),Lu=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,i){this.subscriptions[t]=i,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),Cu=function(t){function i(i){var n=t.call(this)||this;return n.Id=i,n.Ms=[{boundElement:document,type:"touchstart",listener:function(t){return n.Zn(t)}},{boundElement:document,type:"touchmove",listener:function(t){return n.Zn(t)}},{boundElement:document,type:"touchend",listener:function(t){return n.Zn(t)}}],n.xd=new xu,n.xd.onGesture((function(t,i){return n.th(t,i)})),n}return at(i,t),i.prototype.th=function(t,i){for(var n in this.subscriptions){(0,this.subscriptions[n])(t,i)}},i.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ms,(function(t){return Ji(t)}))},i.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ms,(function(t){return Gi(t)}))},i.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},i.prototype.Zn=function(t){var i=this;this.Id.tryToExecute("process gesture event",(function(){if(i.xd.isValidTouchEvent(t))switch(t.type){case"touchstart":i.xd.processActionDown(t);break;case"touchmove":i.xd.processActionMove();break;case"touchend":i.xd.processActionUp(t)}}))()},i.isSwipe=function(t){return t.type===Sr.FLICK||t.type===Sr.DRAG},i}(Lu),_u=function(t){function i(i,n){var r=t.call(this)||this;return r.Mv=i,r.Ld=n,r.Cd=0,r}return at(i,t),i.prototype.onStart=function(){var t=this;Y.isLoggingActive()&&(this._d=window.setInterval((function(){return t.Md()}),i.Dd))},i.prototype.onStop=function(){Y.isLoggingActive()&&(this.Md(),clearInterval(this._d))},i.prototype.Md=function(){if(!(Wi.isEmpty()||this.Cd>=i.Pd)){var t=Wi.getAll();this.Cd++;var n=vt({a:i.Ud,l:i.jd},this.Ld.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return vt(vt({},t),n)}));this.Mv.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(r)}}),this.Mv.after((function(){Wi.clear()})),this.Mv.send(!1)}},i.Ud="uxa",i.jd="perf",i.Dd=5e3,i.Pd=5,i}(An),Mu=function(){function t(t,i){this.P=t,this.Ld=i}return t.prototype.init=function(){this.qd=new _u(new Hi(this.P.getLoggerUri(),""),this.Ld)},t.prototype.onStartTracking=function(){this.qd.start()},t.prototype.onOptout=function(){this.qd.stop()},t}(),Du=function(){function t(){this.Fd=!1}return t.prototype.enableRecordingStatus=function(t,i,n,r){this.Fd=!0,this.bo=t,this.mi=i,this.Eo=n,this.po=r},t.prototype.getRecordingStatus=function(){return this.Fd?{isRecording:this.bo.isRecording(),isMutationTrackerStarted:this.bo.isMutationTrackerStarted(),PIISelectors:this.mi.getPIISelectors(),capturedElementSelector:this.po.getWhitelistedElementsSelector(),useAnonymization:this.Eo.shouldUseAnonymization()}:{isRecording:!1}},t}(),Pu=function(){function t(t,i,n,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b,N,T,R){var O=this;this.zv=t,this.oi=i,this.K=n,this.Y=r,this.Zi=s,this.lo=e,this.Hd=u,this.P=h,this.Vd=o,this.zd=c,this.Jd=f,this.fo=a,this.U=v,this.Kc=l,this.Ta=d,this.X=w,this.Gd=y,this.tl=p,this.xn=m,this.Ln=g,this.Cn=A,this.Mn=E,this.Ho=S,this.Nt=b,this.Wd=N,this.yo=T,this.Bd=R,this.Kd=function(t){void 0===t&&(t=!1),O.Yd.start(t),O.Xd.start()}}return t.prototype.start=function(){var t=this;if(this.Vd.init(),this.zd.init(),!this.zd.isActive()){var i=new Ze(this.Y,this.K),n=new Be(this.Kc),r=new Cu(Y),s=new Ce(this.P,this.K,this.Y,this.Kc,n,this.lo,i,r,this.Ho,this.oi),e=new As(this.lo,this.Y,this.P,this.zv,this.oi,this.U),u=new Tu(this.P),h=new Du,o=new ku(this.P,u),c=new Ou(this.P,o,h,this.Ho);c.init();var f=new ws(this.K,this.Y,this.lo,this.Ho,o,this.P),a=new xs(this.P,this.K,this.Y,this.lo,this.U,i,this.X);this.Yd=new We(this.P,this.lo,this.Zi,this.K,this.Y,this.fo,this.Nt,this.Ta,this.X,this.yo);var v=new $e(this.K,this.Y,this.lo),l=new vu(this.P,this.K,this.Y,this.X,this.lo,this.Kd,u),d=new mu(this.P,this.lo,this.oi,this.zv,this.tl),w=new Ru(this.lo),y=new Mu(this.P,new Dt(this.P,this.U));if(this.Xd=new Ke,this.Jd.init(),f.init(),e.init(),a.init(),this.Wd.init(),this.Yd.init(),v.init(),l.init(),d.init(),this.Gd.init(),w.init(),y.init(),this.Bd.init(),this.Zi.addListeners(v,this.Hd,s,this.Jd,f,this.Wd,this.Yd,l,d,e,c,y),ss.isRecordingSupported()&&this.oi.isSupported()){var p=new os(h,this.Y,this.P,this.oi,n,this.fo,this.zv,this.lo,this.U,i,this.X,u,this.xn,this.Ln,this.Cn,r,this.Mn,this.Zi,this.tl,this.Ho,this.yo);p.init(),this.Zi.addListeners(p)}if(this.P.eMerchandisingEnabled){var m=new hu(this.P,this.Kc,this.oi,this.zv,this.Nt,this.X,this.Ho,this.lo);m.init(),this.Zi.addListeners(m)}s.init(),i.onSessionExpired((function(){t.Zi.emitBeforeSessionRenewal(),t.$d(!0),t.Zi.emitAfterSessionRenewal()})),this.$d()}},t.prototype.$d=function(t){var i=this;void 0===t&&(t=!1),this.lo.start(),this.Xd.onLoad((function(){i.Zi.emitStartTracking(t)})),ou(this.P)&&!t||this.Kd(t)},t}(),Uu=function(){function t(t,i,n,r,s,e,u,h){this.P=t,this.K=i,this.bt=n,this.Zd=r,this.Qd=s,this.tw=e,this.Rt=u,this.iw=h}return t.prototype.compute=function(t){var i=this;this.P.crossDomainTracking&&!this.P.cookielessTrackingEnabled?this.P.crossDomainSingleIframeTracking?this.Rt.start((function(){return i.nw(t)})):this.tw.applyUpToDate((function(){return i.nw(t)})):this.nw(t)},t.prototype.nw=function(t){this.Qd.handle(),this.Zd.clear(),this.rw()?(this.Zd.restoreClearedVisitor(),t(!0)):(this.bt.exclude(this.P),t(!1))},t.prototype.rw=function(){var t=U.boolean(this.P.sampleRate);return this.iw.isForceIncluded()||!this.bt.isExcluded()&&this.K.doesVisitorExist()||!this.bt.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,i=csString.prototype.slice.call(function(t){for(var i=0,n=0;n<t.length;n+=1)i=csString.prototype.charCodeAt.call(t,n)+(i<<6)+(i<<16)-i;return Math.abs(i)}(t).toString(16),-4),n=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?i:7&i|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",i)}}(gu||(gu={}));var ju,qu=function(){function t(t,i,n){this.P=t,this.ew=i,this.Y=n}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.uw(),this.Y.removeSession()),this.hw(t),this.setVisitor(t)},t.prototype.uw=function(){return{id:gu.generate(),visitsCount:0,appliedTrackingDraw:this.P.lastTrackingDraw,creationTimestamp:Ct(),lastVisitTimestamp:0,hitTimestamp:0,expires:Lt()+this.P.visitorCookieTimeout}},t.prototype.hw=function(t){var i=Ct();this.Y.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=i),t.hitTimestamp=i,t.appliedTrackingDraw=this.P.lastTrackingDraw,this.ow=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.ew.get()},t.prototype.setVisitor=function(t){this.ew.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.ew.get()},t.prototype.removeVisitor=function(){this.ew.remove()},t.prototype.handleSubdomainChange=function(){this.ew.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.ow&&t.visitsCount!==this.ow},t}(),Fu=function(){function t(t,i){this.configuration=t,this.compressor=i}return t.prototype.isCompressionSupported=function(){return this.compressor.isSupported()},t}(),Hu=function(t){function i(i,n,r,s){var e=t.call(this,i,n)||this;return e.configuration=i,e.compressor=n,e.iw=r,e.X=s,e}return at(i,t),i.prototype.sanitizeSessionRecordingState=function(t){return t},i.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&(this.iw.isForceLegacyReplayRecorded()||U.percentage()<this.configuration.replayRecordingRate&&ss.isRecordingSupported())?ei.REPLAY_RECORDING_ENABLED:ei.REPLAY_RECORDING_DISABLED},i.prototype.updateRecordingState=function(t){return t.recordingState},i.prototype.isReplayRecorded=function(t){return t.recordingState===ei.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},i.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==ei.REPLAY_RECORDING_ENABLED){var i=this.X.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(i)}return!1},i.prototype.getDisabledRecordingState=function(){return ei.REPLAY_RECORDING_DISABLED},i.prototype.setVisitorService=function(t){},i}(Fu),Vu=function(t){function i(i,n,r,s,e,u){var h=t.call(this,i,n)||this;return h.configuration=i,h.compressor=n,h.cw=r,h.Zi=s,h.iw=e,h.X=u,h.fw=[],h}return at(i,t),i.prototype.init=function(){this.aw()},i.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===ui.TEMPORARILY_RECORDED&&(t.recordingState=ui.NOT_RECORDED),t},i.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&ss.isRecordingSupported()?(this.fw=[],U.percentage()<this.configuration.replayRecordingRate||this.iw.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.fw,ui.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.fw,ui.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.fw,ui.ETR_SAMPLING),this.fw.length>0?(this.lw(t),ui.TEMPORARILY_RECORDED):ui.NOT_RECORDED):ui.NOT_RECORDED},i.prototype.updateRecordingState=function(t){return this.isCompressionSupported()&&ss.isRecordingSupported()?t.recordingState===ui.GLOBAL_SAMPLING?ui.GLOBAL_SAMPLING:(this.fw=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.fw,ui.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.fw,ui.ETR_SAMPLING)),this.fw.length>0?(this.lw(t),ui.TEMPORARILY_RECORDED):ui.NOT_RECORDED):ui.NOT_RECORDED},i.prototype.lw=function(t){var i,n=this,r=null===(i=this.K)||void 0===i?void 0:i.getVisitor();this.cw.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify({recordingTypes:csArray.prototype.map.call(n.fw,Number),url:n.X.getAnonymizedUrl(),projectId:n.configuration.projectId,uu:(null==r?void 0:r.id)||"",sn:(null==r?void 0:r.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})}}),this.cw.send()},i.prototype.abortQuotaServiceRequest=function(){this.cw.abort()},i.prototype.isReplayRecorded=function(t){return t.recordingState===ui.TEMPORARILY_RECORDED||t.recordingState===ui.GLOBAL_SAMPLING||t.recordingState===ui.URL_SAMPLING||t.etrState===hi.ETR_ON},i.prototype.aw=function(){var t=this;this.cw.setRequestHeader({name:"Content-Type",value:"application/json"}),this.cw.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.cw.onTimeout(3e3,(function(){return t.quotaServiceTimeoutHandler()})),this.cw.onLoad((function(i){return t.quotaServiceLoadHandler(i)}))},i.prototype.quotaServiceErrorHandler=function(t){this.yw(),Y.warn("Quota Service: request error - ".concat(t))},i.prototype.quotaServiceTimeoutHandler=function(){this.yw(),Y.warn("Quota Service: request timeout")},i.prototype.yw=function(){var t=ui.NOT_RECORDED;this.pw(this.fw)&&(t=ui.GLOBAL_SAMPLING),this.Zi.emitRecordingStateChange(t,hi.ETR_OFF)},i.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var i;try{i=csJSON.parse(t.responseText)}catch(i){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var n=null==i.allowedRecordingTypes?void 0:csArray.prototype.map.call(i.allowedRecordingTypes,csString);if(n){var r=hi.ETR_OFF,s=ui.NOT_RECORDED;this.pw(n)?s=ui.GLOBAL_SAMPLING:this.mw(n)&&(s=ui.URL_SAMPLING),this.gw(n)&&(r=hi.ETR_ON),this.Zi.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},i.prototype.pw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ui.GLOBAL_SAMPLING}))},i.prototype.mw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ui.URL_SAMPLING}))},i.prototype.gw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ui.ETR_SAMPLING}))},i.prototype.setVisitorService=function(t){this.K=t},i.prototype.getDisabledRecordingState=function(){return ui.NOT_RECORDED},lt([X("Quota Service: onerror")],i.prototype,"quotaServiceErrorHandler",null),lt([X("Quota Service: ontimeout")],i.prototype,"quotaServiceTimeoutHandler",null),lt([X("Quota Service: onload")],i.prototype,"quotaServiceLoadHandler",null),i}(Fu),zu=function(){function t(t,i){this.Aw=t,this.Ew=i,this.Sw=!1,this.bw=null,this.Nw=0}return t.prototype.setDynamicVariablesService=function(t){this.Tw=t},t.prototype.createOrUpdateSession=function(){this.Rw(),this.Ow=Lt(),this.Nw=0;var t=this.kw();null===t?(t=this.Iw(),this.xw(t),t.recordingState=this.Ew.computeInitialRecordingState(t)):(t=this.Ew.sanitizeSessionRecordingState(t),this.xw(t),t.recordingState=this.Ew.updateRecordingState(t)),this.setSession(t),this.Lw(t)},t.prototype.Iw=function(){return{pageNumber:0,recordingState:this.Ew.getDisabledRecordingState(),etrState:hi.ETR_OFF}},t.prototype.Lw=function(t){this.Ew instanceof Hu?this.Sw=this.Ew.computeTriggerSessionReplayStatus(t):this.Sw=!1},t.prototype.Cw=function(){var t=this.Iw();return this.xw(t),t.recordingState=this.Ew.computeInitialRecordingState(t),this.Lw(t),t},t.prototype.xw=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.Ew.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===ui.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.Ew instanceof Vu&&this.Ew.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},i=this.getSession();return null!==i&&(t.pn="".concat(i.pageNumber),this.Ew instanceof Hu&&(t.re=this.Sw?ei.TRIGGER_REPLAY_RECORDING_ENABLED:i.recordingState)),t},t.prototype.getSession=function(){return this.Aw.get()},t.prototype.kw=function(){return this.Aw.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.Aw.get()},t.prototype.setSession=function(t){this.Aw.set(t)},t.prototype.removeSession=function(){this.Aw.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),i=[];return t&&(t.recordingState!==ui.NOT_RECORDED&&csArray.prototype.push.call(i,t.recordingState),t.etrState===hi.ETR_ON&&csArray.prototype.push.call(i,ui.ETR_SAMPLING)),i},t.prototype.updateRecordingState=function(t,i){var n=this.getSession();null!==n&&(n.recordingState=t,n.etrState=i,this.setSession(n))},t.prototype.hasValidSession=function(){var t=this.Aw.getRawSession();return this.Aw.isValid(t)},t.prototype.handleSubdomainChange=function(){this.Aw.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.Aw.isCacheRefreshed();return t&&this.Aw.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.bw||this._w()},t.prototype._w=function(){if(this.Mw())this.Rw();else{var t=this.getSession();null===t&&(t=this.Cw()),this.Aw.set(t,174e4),this.Dw(),this.Pw()}},t.prototype.Pw=function(){var t=this;this.bw=window.setTimeout((function(){t._w()}),174e4)},t.prototype.Mw=function(){return 1434e4-(Lt()+yi-this.Ow)<0},t.prototype.Rw=function(){this.bw&&(window.clearTimeout(this.bw),this.bw=null)},t.prototype.Dw=function(){this.Nw+=1,this.Tw.trackDynamicVariable("session_expiry_update",this.Nw)},t}(),Ju=function(){function t(t,i,n){this.P=t,this.K=i,this.bt=n}return t.prototype.clear=function(){this.Uw()&&(this.jw=this.K.getVisitor(),this.K.removeVisitor()),this.qw()&&this.bt.removeExclusion()},t.prototype.Uw=function(){return this.K.doesVisitorExist()&&this.K.getVisitor().appliedTrackingDraw!==this.P.lastTrackingDraw},t.prototype.qw=function(){return this.bt.getAppliedTrackingDraw()!==this.P.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.jw&&this.K.setVisitor(this.jw)},t}(),Gu=function(){function t(t,i){this.K=t,this.Y=i}return t.prototype.handle=function(){this.Fw(),this.Hw()},t.prototype.Fw=function(){this.K.handleSubdomainChange()},t.prototype.Hw=function(){this.Y.handleSubdomainChange()},t}(),Wu=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=csArray.prototype.push).call.apply(t,yt([this.listeners],i,!1))},t}(),Bu=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.emitBeforeNaturalPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeNaturalPageView&&n.onBeforeNaturalPageView()}},i.prototype.emitAfterNaturalPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterNaturalPageView&&n.onAfterNaturalPageView()}},i.prototype.emitInitTracking=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onInitTracking&&n.onInitTracking()}},i.prototype.emitStartTracking=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onStartTracking&&r.onStartTracking(t)}},i.prototype.emitArtificialPageViewEnd=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onArtificialPageViewEnd&&n.onArtificialPageViewEnd()}},i.prototype.emitBeforeArtificialPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeArtificialPageView&&n.onBeforeArtificialPageView()}},i.prototype.emitAfterArtificialPageView=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterArtificialPageView&&n.onAfterArtificialPageView()}},i.prototype.emitBeforeSessionRenewal=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onBeforeSessionRenewal&&n.onBeforeSessionRenewal()}},i.prototype.emitAfterSessionRenewal=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onAfterSessionRenewal&&n.onAfterSessionRenewal()}},i.prototype.emitOptout=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onOptout&&n.onOptout()}},i.prototype.emitConsentGranted=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onConsentGranted&&n.onConsentGranted()}},i.prototype.emitConsentWithdrawn=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onConsentWithdrawn&&n.onConsentWithdrawn()}},i.prototype.emitRecordingStateChange=function(t,i){for(var n=0,r=this.listeners;n<r.length;n++){var s=r[n];s.onRecordingStateChange&&s.onRecordingStateChange(t,i)}},i.prototype.emitInitialDomStart=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onInitialDomStart&&n.onInitialDomStart()}},i.prototype.emitInitialDomDone=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onInitialDomDone&&r.onInitialDomDone(t)}},i.prototype.emitRecordingStatusChange=function(){for(var t=0,i=this.listeners;t<i.length;t++){var n=i[t];n.onRecordingStatusChange&&n.onRecordingStatusChange()}},lt([nn("emitStartTracking")],i.prototype,"emitStartTracking",null),i}(Wu),Ku="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(ju||(ju={}));var Yu,Xu=function(){function t(t,i,n){this.P=t,this.Tt=i,this.Vw=n}return t.prototype.get=function(){var t;return null===(t=this.P.cookielessTrackingEnabled?this.Vw.getItem(Ku):this.Tt.get(Ku))?t:Number(t)},t.prototype.set=function(t){this.P.cookielessTrackingEnabled?this.Vw.setItem(Ku,csString(t)):this.Tt.set(Ku,csString(t),P)},t.prototype.remove=function(){this.P.cookielessTrackingEnabled?this.Vw.removeItem(Ku):this.Tt.delete(Ku)},t.prototype.handleSubdomainChange=function(){this.P.cookielessTrackingEnabled||(this.P.allowSubdomains?this.Tt.delete(Ku,ti.CURRENT_DOMAIN):this.Tt.delete(Ku,this.Tt.getRootDomain()))},t}(),$u=["trackConsentGranted"],Zu=["trackConsentWithdrawn"],Qu=function(){function t(t,i){this.lo=t,this.Ko=i}return t.prototype.init=function(){this.Ko.handleSubdomainChange(),this.Ko.setInitialConsent(),this.zw()},t.prototype.zw=function(){var t=this;this.lo.register($u,(function(){t.Ko.grantConsent()})),this.lo.register(Zu,(function(){t.Ko.withdrawConsent()}))},t.prototype.onOptout=function(){this.Ko.removeConsent()},t}(),th=function(){function t(t,i,n){this.P=t,this.ew=i,this.Zi=n}return t.prototype.setInitialConsent=function(){var t=this.ew.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var i=this.P.consentRequired;return i&&t===ju.NOT_REQUIRED||!i&&t!==ju.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.ew.handleSubdomainChange()},t.prototype.setDefault=function(){var t=this.P.consentRequired?ju.NOT_EXPRESSED:ju.NOT_REQUIRED;this.ew.set(t)},t.prototype.grantConsent=function(){this.P.consentRequired&&(this.ew.set(ju.GRANTED),this.Zi.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.P.consentRequired&&(this.ew.set(ju.WITHDRAWN),this.Zi.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.ew.remove()},t.prototype.isAllowedByConsent=function(){return!this.P.consentRequired||this.ew.get()===ju.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.ew.get())}},t}(),ih=function(){function t(t,i,n,r,s,e,u){this.Zi=t,this.lo=i,this.Hd=n,this.Vd=r,this.zd=s,this.Jw=e,this.Jd=u}return t.prototype.start=function(){this.Zi.addListeners(this.Jw,this.Jd,this.Hd),this.Jd.init(),this.Vd.init(),this.zd.init(),this.zd.isActive()||this.lo.start()},t}(),nh=function(){function t(t,i){this.qt=t,this.ew=i}return t.prototype.exclude=function(t){this.ew.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.ew.remove()},t.prototype.isExcluded=function(){return this.Gw()||this.Ww()},t.prototype.Gw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.ew.get()},t.prototype.Ww=function(){return csString.prototype.indexOf.call(this.qt.href,Si)>0},t}(),rh=function(){function t(t){this.Ko=t}return t.prototype.onOptout=function(){this.Ko.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Yu||(Yu={}));var sh,eh=function(){function t(t){this.X=t,this.Bw=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Bw=new RegExp(t)},t.prototype.Kw=function(){return this.Bw.test(this.X.getAnonymizedUrl())?Yu.SessionReplay:Yu.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Kw()===Yu.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Kw()}},t}(),uh=["excludeURLforReplay"],hh=function(){function t(t,i){this.Ko=t,this.lo=i}return t.prototype.init=function(){var t=this;this.lo.register(uh,(function(i){z(i)&&t.Ko.setExcludeUrlForSessionReplay(i)}))},t}(),oh="_cs_inc",ch=function(){function t(t,i){this.qt=t,this.Tt=i}return t.prototype.isForceIncluded=function(){return this.Yw()||this.Xw()},t.prototype.isForceLegacyReplayRecorded=function(){return this.$w(ei.REPLAY_RECORDING_ENABLED)||this.Zw(ei.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.$w(ui.GLOBAL_SAMPLING)},t.prototype.Yw=function(){return null!==this.Tt.get(oh)},t.prototype.$w=function(t){return this.Tt.get(oh)===t},t.prototype.Xw=function(){return csString.prototype.indexOf.call(this.qt.href,oh)>0},t.prototype.Zw=function(t){return csString.prototype.indexOf.call(this.qt.href,"".concat(oh,"=").concat(t))>0},t}(),fh="_cs_optout",ah=function(){function t(t,i,n){this.P=t,this.Tt=i,this.Vw=n}return t.prototype.get=function(){return this.P.cookielessTrackingEnabled?this.Vw.getItem(fh):this.Tt.get(fh)},t.prototype.set=function(t){this.P.cookielessTrackingEnabled?this.Vw.setItem(fh,t):this.Tt.set(fh,t,P)},t}(),vh=function(){function t(t,i,n){this.Zi=t,this.qt=i,this.ew=n}return t.prototype.init=function(){!this.isActive()&&this.Qw()&&this.activate()},t.prototype.isActive=function(){return"1"===this.ew.get()},t.prototype.activate=function(){this.Zi.emitOptout(),this.ew.set("1")},t.prototype.Qw=function(){return csString.prototype.indexOf.call(this.qt.href,fh)>0},t}(),lh=["optout"],dh=function(){function t(t,i){this.lo=t,this.zd=i}return t.prototype.init=function(){var t=this;this.lo.register(lh,(function(){t.zd.activate()}))},t}();function wh(t,i){return i.visitor.visitsCount!==t.visitor.visitsCount?i.visitor.visitsCount-t.visitor.visitsCount:t.session?i.session?i.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,i){var n=function(t,i){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===i}))[0]}(t,i),r=function(t,i){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,i){return t.visitor&&t.visitor.appliedTrackingDraw===i}(t,i)})),wh)[0]}(t,i);return n||r}}(sh||(sh={}));var yh=function(){function t(t,i,n){this.P=t,this.ty=i,this.iy=n}return t.prototype.applyUpToDate=function(t){var i=this;this.iy.retrieve(this.P.hostnames,(function(n){var r=yt([i.ty.get()],n,!0),s=sh.select(r,i.P.lastTrackingDraw);i.ty.apply(s),t()}))},t}(),ph=function(){function t(t,i){this.lo=t,this.Ho=i}return t.prototype.init=function(){this.Ho.addListeners(this.lo)},t.prototype.onOptout=function(){this.lo.stop()},t.prototype.onBeforeSessionRenewal=function(){this.lo.stop()},t}();var mh,gh=function(t){function i(){var i=t.call(this)||this;return i.ny={},i}return at(i,t),i.prototype.register=function(t,i){for(var n=0,r=t;n<r.length;n++){var s=r[n];this.ny[s]=i,this.ny}},i.prototype.onStart=function(){this.sy(),this.ey()},i.prototype.onStop=function(){window._uxa=[]},i.prototype.onIframeCommands=function(t){for(var i=0,n=t.commands;i<n.length;i++){var r=n[i];this.uy(r.name,r.params,t.iframePath)}},i.prototype.uy=function(t,i,n){var r=this;Y.tryToExecute("Commands.apply.from.iframe: ".concat(n),(function(){var n;if(r.ny[t])return(n=r.ny)[t].apply(n,i)}))()},i.prototype.sy=function(){var t=this;window._uxa.forEach((function(i){var n=i[0],r=i.slice(1);return t.apply(n,r)}))},i.prototype.ey=function(){var t=this;window._uxa={push:function(i){var n=i[0],r=i.slice(1);return t.apply(n,r)}}},i.prototype.apply=function(t,i){var n;if(this.ny[t])return(n=this.ny)[t].apply(n,i)},lt([X("Commands.apply")],i.prototype,"apply",null),i}(An),Ah=function(){function t(){var t=this;this.Of={boundElement:document,type:"securitypolicyviolation",listener:function(i){return t.securityPolicyViolationListener(i)}}}return t.prototype.onEvent=function(t){this.cn=t},t.prototype.start=function(){Ji(this.Of)},t.prototype.stop=function(){Gi(this.Of)},t.prototype.hy=function(i){if(!i)return!1;var n=i.disposition;return z(i.sourceFile)&&csArray.prototype.some.call(t.oy,(function(t){return csString.prototype.indexOf.call(i.sourceFile,t)>0}))&&"report"!==n},t.prototype.securityPolicyViolationListener=function(t){this.hy(t)&&this.cn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.oy=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],lt([X("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),Eh=function(){function t(t){this.vy=t}return t.prototype.init=function(){var t=this;this.vy.onEvent((function(i){return t.Zn(i)}))},t.prototype.start=function(){this.vy.start()},t.prototype.stop=function(){this.vy.stop()},t.prototype.Zn=function(t){var i="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);Y.warn(i)},t}(),Sh=function(t){function i(i,n,r,s,e,u){var h=t.call(this)||this;return h.xn=i,h.ly=n,h.zv=r,h.Ln=s,h.do=e,h.X=u,h.wy=[],h.jn=0,h.yy=[],h}return at(i,t),i.prototype.init=function(){this.py()},i.prototype.initStates=function(){this.hf=Lt(),this.wy=[],this.jn=0},i.prototype.onStart=function(){var t=this;this.xn.subscribe(i.Qn,(function(i){return t.Zn(i)})),this.my()},i.prototype.onStop=function(){this.xn.unsubscribe(i.Qn)},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.wy})},i.prototype.onIframeJavascriptError=function(t){this.Zn(t)},i.prototype.trackCustomError=function(t){var i={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.gy(i)},i.prototype.gy=function(t){var i=this;this.isStarted?this.Zn(t,(function(t){return i.do.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.yy,t)},i.prototype.my=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.yy,(function(i){return t.gy(i)})),this.yy=[])},i.prototype.Zn=function(t,i){if(this.isStarted&&this.jn<20){var n=vt(vt({},t),{pageUrl:this.X.getAnonymizedUrl(),rt:this.uf()});this.Ln.anonymize(n),csArray.prototype.push.call(this.wy,n),this.Ay(),i&&i(n)}},i.prototype.py=function(){var t=this;this.ly.setRequestParametersProviders(this.zv),this.ly.setRequestPayloadProvider(this),this.ly.after((function(){t.wy=[],t.jn+=1}))},i.prototype.uf=function(){return Lt()-this.hf},i.prototype.Ay=function(){this.ly.send()},i.Qn="JavaScriptErrorsService",i}(An),bh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Cn=i,e.Ey=n,e.zv=r,e.Mn=s,e.Sy=[],e.qn=0,e}return at(i,t),i.prototype.init=function(){this.Cn.init(),this.py()},i.prototype.initStates=function(){this.Sy=[],this.qn=0,this.sf()},i.prototype.sf=function(){this.hf=Lt()},i.prototype.uf=function(){return Lt()-this.hf},i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.Qn,(function(i){return t.Zn(i)}))},i.prototype.onStop=function(){this.Cn.unsubscribe(i.Qn)},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.Sy})},i.prototype.onIframeApiError=function(t){this.Zn(t)},i.prototype.Zn=function(t){this.isStarted&&this.qn<i.by&&(t.relativeTime=this.uf(),csArray.prototype.push.call(this.Sy,this.Mn.anonymize(t)),this.Ay())},i.prototype.py=function(){var t=this;this.Ey.setRequestParametersProviders(this.zv),this.Ey.setRequestPayloadProvider(this),this.Ey.after((function(){t.Sy=[],t.qn+=1}))},i.prototype.Ay=function(){this.Ey.send()},i.Qn="ApiErrorsService",i.by=20,i}(An),Nh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Ny=i,e.zv=n,e.Ty=r,e.tl=s,e.Ry=[],e.Fn=0,e.yy=[],e}return at(i,t),i.prototype.init=function(){this.py()},i.prototype.initStates=function(){this.hf=Lt(),this.Ry=[],this.Fn=0},i.prototype.trackCustomError=function(t,i){if(void 0===i&&(i={}),z(t)&&J(i)){var n={message:csString.prototype.slice.call(t,0,300),errorType:"customError"};this.Oy(i)&&(n.attributes=i),this.gy(n)}},i.prototype.Oy=function(t){var i=Object.keys(t).length;if(0===i||i>5)return!1;for(var n in t)if(n.length>30||t[n].length>30)return!1;return!0},i.prototype.onStart=function(){this.my()},i.prototype.onStop=function(){},i.prototype.my=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.yy,(function(i){return t.gy(i)})),this.yy=[])},i.prototype.gy=function(t){if(this.isStarted){var i=this.ky(t);this.Zn(i),this.tl.emitCustomErrorEvent(i)}else csArray.prototype.push.call(this.yy,t)},i.prototype.Zn=function(t){this.isStarted&&this.Fn<20&&(csArray.prototype.push.call(this.Ry,t),this.Ay())},i.prototype.ky=function(t){var i=vt(vt({},t),{rt:this.uf()});return i.message=this.Ty.anonymizeEmail(t.message),i},i.prototype.py=function(){var t=this;this.Ny.setRequestParametersProviders(this.zv),this.Ny.setRequestPayloadProvider(this),this.Ny.after((function(){t.Ry=[],t.Fn+=1}))},i.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.Ry})},i.prototype.uf=function(){return Lt()-this.hf},i.prototype.Ay=function(){this.Ny.send()},i}(An);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(mh||(mh={}));var Th,Rh=["trackError"],Oh=["api-errors:maskUrl"],kh=function(){function t(t,i,n,r,s,e,u,h,o,c,f){this.xn=t,this.Ln=i,this.Cn=n,this.Mn=r,this.Ty=s,this.P=e,this.zv=u,this.Ho=h,this.lo=o,this.do=c,this.X=f}return t.prototype.init=function(){this.Iy=new Eh(new Ah),this.Iy.init();var t=new Hi(this.P.getTrackerUri(),"errors");this.xy=new Sh(this.xn,t,this.zv,this.Ln,this.do,this.X),this.xy.init(),this.Ho.addListeners(this.xy);var i=new Hi(this.P.getTrackerUri(),"api-errors");this.Cn.excludeDomains([mh.CONTENTSQUARE,mh.CLICKTALE,mh.FAKE_TRACKER]),this.Ly=new bh(this.Cn,i,this.zv,this.Mn),this.Ly.init(),this.Ho.addListeners(this.Ly);var n=new Hi(this.P.getTrackerUri(),"custom-errors");this.Cy=new Nh(n,this.zv,this.Ty,this.do),this.Cy.init(),this.zw()},t.prototype.zw=function(){var t=this;this.lo.register(Oh,(function(i){return t.Mn.addUrlMaskingPattern(i)})),this.lo.register(Rh,(function(i,n){t.P.customErrorsEnabled?t.Cy.trackCustomError(i,n):t.P.jsCustomErrorsEnabled&&t.xy.trackCustomError(i)}))},t.prototype.onInitTracking=function(){this.Iy.start()},t.prototype.onStartTracking=function(){this.P.jsErrorsEnabled&&this.xy.start(),this.P.apiErrors.enabled&&this.Ly.start(),this.P.customErrorsEnabled&&this.Cy.start()},t.prototype.onAfterNaturalPageView=function(){this.xy.initStates(),this.Ly.initStates(),this.Cy.initStates()},t.prototype.onAfterArtificialPageView=function(){this.xy.initStates(),this.Ly.initStates(),this.Cy.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.xy.stop(),this.Ly.stop(),this.Cy.stop()},t.prototype.onOptout=function(){this.Iy.stop(),this.xy.stop(),this.Ly.stop(),this.Cy.stop()},t}(),Ih="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Th||(Th={}));var xh=function(){function t(t,i){this.P=t,this.Tt=i,this._y=Xt.None,this.My=!1,this.Dy=[],this.Py=[]}return t.prototype.init=function(){this._y=this.Tt.isSameSiteSupported()?Xt.None:Xt.NotSet},t.prototype.setStates=function(t,i){this.ty=t,this.Uy=i},t.prototype.start=function(t){var i=this;this.Uy.init(this.jy(),(function(n,r){var s=[i.ty.get()];r&&csArray.prototype.push.call(s,n);var e=sh.select(s,i.P.lastTrackingDraw);i.My=!0,i.ty.apply(e),t()})),this.qy=this.Uy.openIframe()},t.prototype.setCookie=function(t,i,n){if(this.My){var r={name:t,value:i,samesite:this._y,secure:$t.Yes};n&&(r.expires=Kt.toExpireDate(n).getTime()),this.Fy(r)}},t.prototype.removeCookie=function(t){this.My&&this.Hy(t)},t.prototype.Hy=function(t){this.Py=csArray.prototype.filter.call(this.Py,(function(i){return i!==t})),this.Dy=csArray.prototype.filter.call(this.Dy,(function(i){return i.name!==t})),csArray.prototype.push.call(this.Py,t),this.setBatchReadyCall()},t.prototype.Fy=function(t){this.Py=csArray.prototype.filter.call(this.Py,(function(i){return i!==t.name})),this.Dy=csArray.prototype.filter.call(this.Dy,(function(i){return i.name!==t.name})),csArray.prototype.push.call(this.Dy,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.Vy()},t.prototype.Vy=function(){if(this.Dy.length>0){var t=this.zy(Th.Set,this.Dy);this.Jy(t),this.Dy=[]}if(this.Py.length>0){var i=this.zy(Th.Remove,this.Py);this.Jy(i),this.Py=[]}},t.prototype.zy=function(t,i){return{command:t,cookies:i,domain:null,pid:this.P.projectId}},t.prototype.Jy=function(t){var i="https://".concat(this.jy());this.qy.contentWindow&&this.qy.contentWindow.postMessage(t,i)},t.prototype.jy=function(){return this.P.dualCollectionTagDomain&&this.P.dualCollectionTagDomain!==Ih?"cdnssl.".concat(this.P.dualCollectionTagDomain):"csxd.".concat(Ih)},lt([Er(),X("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),Lh=function(){function t(t,i){this.P=t,this.jt=i}return t.prototype.init=function(t,i){this.Gy="https://".concat(t),this.Ft=i},t.prototype.openIframe=function(){var t=this;this.jt.onMessage((function(i){t.zt(i)})),this.jt.onTimeout((function(){t.Jt()})),this.jt.start();var i=this.Wy(this.Gy);return this.jt.open(i)},t.prototype.zt=function(t){if(this.Gt(t)){var i=t.data,n=!0;if(this.By(t))return void Y.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!Ei.isRawDomainState(i))return void Y.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));Ei.isValid(i)||(Y.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),n=!1),this.jt.stop(),this.Ft(n?gi.fromRaw(i):{},n)}},t.prototype.Jt=function(){Y.warn("xdframe single domain: all messages not received")},t.prototype.Gt=function(t){return t.origin===this.Gy&&J(t.data)},t.prototype.By=function(t){return!!t.data.error},t.prototype.Wy=function(t){var i=this.P.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.1.1",".html?pid=").concat(i)},t}(),Ch=function(){function t(t,i,n){this.P=t,this.K=i,this.Y=n}return t.prototype.getRequestParameters=function(){var t=this.Y.getSession();if(!t)return{};var i=this.K.getVisitor();return i?vt(vt(vt({},xt()),this.P.getRequestParameters()),{uu:i.id,sn:"".concat(i.visitsCount),pn:"".concat(t.pageNumber)}):{}},t}(),_h=function(t){function i(){var i=t.call(this)||this;return i.Ky=!1,i.Of={boundElement:window,type:"error",listener:function(t){return i.errorListener(t)}},i}return at(i,t),i.prototype.onStartTracking=function(){Ji(this.Of,this.Ky)},i.prototype.onStopTracking=function(){Gi(this.Of,this.Ky)},i.prototype.errorListener=function(t){var i=this.Yy(t);for(var n in this.subscriptions){(0,this.subscriptions[n])(i)}},i.prototype.Xy=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=i.$y?t:csString.prototype.slice.call(t,0,i.$y-i.truncatedErrorMessageMarker.length)+i.truncatedErrorMessageMarker},i.prototype.Yy=function(t){return{errorType:"jsError",message:this.Xy(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},i.truncatedErrorMessageMarker="",i.$y=1024,lt([X("Event handler type: error")],i.prototype,"errorListener",null),i}(Lu),Mh=function(){function t(t,i){this.lo=t,this.C=i}return t.prototype.init=function(){var t=this;this.lo.register(["debugEvents"],(function(i){"boolean"==typeof i&&t.C.updateDynamicFields("emitDebugEvents",i)}))},t}();function Dh(t,i,n){if(!G(i)&&!G(n))return t.href;var r=G(i)?function(t){return M(t,"/")?t:"/".concat(t)}(i):t.pathname,s=G(n)?function(t){return M(t,"?")||""===t?t:"?".concat(t)}(n):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var Ph=function(){function t(t,i){this.qt=t,this.Ta=i}return t.prototype.overridePath=function(t){G(t)&&z(t)&&(this.Zy=""===t?void 0:t)},t.prototype.overrideQuery=function(t){G(t)&&z(t)&&(this.Qy=t)},t.prototype.computeOverriddenUrl=function(t){return this.tp(t)?this.getAnonymizedUrl():t},t.prototype.tp=function(t){var i=this.ip(this.qt.href);return this.ip(t)===i},t.prototype.ip=function(t){return D(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=Dh(this.qt,this.Zy,this.Qy);return this.Ta.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.qt.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Uh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.emitPageEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onPageEvent&&r.onPageEvent(t)}},i.prototype.emitEventTriggerRecording=function(t,i){for(var n=0,r=this.listeners;n<r.length;n++){var s=r[n];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,i)}},i.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},i.prototype.emitCustomErrorEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},i.prototype.emitUserIdentifierEvent=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},i}(Wu),jh=function(t){function i(i,n){var r=t.call(this)||this;return r.np=i,r.rp=n,r.sp=[],r}return at(i,t),i.prototype.subscribe=function(i,n,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(n,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,i,n)},i.prototype.init=function(){var t=this;this.np.onEvent((function(i){return t.ep(i)})),this.rp.onEvent((function(i){return t.ep(i)}))},i.prototype.onStartTracking=function(){this.np.start(),this.rp.start()},i.prototype.onStopTracking=function(){this.np.stop(),this.rp.stop()},i.prototype.ep=function(t){if(t.url&&t.statusCode){if(this.up(t.url))return;if(t.statusCode>=400)for(var i in this.subscriptions){var n=this.subscriptions[i];if(n.hasOwnProperty("detailedEvent"))n(this.hp(t));else n(this.op(t))}}},i.prototype.op=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},i.prototype.hp=function(t){var i=this.op(t);return Object.keys(t.standardRequestHeaders).length>0&&(i.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(i.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(i.queryParameters=t.queryParameters),t.requestBody&&(i.requestBody=t.requestBody),t.responseBody&&(i.responseBody=t.responseBody),i},i.prototype.up=function(t){return csArray.prototype.some.call(this.sp,(function(i){return-1!==csString.prototype.indexOf.call(t,i)}))},i.prototype.excludeDomains=function(t){var i;(i=csArray.prototype.push).call.apply(i,yt([this.sp],t,!1))},i.truncatedErrorMessageMarker="",i}(Lu),qh=function(){function t(){this.cp=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,i){return!!i&&csArray.prototype.some.call(i,(function(i){return-1!==csString.prototype.indexOf.call(t,i)}))},t.prototype.isValidBodyType=function(t){var i=t["content-type"];if(!i)return!1;var n=csString.prototype.toLocaleLowerCase.call(i);return csArray.prototype.some.call(this.cp,(function(t){return M(n,t)}))},t}(),Fh=function(t){function i(i,n,r){var s=t.call(this)||this;return s.Pr=i,s.fp=n,s.P=r,s.Ye=!1,s.ap=null,s.vp=null,s.lp=null,s.Ue=[],s.dp=function(t){var i=t.context,n=t.args,r=t.callerName;return s.interceptOpen(i,n,r)},s.wp=function(t){var i=t.context,n=t.args;return s.interceptSetRequestHeader(i,n)},s.yp=function(t){var i=t.context,n=t.args;return s.interceptSend(i,n)},s}return at(i,t),i.prototype.onEvent=function(t){csArray.prototype.push.call(this.Ue,t)},i.prototype.start=function(){this.Ye||(this.pp(),this.ap&&this.ap.activate(),this.vp&&this.vp.activate(),this.lp&&this.lp.activate(),this.Ye=!0)},i.prototype.stop=function(){this.Ye&&(this.ap&&this.ap.deactivate(),this.vp&&this.vp.deactivate(),this.Ye=!1)},i.prototype.pp=function(){this.ap||(this.ap=this.Pr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"open",hook:this.dp,options:{withCallerName:!0}})),this.vp||(this.vp=this.Pr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.wp})),this.lp||(this.lp=this.Pr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"send",hook:this.yp}))},i.prototype.interceptOpen=function(t,i,n){var r=this;if(i[1]&&z(i[1])){var s=csString.prototype.split.call(i[1],"?"),e=s[0],u=s[1],h=Ft(e);t.apiCall={url:h,method:i[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:Lt(),responseTime:0,statusCode:0,library:n},u&&this.isValidUrl(h,this.P.apiErrors.validUrls)&&this.P.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},i.prototype.readyStateChangeListener=function(t){var i=this;t.apiCall&&t.readyState===XMLHttpRequest.DONE&&t.status>=400&&(t.apiCall.responseTime=Lt(),t.apiCall.statusCode=t.status,this.mp()&&csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(n){var r=csString.prototype.split.call(n,/:(.*)/),s=r[0],e=r[1];i.P.apiErrors.collectStandardHeaders&&i.fp.isValidStandardHeader(s)?t.apiCall.standardResponseHeaders[s]=csString.prototype.trim.call(e):i.fp.isValidCustomHeader(s)&&(t.apiCall.customResponseHeaders[s]=csString.prototype.trim.call(e))})),this.isValidUrl(t.apiCall.url,this.P.apiErrors.validUrls)&&this.P.apiErrors.collectResponseBody&&this.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.Ue,(function(i){return i(t.apiCall)})))},i.prototype.interceptSetRequestHeader=function(t,i){if(t.apiCall&&this.mp()){var n=i[0],r=i[1];this.P.apiErrors.collectStandardHeaders&&this.fp.isValidStandardHeader(n)&&r?t.apiCall.standardRequestHeaders[n]=r.trim():this.fp.isValidCustomHeader(n)&&r&&(t.apiCall.customRequestHeaders[n]=r.trim())}},i.prototype.interceptSend=function(t,i){var n=i[0];t.apiCall&&this.isValidUrl(t.apiCall.url,this.P.apiErrors.validUrls)&&this.P.apiErrors.collectRequestBody&&this.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof n&&(t.apiCall.requestBody=n)},i.prototype.mp=function(){return this.P.apiErrors.collectStandardHeaders||this.P.apiErrors.validCustomHeaders&&0!==this.P.apiErrors.validCustomHeaders.length},lt([X("XhrRequestTracker.interceptOpen")],i.prototype,"interceptOpen",null),lt([X("XhrRequestTracker.readyStateChangeListener")],i.prototype,"readyStateChangeListener",null),lt([X("XhrRequestTracker.interceptSetRequestHeader")],i.prototype,"interceptSetRequestHeader",null),lt([X("XhrRequestTracker.interceptSend")],i.prototype,"interceptSend",null),i}(qh),Hh=function(t){function i(i,n,r){var s=t.call(this)||this;return s.Pr=i,s.fp=n,s.P=r,s.Ye=!1,s.gp=null,s.Ue=[],s.Ap=function(t){var i=t.result,n=t.args,r=t.callerName;s.interceptFetch(i,n,r)},s}return at(i,t),i.prototype.onEvent=function(t){csArray.prototype.push.call(this.Ue,t)},i.prototype.start=function(){this.Ye||this.Ep()&&(this.Sp(),this.gp&&this.gp.activate(),this.Ye=!0)},i.prototype.stop=function(){this.Ye&&(this.gp&&this.gp.deactivate(),this.Ye=!1)},i.prototype.Ep=function(){return!!window.csFetch&&"function"==typeof window.csFetch},i.prototype.bp=function(t,i){var n=yt([],i,!0);return n[0]&&"function"==typeof n[0].clone&&(n[0]=i[0].clone()),{context:t,args:n}},i.prototype.Sp=function(){this.gp||(this.gp=this.Pr.createAsyncFunctionInterceptor({target:window,methodName:"fetch",hook:this.Ap,hookPrepareArgs:this.bp,options:{withCallerName:!0}}))},i.prototype.Np=function(t,i,n){return dt(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return wt(this,(function(f){switch(f.label){case 0:return r=csString.prototype.split.call(i.url,"?"),s=r[0],e=r[1],u=Ft(s),h=vt(vt({},t),{url:u,method:i.method,responseTime:Lt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.P.apiErrors.collectStandardHeaders&&(h.standardRequestHeaders=this.Tp(i.headers),h.standardResponseHeaders=this.Tp(n.headers)),this.P.apiErrors.validCustomHeaders&&0!==this.P.apiErrors.validCustomHeaders.length&&(h.customRequestHeaders=this.Rp(i.headers),h.customResponseHeaders=this.Rp(n.headers)),this.isValidUrl(s,this.P.apiErrors.validUrls)?(this.P.apiErrors.collectQueryParam&&e&&(h.queryParameters=e),this.P.apiErrors.collectResponseBody&&this.isValidBodyType(h.standardResponseHeaders)?n.bodyUsed?[3,2]:(o=h,[4,n.clone().text()]):[3,2]):[3,4];case 1:o.responseBody=f.sent(),f.label=2;case 2:return this.P.apiErrors.collectRequestBody&&this.isValidBodyType(h.standardRequestHeaders)?(c=h,[4,i.text()]):[3,4];case 3:c.requestBody=f.sent(),f.label=4;case 4:return csArray.prototype.forEach.call(this.Ue,(function(t){return t(h)})),[2]}}))}))},i.prototype.interceptFetch=function(t,i,n){return dt(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return wt(this,(function(f){switch(f.label){case 0:if(r=i[0],s=i[1],!z((e=new Request(r,s)).url))return[2];u=Lt(),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t];case 2:return h=f.sent(),[3,4];case 3:if(o=f.sent(),this.Op(o)||this.kp(o)||this.Ip(o))return[2];throw o;case 4:return c=-1,-1===h.type.indexOf("opaque")&&(c=h.status),c>=400?[4,this.Np({statusCode:c,library:n,requestTime:u},e,h)]:[3,6];case 5:f.sent(),f.label=6;case 6:return[2]}}))}))},i.prototype.Tp=function(t){var i=this,n={};return t.forEach((function(t,r){i.fp.isValidStandardHeader(r)&&t&&(n[r]=csString.prototype.trim.call(t))})),n},i.prototype.Rp=function(t){var i=this,n={};return t.forEach((function(t,r){i.fp.isValidCustomHeader(r)&&t&&(n[r]=csString.prototype.trim.call(t))})),n},i.prototype.Op=function(t){return t instanceof TypeError},i.prototype.kp=function(t){return t instanceof DOMException&&"AbortError"===t.name},i.prototype.Ip=function(t){return t instanceof DOMException&&csArray.prototype.some.call(i.xp,(function(i){return i===t.name}))},i.xp=["NoModificationAllowedError","InvalidStateError","OperationError"],lt([X("FetchRequestTracker.interceptFetch")],i.prototype,"interceptFetch",null),i}(qh),Vh="|iframe|",zh=function(t){function i(i,n,r,s){var e=t.call(this)||this;return e.Lp=i,e.Cp=n,e._p=r,e.Mp=s,e}return at(i,t),i.prototype.emitIframeEvent=function(t,i,n){if(this.Dp(i)&&null===t)Y.error("iframeEventEmitter received event ".concat(i," with null iframe, content:").concat(csJSON.stringify(n)));else switch(i){case Gt.ChildLogMessage:this.Pp(n);break;case Gt.AnalysisEvent:var r=this.Lp.transformEvent(t,n);this.jp(r);break;case Gt.RecordingEvent:var s=n,e=this.Mp.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.qp(e.events):this.Fp(e.events);break;case Gt.JavascriptError:this.Hp(n);break;case Gt.ApiError:this.Vp(n);break;case Gt.DetailedApiError:this.zp(n);break;case Gt.EmerchandisingMessage:var u=this._p.transformEvent(t,n);this.Jp(u);break;case Gt.Commands:var h=this.Cp.transformEvent(t,n);this.Gp(h);break;case Gt.IntegrationCallback:this.Wp(n);break;default:Y.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(n)))}},i.prototype.Dp=function(t){var i=[Gt.AnalysisEvent,Gt.RecordingEvent,Gt.EmerchandisingMessage,Gt.Commands];return-1!==csArray.prototype.indexOf.call(i,t)},i.prototype.Pp=function(t){var i=t.message,n=t.errorCode;switch(t.level){case q.debug:Y.debug(i,n);break;case q.warn:Y.warn(i,n);break;case q.error:Y.error(i,n);break;case q.critical:Y.critical(i,n)}},i.prototype.jp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},i.prototype.qp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},i.prototype.Fp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},i.prototype.Hp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},i.prototype.Vp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeApiError&&r.onIframeApiError(t)}},i.prototype.zp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},i.prototype.Jp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},i.prototype.Gp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeCommands&&r.onIframeCommands(t)}},i.prototype.Wp=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},i}(Wu),Jh=function(){self.addEventListener("message",(function(t){var i=t.data,n=i[0],r=i[1],s=i[2],e=i[3];if(n===WORKER_SIGNATURE){var u=compress(r,s);u.then?u.then((function(t){return self.postMessage([WORKER_SIGNATURE,e,t])})):self.postMessage([WORKER_SIGNATURE,e,u])}}))},Gh="CS_WORKER_SIGNATURE",Wh=function(t){function i(i,n){var r=t.call(this,n)||this;return r.Bp=i,r.Kp=r.Yp(),r.Ue={},r.Xp=0,r.$p=i(),r}return at(i,t),i.prototype.isSupported=function(){return!0},i.prototype.compress=function(t,i,n){if(this.Kp){var r=this.Zp();this.Ue[r]=n,this.Kp.postMessage([Gh,t,i,r])}else{var s=this.$p(t,i);s.then?s.then(n):n(s)}},i.prototype.compressSync=function(t){return this.$p("base64",t)},i.prototype.handleWorkerMessage=function(t){var i=t.data,n=i[0],r=i[1],s=i[2];n===Gh&&(this.Ue[r](s),delete this.Ue[r])},i.prototype.Zp=function(){return this.Xp+=1},i.prototype.Yp=function(){try{var t=csArray.prototype.join.call(["\nvar WORKER_SIGNATURE = ".concat(csJSON.stringify(Gh),";"),"var compress = (".concat(this.Bp.toString(),")();"),"(".concat(Jh.toString(),")()\n\n//compression algo")],"\n");return this.Qp(t)}catch(t){return null}},i.prototype.Qp=function(t){var i=this,n=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker;if(!n||!r||!s)return null;var e=new r([t],{type:"application/javascript"}),u=new s(n.createObjectURL(e));return u.onerror=function(t){return i.tm(t)},u.onmessage=function(t){return i.handleWorkerMessage(t)},u},i.prototype.tm=function(t){var i="WorkerError: ".concat(t.message?t.message:"No message");return this.onError(i)},lt([X("Worker message handler")],i.prototype,"handleWorkerMessage",null),i}(qi);function Bh(){function t(t){for(var i=t.length;--i>=0;)t[i]=0}var i=256,n=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var f=new Array(60);t(f);var a=new Array(512);t(a);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,i,n,r,s){this.static_tree=t,this.extra_bits=i,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,i){this.dyn_tree=t,this.max_code=0,this.stat_desc=i}t(p);var A=function(t){return t<256?a[t]:a[256+(t>>>7)]},E=function(t,i){t.pending_buf[t.pending++]=255&i,t.pending_buf[t.pending++]=i>>>8&255},S=function(t,i,n){t.bi_valid>16-n?(t.bi_buf|=i<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=i>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=i<<t.bi_valid&65535,t.bi_valid+=n)},b=function(t,i,n){S(t,n[2*i],n[2*i+1])},N=function(t,i){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--i>0);return n>>>1},T=function(t,i,n){var r,e,u=new Array(16),h=0;for(r=1;r<=s;r++)u[r]=h=h+n[r-1]<<1;for(e=0;e<=i;e++){var o=t[2*e+1];0!==o&&(t[2*e]=N(u[o]++,o))}},R=function(t){var i;for(i=0;i<n;i++)t.dyn_ltree[2*i]=0;for(i=0;i<r;i++)t.dyn_dtree[2*i]=0;for(i=0;i<19;i++)t.bl_tree[2*i]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,i,n,r){var s=2*i,e=2*n;return t[s]<t[e]||t[s]===t[e]&&r[i]<=r[n]},I=function(t,i,n){for(var r=t.heap[n],s=n<<1;s<=t.heap_len&&(s<t.heap_len&&k(i,t.heap[s+1],t.heap[s],t.depth)&&s++,!k(i,r,t.heap[s],t.depth));)t.heap[n]=t.heap[s],n=s,s<<=1;t.heap[n]=r},x=function(t,n,r){var s,h,o,c,f=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],h=t.pending_buf[t.l_buf+f],f++,0===s?b(t,h,n):(o=v[h],b(t,o+i+1,n),0!==(c=e[o])&&(h-=l[o],S(t,h,c)),s--,o=A(s),b(t,o,r),0!==(c=u[o])&&(s-=p[o],S(t,s,c)))}while(f<t.last_lit);b(t,256,n)},L=function(t,i){var n,r,e,u=i.dyn_tree,h=i.stat_desc.static_tree,o=i.stat_desc.has_stree,c=i.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==u[2*n]?(t.heap[++t.heap_len]=f=n,t.depth[n]=0):u[2*n+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[e]=0,t.opt_len--,o&&(t.static_len-=h[2*e+1]);for(i.max_code=f,n=t.heap_len>>1;n>=1;n--)I(t,u,n);e=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,u[2*e]=u[2*n]+u[2*r],t.depth[e]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,u[2*n+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,i){var n,r,e,u,h,o,c=i.dyn_tree,f=i.max_code,a=i.stat_desc.static_tree,v=i.stat_desc.has_stree,l=i.stat_desc.extra_bits,d=i.stat_desc.extra_base,w=i.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(u=c[2*c[2*(r=t.heap[n])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>f||(t.bl_count[u]++,h=0,r>=d&&(h=l[r-d]),o=c[2*r],t.opt_len+=o*(u+h),v&&(t.static_len+=o*(a[2*r+1]+h)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--n])>f||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,i),T(u,f,t.bl_count)},C=function(t,i,n){var r,s,e=-1,u=i[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),i[2*(n+1)+1]=65535,r=0;r<=n;r++)s=u,u=i[2*(r+1)+1],++h<o&&s===u||(h<c?t.bl_tree[2*s]+=h:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4))},_=function(t,i,n){var r,s,e=-1,u=i[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),r=0;r<=n;r++)if(s=u,u=i[2*(r+1)+1],!(++h<o&&s===u)){if(h<c)do{b(t,s,t.bl_tree)}while(0!=--h);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),h--),b(t,16,t.bl_tree),S(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),S(t,h-3,3)):(b(t,18,t.bl_tree),S(t,h-11,7));h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4)}},M=!1,D=function(t,i,n,r){S(t,0+(r?1:0),3),function(t,i,n,r){O(t),r&&(E(t,n),E(t,~n)),t.pending_buf.set(t.window.subarray(i,i+n),t.pending),t.pending+=n}(t,i,n,!0)},P=function(t){M||(!function(){var t,i,o,g,A,E=new Array(16);for(o=0,g=0;g<28;g++)for(l[g]=o,t=0;t<1<<e[g];t++)v[o++]=g;for(v[o-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)a[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)a[256+A++]=g;for(i=0;i<=s;i++)E[i]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(T(c,287,E),t=0;t<r;t++)f[2*t+1]=5,f[2*t]=N(t,5);d=new m(c,e,257,n,s),w=new m(f,u,0,r,s),y=new m(new Array(0),h,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,R(t)},U=function(t,n,r,s){var e,u,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var n,r=4093624447;for(n=0;n<=31;n++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*n])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(n=32;n<i;n++)if(0!==t.dyn_ltree[2*n])return 1;return 0}(t)),L(t,t.l_desc),L(t,t.d_desc),h=function(t){var i;for(C(t,t.dyn_ltree,t.l_desc.max_code),C(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),i=18;i>=3&&0===t.bl_tree[2*o[i]+1];i--);return t.opt_len+=3*(i+1)+5+5+4,i}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==n?D(t,n,r,s):4===t.strategy||u===e?(S(t,2+(s?1:0),3),x(t,c,f)):(S(t,4+(s?1:0),3),function(t,i,n,r){var s;for(S(t,i-257,5),S(t,n-1,5),S(t,r-4,4),s=0;s<r;s++)S(t,t.bl_tree[2*o[s]+1],3);_(t,t.dyn_ltree,i-1),_(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),x(t,t.dyn_ltree,t.dyn_dtree)),R(t),s&&O(t)},j=function(t,n,r){return t.pending_buf[t.d_buf+2*t.last_lit]=n>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&n,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===n?t.dyn_ltree[2*r]++:(t.matches++,n--,t.dyn_ltree[2*(v[r]+i+1)]++,t.dyn_dtree[2*A(n)]++),t.last_lit===t.lit_bufsize-1},q=function(t){S(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},F={_tr_init:P,_tr_stored_block:D,_tr_flush_block:U,_tr_tally:j,_tr_align:q},H=function(t,i,n,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==n;){n-=u=n>2e3?2e3:n;do{e=e+(s=s+i[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},V=new Uint32Array(function(){for(var t,i=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;i[n]=t}return i}()),z=function(t,i,n,r){var s=V,e=r+n;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^i[u])];return-1^t},J={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,W=2,B=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=F._tr_init,it=F._tr_stored_block,nt=F._tr_flush_block,rt=F._tr_tally,st=F._tr_align,et=G,ut=1,ht=B,ot=K,ct=5,ft=Y,at=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,Et=2,St=Q,bt=258,Nt=262,Tt=103,Rt=113,Ot=666,kt=function(t,i){return t.msg=J[i],i},It=function(t){return(t<<1)-(t>4?9:0)},xt=function(t){for(var i=t.length;--i>=0;)t[i]=0},Lt=function(t,i,n){return(i<<t.hash_shift^n)&t.hash_mask},Ct=function(t){var i=t.state,n=i.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+n),t.next_out),t.next_out+=n,i.pending_out+=n,t.total_out+=n,t.avail_out-=n,i.pending-=n,0===i.pending&&(i.pending_out=0))},_t=function(t,i){nt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,i),t.block_start=t.strstart,Ct(t.strm)},Mt=function(t,i){t.pending_buf[t.pending++]=i},Dt=function(t,i){t.pending_buf[t.pending++]=i>>>8&255,t.pending_buf[t.pending++]=255&i},Pt=function(t,i){var n,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,h=t.nice_match,o=t.strstart>t.w_size-Nt?t.strstart-(t.w_size-Nt):0,c=t.window,f=t.w_mask,a=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),h>t.lookahead&&(h=t.lookahead);do{if(c[(n=i)+u]===d&&c[n+u-1]===l&&c[n]===c[e]&&c[++n]===c[e+1]){e+=2,n++;do{}while(c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&c[++e]===c[++n]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=i,u=r,r>=h)break;l=c[e+u-1],d=c[e+u]}}}while((i=a[i&f])>o&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var i,n,r,s,e,u,h,o,c,f,a=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-Nt)){t.window.set(t.window.subarray(a,a+a),0),t.match_start-=a,t.strstart-=a,t.block_start-=a,i=n=t.hash_size;do{r=t.head[--i],t.head[i]=r>=a?r-a:0}while(--n);i=n=a;do{r=t.prev[--i],t.prev[i]=r>=a?r-a:0}while(--n);s+=a}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,o=t.strstart+t.lookahead,c=s,f=void 0,(f=u.avail_in)>c&&(f=c),n=0===f?0:(u.avail_in-=f,h.set(u.input.subarray(u.next_in,u.next_in+f),o),1===u.state.wrap?u.adler=H(u.adler,h,f,o):2===u.state.wrap&&(u.adler=z(u.adler,h,f,o)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=Lt(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=Lt(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Nt&&0!==t.strm.avail_in)},jt=function(t,i){for(var n,r;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&i===et)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Nt&&(t.match_length=Pt(t,n)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,i===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,i){for(var n,r,s;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&i===et)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Nt&&(t.match_length=Pt(t,n),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(_t(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&_t(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,i===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2};function Ft(t,i,n,r,s){this.good_length=t,this.max_lazy=i,this.nice_length=n,this.max_chain=r,this.func=s}var Ht=[new Ft(0,0,0,0,(function(t,i){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&i===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,_t(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Nt&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(_t(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(_t(t,!1),t.strm.avail_out),1)})),new Ft(4,4,8,4,jt),new Ft(4,5,16,8,jt),new Ft(4,6,32,32,jt),new Ft(4,4,16,16,qt),new Ft(8,16,32,32,qt),new Ft(8,16,128,128,qt),new Ft(8,32,128,256,qt),new Ft(32,128,258,1024,qt),new Ft(32,258,258,4096,qt)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zt=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var i=t.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap?42:Rt,t.adler=2===i.wrap?0:1,i.last_flush=et,tt(i),ft},Jt=function(t){var i=zt(t);return i===ft&&function(t){t.window_size=2*t.w_size,xt(t.head),t.max_lazy_match=Ht[t.level].max_lazy,t.good_match=Ht[t.level].good_length,t.nice_match=Ht[t.level].nice_length,t.max_chain_length=Ht[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),i},Gt=function(t,i,n,r,s,e){if(!t)return vt;var u=1;if(i===wt&&(i=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||n!==St||r<8||r>15||i<0||i>9||e<0||e>gt)return kt(t,vt);8===r&&(r=9);var h=new Vt;return t.state=h,h.strm=t,h.wrap=u,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=i,h.strategy=e,h.method=n,Jt(t)},Wt=function(t,i){var n,r;if(!t||!t.state||i>ct||i<0)return t?kt(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===Ot&&i!==ot)return kt(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=i,42===s.status)if(2===s.wrap)t.adler=0,Mt(s,31),Mt(s,139),Mt(s,8),s.gzhead?(Mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Mt(s,255&s.gzhead.time),Mt(s,s.gzhead.time>>8&255),Mt(s,s.gzhead.time>>16&255),Mt(s,s.gzhead.time>>24&255),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Mt(s,255&s.gzhead.extra.length),Mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=z(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,3),s.status=Rt);else{var u=St+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Rt,Dt(s,u),0!==s.strstart&&(Dt(s,t.adler>>>16),Dt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(n=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),Ct(t),n=s.pending,s.pending!==s.pending_buf_size));)Mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),Ct(t),n=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),Ct(t),n=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>n&&(t.adler=z(t.adler,s.pending_buf,s.pending-n,n)),0===r&&(s.status=Tt)}else s.status=Tt;if(s.status===Tt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Ct(t),s.pending+2<=s.pending_buf_size&&(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),t.adler=0,s.status=Rt)):s.status=Rt),0!==s.pending){if(Ct(t),0===t.avail_out)return s.last_flush=-1,ft}else if(0===t.avail_in&&It(i)<=It(e)&&i!==ot)return kt(t,dt);if(s.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==s.lookahead||i!==et&&s.status!==Ot){var h=s.strategy===pt?function(t,i){for(var n;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(i===et)return 1;break}if(t.match_length=0,n=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(s,i):s.strategy===mt?function(t,i){for(var n,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&i===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,i===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(s,i):Ht[s.level].func(s,i);if(3!==h&&4!==h||(s.status=Ot),1===h||3===h)return 0===t.avail_out&&(s.last_flush=-1),ft;if(2===h&&(i===ut?st(s):i!==ct&&(it(s,0,0,!1),i===ht&&(xt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),Ct(t),0===t.avail_out))return s.last_flush=-1,ft}return i!==ot?ft:s.wrap<=0?at:(2===s.wrap?(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),Mt(s,t.adler>>16&255),Mt(s,t.adler>>24&255),Mt(s,255&t.total_in),Mt(s,t.total_in>>8&255),Mt(s,t.total_in>>16&255),Mt(s,t.total_in>>24&255)):(Dt(s,t.adler>>>16),Dt(s,65535&t.adler)),Ct(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?ft:at)},Bt=function(t,i){var n=i.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=H(t.adler,i,n,0)),r.wrap=0,n>=r.w_size){0===s&&(xt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(i.subarray(n-r.w_size,n),0),i=e,n=r.w_size}var u=t.avail_in,h=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=i,Ut(r);r.lookahead>=3;){var c=r.strstart,f=r.lookahead-2;do{r.ins_h=Lt(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--f);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=h,t.input=o,t.avail_in=u,r.wrap=s,ft},Kt={deflateInit:function(t,i){return Gt(t,i,St,15,8,At)},deflateInit2:Gt,deflateReset:Jt,deflateResetKeep:zt,deflateSetHeader:function(t,i){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=i,ft):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var i=t.state.status;return 42!==i&&69!==i&&73!==i&&91!==i&&i!==Tt&&i!==Rt&&i!==Ot?kt(t,vt):(t.state=null,i===Rt?kt(t,lt):ft)},deflateSetDictionary:Bt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},Xt=function(t){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Yt(n,r)&&(t[r]=n[r])}}return t},$t=function(t){for(var i=0,n=0,r=t.length;n<r;n++)i+=t[n].length;var s=new Uint8Array(i),e=(n=0,0);for(r=t.length;n<r;n++){var u=t[n];s.set(u,e),e+=u.length}return s},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Qt=new Uint8Array(256),ti=0;ti<256;ti++)Qt[ti]=ti>=252?6:ti>=248?5:ti>=240?4:ti>=224?3:ti>=192?2:1;Qt[254]=Qt[254]=1;var ii=function(t,i){if(void 0===i&&(i=t.length),i<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));for(var n="",r=0;r<i;r++)n+=String.fromCharCode(t[r]);return n},ni=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var i,n,r,s,e,u=t.length,h=0;for(s=0;s<u;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),h+=n<128?1:n<2048?2:n<65536?3:4;for(i=new Uint8Array(h),e=0,s=0;e<h;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?i[e++]=n:n<2048?(i[e++]=192|n>>>6,i[e++]=128|63&n):n<65536?(i[e++]=224|n>>>12,i[e++]=128|n>>>6&63,i[e++]=128|63&n):(i[e++]=240|n>>>18,i[e++]=128|n>>>12&63,i[e++]=128|n>>>6&63,i[e++]=128|63&n);return i};var ri=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},si=Object.prototype.toString,ei=G,ui=W,hi=B,oi=K,ci=Y,fi=X,ai=$,vi=Z,li=Q;function di(t){this.options=Xt({level:ai,method:li,chunkSize:16384,windowBits:15,memLevel:8,strategy:vi},t||{});var i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ri,this.strm.avail_out=0;var n=Kt.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(n!==ci)throw new Error(J[n]);if(i.header&&Kt.deflateSetHeader(this.strm,i.header),i.dictionary){var r=void 0;if(r="string"==typeof i.dictionary?ni(i.dictionary):"[object ArrayBuffer]"===si.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,(n=Kt.deflateSetDictionary(this.strm,r))!==ci)throw new Error(J[n]);this._dict_set=!0}}function wi(t,i){return(i=i||{}).gzip=!0,function(t,i){var n=new di(i=i||{});if(n.push(t,!0),n.err)throw n.msg||J[n.err];return n.result}(t,i)}return di.prototype.push=function(t,i){var n,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=i===~~i?i:!0===i?oi:ei,"string"==typeof t?s.input=ni(t):"[object ArrayBuffer]"===si.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===ui||r===hi)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((n=Kt.deflate(s,r))===fi)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),n=Kt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ci;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},di.prototype.onData=function(t){this.chunks.push(t)},di.prototype.onEnd=function(t){t===ci&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,i){var n=wi(i);return"base64"===t?btoa(ii(n)):n}}var Kh=function(t){function i(i){var n=t.call(this,Bh,i)||this;return n.algorithm=ki.GZIP,n}return at(i,t),i}(Wh),Yh=function(t){function i(i){var n=t.call(this,Xh,i)||this;return n.im=Bh(),n.algorithm=ki.GZIP,n}return at(i,t),i.prototype.compressSync=function(t){return this.im("base64",t)},i}(Wh);function Xh(){return function(t,i){var n=new Response(i).body.pipeThrough(new CompressionStream("gzip")),r=new Response(n).arrayBuffer();return"base64"===t?r.then((function(t){return i=t,new Promise((function(t){var n=new FileReader;n.onload=function(i){return t(i.target.result.split(",")[1])},n.readAsDataURL(new Blob([i]))}));var i})):r}}var $h,Zh,Qh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i}("undefined"!=typeof CompressionStream?Yh:Kh),to=function(){function t(){}return t.create=function(t){return this.instance?this.instance:ar.isCompressionEnabled()?this.instance=new Qh(t):new Fi(t)},t}(),io=function(){function t(t){this.Ta=t,this.Ra=[]}return t.prototype.addUrlMaskingPattern=function(t){var i=this.Ta.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ra,i)},t.prototype.anonymize=function(t){var i=this.Ta.removeQueryString(t.url);return vt(vt({},t),{url:this.Ta.anonymizeUrl(i,this.Ra)})},t}(),no=function(){function t(t,i){this.U=t,this.X=i}return t.prototype.anonymize=function(t){return z(t.message)&&(t.message=this.nm(t.message),t.message=this.U.anonymizeEmail(t.message)),z(t.filename)&&(t.filename=this.X.computeOverriddenUrl(t.filename)),t},t.prototype.nm=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),ro=function(){function t(){}return t.prototype.setItem=function(t,i){window.sessionStorage.setItem(t,i)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),so=function(){function t(){}return t.prototype.setItem=function(t,i){window.localStorage.setItem(t,i)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),eo=["visit",2],uo=["page",3],ho=["nextPageOnly",4],oo=function(){function t(t,i){this.U=t,this.ew=i,this.rm={},this.sm={}}return t.prototype.set=function(t,i,n,r){var s,e;if(t>0&&W(i)&&W(n)&&!B(i)&&!B(n)){var u=this.U.anonymizeEmail(csString(i)),h=this.U.anonymizeEmail(csString(n));if(s=[u.slice(0,512),h.slice(0,255)],e=""!==n,!G(r)||csArray.prototype.indexOf.call(eo,r)>=0){var o=this.getCustomVariablesSession();e?o[t]=s:delete o[t],this.setCustomVariableSession(o)}(!G(r)||csArray.prototype.indexOf.call(uo,r)>=0)&&(e?this.rm[t]=s:delete this.rm[t]),G(r)&&csArray.prototype.indexOf.call(ho,r)>=0&&(e?this.sm[t]=s:delete this.sm[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.ew.get();if(!t)return{};var i=window.csJSON.parse(t);return null!==i&&J(i)?i:{}},t.prototype.setCustomVariableSession=function(t){this.ew.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.ew.remove()},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var i in this.sm)this.sm.hasOwnProperty(i)&&(this.rm[i]=this.sm[i]);for(var i in this.rm)this.rm.hasOwnProperty(i)&&(t[i]=this.rm[i]);if(window.csJSON.stringify(t).length<=2)return{};var n={cvars:this.um(t)};return this.rm&&window.csJSON.stringify(this.rm).length>2&&(n.cvarp=this.um(this.rm)),n},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.sm).length>0)for(var t in this.sm)this.sm[t]===this.rm[t]&&(delete this.rm[t],delete this.sm[t])},t.prototype.um=function(t){for(var i in t)if(t.hasOwnProperty(i)){var n=parseInt(i,10),r=t[i],s=r[0],e=r[1];h=1,o=20,(!(V(u=n)&&u>=h&&u<=o)||s.length>512||e.length>255)&&delete t[i]}var u,h,o,c=function(t){var i;for(i in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),co=["setCustomVariable"],fo=function(){function t(t,i){this.lo=t,this.Nt=i}return t.prototype.init=function(){var t=this;this.lo.register(co,(function(i,n,r,s){t.Nt.set(i,n,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.Nt.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.Nt.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.Nt.removeCustomVariablesSession()},t}(),ao=function(){function t(t){this.P=t,this.hm=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.hm,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.P.apiErrors.validCustomHeaders)return!1;var i=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.P.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===i}))},t}(),vo=function(){function t(t){this.U=t}return t.prototype.getUrlMaskingPattern=function(i){for(var n=[],r=0,s=csString.prototype.split.call(i,"/");r<s.length;r++){var e=s[r];M(e,t.om)?csArray.prototype.push.call(n,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(n,{key:e,value:null})}return n},t.prototype.anonymizeUrl=function(t,i){var n=this.U.anonymizeEmail(t);return n=this.U.anonymizeJwt(n),i.length>0?this.fm(n,i):n},t.prototype.removeQueryString=function(t){var i=this.am(t),n=i.path;return""!==i.queryString?"".concat(n,"?"):n},t.prototype.am=function(t){var i=csString.prototype.indexOf.call(t,"?"),n="",r="";return-1!==i?(n=csString.prototype.slice.call(t,0,i),r=csString.prototype.slice.call(t,i,t.length)):n=t,{path:n,queryString:r}},t.prototype.fm=function(t,i){for(var n=this.am(t),r=n.path,s=n.queryString,e=csString.prototype.split.call(r,"/"),u=0,h=i;u<h.length;u++){var o=h[u],c=this.vm(e,o);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.vm=function(i,n){if(i.length<n.length)return null;for(var r="",s=0;s<i.length;s+=1)if(s>=n.length)r+="".concat(i[s],"/");else if(M(n[s].key,t.om))r+="".concat(n[s].value,"/");else{if(i[s]!==n[s].key)return null;r+="".concat(i[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.om=":",t}(),lo=function(){function t(t,i){this.hc=t,this.P=i}return t.prototype.getEventTargetPath=function(t){var i=rn(t);return this.hc.getElementPath(i,vt({dynamicIdRegex:this.P.dynamicIdRegex},this.P.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var i=rn(t),n=this.hc.getElementPathAndFirstAnchorParent(i,vt({dynamicIdRegex:this.P.dynamicIdRegex},this.P.pathComputationRules)),r=n.path,s=n.firstAnchorParent;return{path:r,targetLink:this.lm(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var i=rn(t);return this.hc.isValidElement(i)},t.prototype.getElementPath=function(t){return this.hc.getElementPath(t,vt({dynamicIdRegex:this.P.dynamicIdRegex},this.P.pathComputationRules))},t.prototype.lm=function(t){var i;return null!==t&&t.hasAttribute("href")&&!M(null!==(i=t.getAttribute("href"))&&void 0!==i?i:"","#")},t}(),wo=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,i){var n=this.dm(t,i),r=this.Kc.getElementPath(t);return this.wm(r,n)},t.prototype.dm=function(t,i){if(function(t){return void 0!==t.x&&void 0!==t.y}(i)){var n=t.getBoundingClientRect();i.x=Math.round(n.left+i.x+vn.windowOffsetX()),i.y=Math.round(n.top+i.y+vn.windowOffsetY())}return i},t.prototype.wm=function(t,i){return Cs(i)&&(i.tgt="".concat(t).concat(Vh).concat(i.tgt)),function(t){return void 0!==t.tgtHM}(i)&&(i.tgtHM="".concat(t).concat(Vh).concat(i.tgtHM)),function(t){return void 0!==t.tgtLk}(i)&&(i.tgtLk="".concat(t).concat(Vh).concat(i.tgtLk)),i},t}(),yo=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,i){var n=this.Kc.getElementPath(t);return{iframePath:i.iframePath?"".concat(n).concat(Vh).concat(i.iframePath):n,commands:i.commands}},t}(),po=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,i){if(0===i.products.length)return i;var n=this.Kc.getElementPath(t),r=csArray.prototype.map.call(i.products,(function(t){return vt(vt({},t),{targetPath:"".concat(n).concat(Vh).concat(t.targetPath)})}));return vt(vt({},i),{products:r})},t}(),mo=function(){function t(t){this.pi=t,this.ym={clientX:2,clientY:3},this.pm={clientX:1,clientY:2},this.gm=[Pi.POINTER_DOWN,Pi.POINTER_MOVE,Pi.POINTER_UP],this.Am=[Pi.TOUCH_START,Pi.TOUCH_MOVE,Pi.TOUCH_END]}return t.prototype.transformEvents=function(t,i){var n=this;if(!dn.isConnected(t))return i.events=csArray.prototype.filter.call(i.events,(function(t){return t.type!==Pi.VISIBILITY_CHANGE})),0===i.events.length||(Y.warn("IframeRecordingEventsTransformer received event ".concat(Gt.RecordingEvent," \n        from disconnected iframe, content:").concat(csJSON.stringify(i.events))),i.events=[]),i;var r=this.pi.getId(t);if(void 0===r)return Y.error("IframeRecordingEventsTransformer received event ".concat(Gt.RecordingEvent," \n        from unidentified iframe, content:").concat(csJSON.stringify(i.events))),i.events=[],i;var s=null;csArray.prototype.some.call(i.events,(function(t){return n.Em(t)||n.Sm(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=i.events;e<u.length;e++){var h=u[e];this.Em(h)?this.bm(s,h):this.Sm(h)&&this.Nm(s,h),h.context=h.context&&h.context.length>0?"".concat(r,"/").concat(h.context):"".concat(r)}return i},t.prototype.Nm=function(t,i){this.Tm(this.pm,t,i)},t.prototype.bm=function(t,i){this.Tm(this.ym,t,i)},t.prototype.Tm=function(t,i,n){n.args&&(n.args[t.clientX]=Math.round(i.left+n.args[t.clientX]),n.args[t.clientY]=Math.round(i.top+n.args[t.clientY]))},t.prototype.Em=function(t){return-1!==csArray.prototype.indexOf.call(this.gm,t.type)},t.prototype.Sm=function(t){return-1!==csArray.prototype.indexOf.call(this.Am,t.type)},t}(),go=function(){function t(t,i,n){this.P=t,this.$=i,this.j=n}return t.prototype.init=function(){var t,i,n,r=this,s="boot";(null===(t=window.performance)||void 0===t?void 0:t.mark)&&window.performance.mark("cs-start-".concat(s));var e=new Bu,u=new Ot,h=new vo(u),o=new Ph(window.location,h),c=new ti(this.P,o,this.$);c.init();var f=new ro,a=new so,v=new ch(window.location,c),l=new xh(this.P,c);l.init();var d,w=to.create(Y.warn);if(this.P.useMalkaPipeline){var y=new Hi(this.P.getQuotaServiceUri(),"quota");(d=new Vu(this.P,w,y,e,v,o)).init()}else d=new Hu(this.P,w,v,o);var p=new Ai(this.P,c,l,f),m=new zu(p,d),g=new li(this.P,c,l,f),A=new qu(this.P,g,m);this.j.setContext(A,m),d.setVisitorService(A);var E=new Gu(A,m),S=new Ti(this.P,c,l,f),b=new nh(window.location,S),N=new rh(b),T=new Ju(this.P,A,b),R=new xn,O=new lo(ht,this.P),k=new wo(O),I=new yo(O),x=new po(O),L=new mo(R),C=new zh(k,I,x,L),_=new gh,M=new ph(_,C),D=new eh(o),P=new hh(D,_),U=new Oi(this.P,c,l,f),j=new oo(u,U),q=new fo(_,j),F=new fi(A,m,b,j,this.P),H=new xi,V=new Ii(H,window.location),z=new yh(this.P,F,V),J=new Lh(this.P,H);l.setStates(F,J),new Uu(this.P,A,b,T,E,z,l,v).compute((function(t){var i;M.init();var n=new Uh,f=new Xu(r.P,c,a),v=new th(r.P,f,e),l=new Qu(_,v),d=new ah(r.P,c,a),y=new vh(e,window.location,d),p=new dh(_,y),g=new Mh(_,r.P),E=new Ch(r.P,A,m),S=new _h,b=new fr,T=new ao(r.P),R=new Fh(b,T,r.P),k=new Hh(b,T,r.P),I=new jh(R,k),x=new io(h),L=new no(u,o),U=new kh(S,L,I,x,u,r.P,E,C,_,n,o);(U.init(),(null===(i=window.performance)||void 0===i?void 0:i.mark)&&window.performance.mark("cs-step2-".concat(s)),e.addListeners(U),t)?(e.emitInitTracking(),new Pu(E,w,A,m,e,_,M,r.P,p,y,l,v,u,O,h,o,g,n,S,L,I,x,C,j,q,D,P).start()):new ih(e,_,M,p,y,N,l).start()})),(null===(i=window.performance)||void 0===i?void 0:i.mark)&&(null===(n=window.performance)||void 0===n?void 0:n.measure)&&(window.performance.mark("cs-end-".concat(s)),window.performance.measure("cs-measure-".concat(s),"cs-start-".concat(s),"cs-end-".concat(s)))},t}();!function(t){var i,n="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var h=t.source,o=t.data;if(e(o)){var a=function(){var i,n,r,e=s("{domain}/tag/tag.bundle.js?v={version}",o);i=e,n=function(){return h.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=i,r.onload=n,r.charset="utf-8",document.head.appendChild(r)};i=o.token,f(r.loadBundle),u(t.origin)?a():function(t,i){var r=s(n,t),e=function(t){var i=document.createElement("iframe");return i.src=t,i.id="content-square-bridge",i.setAttribute("style","display: none !important; visibility: hidden !important;"),i}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(f(u),e.remove(),i())};c(u),document.head.appendChild(e)}(o,a)}}};function s(t,i){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",i.version),"{token}",i.token),"{domain}",i.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&o(t.version)&&h(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function h(t){return/^[a-zA-Z0-9]+$/.test(t)}function o(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function f(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return i},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=h,t.isAuthorizedTagVersion=o,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=f}($h||($h={})),function(t){var i,n=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(i=t.origin,o(s.ping),h(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var i=t.data;"string"==typeof i&&"ping"!==i&&(o(s.insertMessageScript),u(i))}))};function e(t){return csArray.prototype.some.call(r,(function(i){return i.test(t)}))}function u(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(i,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=n,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function h(t){window.addEventListener("message",t,!1)}function o(t){window.removeEventListener("message",t,!1)}function c(t){return function(n){n.origin===i&&t(n)}}t.getToken=function(){return $h.getToken()},t.isActivable=function(){return window!==n&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){h(s.ping),$h.waitForBundleInjection()},t.listen=h,t.removeListener=o,t.secureListener=c,t.post=function(t){i&&n.postMessage(t,i)}}(Zh||(Zh={}));var Ao,Eo,So=window.CSFrameCommunication||Zh,bo=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i.prototype.emitAfterPageViewCallback=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},i.prototype.emitIntegrationSessionKeyCallback=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},i.prototype.emitParentRecordingStatusChange=function(t){for(var i=0,n=this.listeners;i<n.length;i++){var r=n[i];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},i}(Wu),No=function(){function t(t){this.Rm=t}return t.prototype.init=function(){this.Rm.register(gs),this.Rm.register(co),this.Rm.register(He),this.Rm.register(Ve),this.Rm.register(Fe),this.Rm.register(Rs),this.Rm.register(Os),this.Rm.register(ks),this.Rm.register(Is),this.Rm.register(Ye),this.Rm.register(Xe),this.Rm.register(lh),this.Rm.register(yu),this.Rm.register(pu),this.Rm.register($u),this.Rm.register(Zu),this.Rm.register(Oh),this.Rm.register(Rh)},t.prototype.onStartTracking=function(){this.Rm.start()},t.prototype.onOptout=function(){this.Rm.stop()},t}(),To=function(t){function i(i,n){var r=t.call(this)||this;return r.lo=i,r.Om=n,r.Go=[],r}return at(i,t),i.prototype.onStart=function(){this.commandsBatchReady()},i.prototype.onStop=function(){this.Go=[]},i.prototype.register=function(t){for(var i=this,n=function(t){r.lo.register([t],(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return i.send(t,n)}))},r=this,s=0,e=t;s<e.length;s++){n(e[s])}},i.prototype.send=function(t,i){csArray.prototype.push.call(this.Go,{name:t,params:i}),this.isStarted&&this.commandsBatchReady()},i.prototype.commandsBatchReady=function(){if(0!==this.Go.length){var t={commands:this.Go};this.Om.sendToParent(Gt.Commands,t),this.Go=[]}},lt([X("Commands.iframe.commandsBatch.send")],i.prototype,"send",null),lt([Er(),X("send iframe commands batch")],i.prototype,"commandsBatchReady",null),i}(An),Ro=function(t){function i(i,n,r){var s=t.call(this)||this;return s.P=i,s.Zi=n,s.km=r,s.Im=null,s.xm=25,s.Lm=[],s.Cm={boundElement:window,type:"message",listener:function(t){return s.Ul(t)}},s}return at(i,t),i.prototype.onStart=function(){Ji(this.Cm,!1),this._m()},i.prototype.onStop=function(){Gi(this.Cm,!1),this.Im&&(Wt.closeChannelPort(this.Im),this.Im=null)},i.prototype.sendToParent=function(t,i){var n=this.Mm(t,i);this.Jy(n)},i.prototype._m=function(){var t=this.Mm(Gt.Discovery);Wt.sendPostMessage(window.parent,"*",t)},i.prototype.Mm=function(t,i){var n=Wt.buildBaseMessage(t,Jt.Child,this.P.projectId);return i&&(n.content=i),n},i.prototype.Jy=function(t){null!==this.Im?Wt.sendChannelMessage(this.Im,t):this.Dm(t)},i.prototype.Pm=function(t,i){var n=this,r=new MessageChannel;this.Im=r.port1,this.Im.onmessage=function(t){n.td(t)};var s=this.Mm(Gt.Discovery);s.id=i,Wt.sendPostMessage(window.parent,t,s,[r.port2]),this.Um()},i.prototype.td=function(t){switch(t.data.type){case Gt.IntegrationCallback:var i=t.data.content;i.initiator===zt.AfterPageView?this.km.emitAfterPageViewCallback(i):i.initiator===zt.GetSessionKey?this.km.emitIntegrationSessionKeyCallback(i):Y.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case Gt.Stop:this.Zi.emitOptout();break;case Gt.RecordingStatus:var n=t.data.content;this.km.emitParentRecordingStatusChange(n);break;default:Y.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},i.prototype.Ul=function(t){if(null===this.Im&&Wt.isMessageValid(t,Jt.Parent,this.P.projectId,this.P.hostnames))switch(t.data.type){case Gt.Stop:this.Zi.emitOptout();break;case Gt.Discovery:if(!V(t.data.id)||t.data.id<0)return void Y.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.Pm(t.origin,t.data.id);break;default:Y.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},i.prototype.Dm=function(t){this.Lm.length<this.xm&&csArray.prototype.push.call(this.Lm,t)},i.prototype.Um=function(){if(null!==this.Im){for(var t=0,i=this.Lm;t<i.length;t++){var n=i[t];Wt.sendChannelMessage(this.Im,n)}this.jm(),this.Lm=[]}},i.prototype.jm=function(){var t=Wt.buildBaseMessage(Gt.EndOfBufferedMessages,Jt.Child,this.P.projectId);Wt.sendChannelMessage(this.Im,t)},i}(An),Oo=function(t){function i(i,n){var r=t.call(this)||this;return r.Cn=i,r.Om=n,r}return at(i,t),i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.Qn,(function(i){return t.Zn(i)}))},i.prototype.onStop=function(){this.Cn.unsubscribe(i.Qn)},i.prototype.Zn=function(t){this.isStarted&&this.Om.sendToParent(Gt.ApiError,t)},i.Qn="ChildApiErrorsService",i}(An),ko=function(t){function i(i,n){var r=t.call(this)||this;return r.Cn=i,r.Om=n,r}return at(i,t),i.prototype.onStart=function(){var t=this;this.Cn.subscribe(i.Qn,(function(i){return t.Zn(i)}),{detailedEvent:!0})},i.prototype.onStop=function(){this.Cn.unsubscribe(i.Qn)},i.prototype.Zn=function(t){this.isStarted&&this.Om.sendToParent(Gt.DetailedApiError,t)},i.Qn="ChildDetailedApiErrorsService",i}(An),Io=function(t){function i(i,n){var r=t.call(this)||this;return r.xn=i,r.Om=n,r}return at(i,t),i.prototype.onStart=function(){var t=this;this.xn.subscribe(i.Qn,(function(i){return t.Zn(i)}))},i.prototype.onStop=function(){this.xn.unsubscribe(i.Qn)},i.prototype.Zn=function(t){this.isStarted&&this.Om.sendToParent(Gt.JavascriptError,t)},i.Qn="ChildJavaScriptErrorsService",i}(An),xo=function(){function t(t,i,n,r){this.xn=t,this.Cn=i,this.P=n,this.Om=r}return t.prototype.init=function(){this.qm=new Io(this.xn,this.Om),this.Cn.excludeDomains([mh.CONTENTSQUARE,mh.CLICKTALE,mh.FAKE_TRACKER]),this.Fm=new Oo(this.Cn,this.Om),this.Hm=new ko(this.Cn,this.Om),this.Cn.init()},t.prototype.onStartTracking=function(){this.P.jsErrorsEnabled&&this.qm.start(),this.P.apiErrors.enabled&&this.Fm.start()},t.prototype.onParentRecordingStatusChange=function(t){this.P.apiErrors.enabled&&(t.isRecording?this.Hm.start():this.Hm.stop())},t.prototype.onOptout=function(){this.qm.stop(),this.Fm.stop(),this.Hm.stop()},t}(),Lo=function(){function t(t){this.Om=t}return t.prototype.onStartTracking=function(){this.Om.start()},t.prototype.onOptout=function(){this.Om.stop()},t}(),Co=function(){function t(){this.Vm=null}return t.prototype.getRecordingStatus=function(){return null===this.Vm?{isRecording:!1}:this.Vm},t.prototype.setRecordingStatus=function(t){this.Vm=t},t}(),_o=function(){function t(t,i,n){this.Fo=t,this.Ho=i,this.Om=n}return t.prototype.init=function(){var t=this;this.zm=new Co,this.Fo.onChildMessage((function(i,n,r){return t.Ho.emitIframeEvent(i,n,r)})),this.Fo.setRecordingStatusCallback((function(){return t.zm.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Fo.start()},t.prototype.onOptout=function(){this.Fo.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var i={events:t,containsUserEvent:!0};this.Om.sendToParent(Gt.RecordingEvent,i)},t.prototype.onIframeRecordingBrowserEvent=function(t){var i={events:t,containsUserEvent:!1};this.Om.sendToParent(Gt.RecordingEvent,i)},t.prototype.onIframeAnalysisEvent=function(t){this.Om.sendToParent(Gt.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.Om.sendToParent(Gt.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.Om.sendToParent(Gt.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.Om.sendToParent(Gt.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.Om.sendToParent(Gt.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.Om.sendToParent(Gt.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.Om.sendToParent(Gt.IntegrationCallback,t)},t.prototype.onAfterPageViewCallback=function(t){this.Fo.sendToChildren(Gt.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Fo.sendToChildren(Gt.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.zm.setRecordingStatus(t),this.Fo.sendToChildren(Gt.RecordingStatus,t)},t}(),Mo=function(t){function i(i,n,r,s,e){var u=t.call(this)||this;return u.Hc=i,u.Zu=n,u.Om=r,u.Zc=s,u.tf=e,u}return at(i,t),i.prototype.init=function(){var t,i,n=this;this.Hc.onEvent((function(t){return n.Zn(t)})),this.Zu.onEvent((function(t){return n.Zn(t)})),null===(t=this.Zc)||void 0===t||t.onEvent((function(t){return n.Zn(t)})),null===(i=this.tf)||void 0===i||i.onEvent((function(t){return n.Zn(t)}))},i.prototype.onStart=function(){var t,i;this.Hc.start(),this.Zu.start(),null===(t=this.Zc)||void 0===t||t.start(),null===(i=this.tf)||void 0===i||i.start()},i.prototype.onStop=function(){var t,i;this.Hc.stop(),this.Zu.stop(),null===(t=this.Zc)||void 0===t||t.stop(),null===(i=this.tf)||void 0===i||i.stop()},i.prototype.Zn=function(t){this.isStarted&&t.type!==Kr.RESIZE&&this.Om.sendToParent(Gt.AnalysisEvent,t)},i}(An),Do=function(){function t(t,i,n,r){this.P=t,this.Kc=i,this.yi=n,this.Om=r}return t.prototype.init=function(){var t,i;this.P.accessibilityEnabled&&(t=new ke,i=new Ie);var n=new Ys(this.P,this.Kc,this.yi),r=new js(this.P,this.Kc,new Cu(Y));this.Jm=new Mo(n,r,this.Om,t,i),this.Jm.init()},t.prototype.onStartTracking=function(){this.Jm.start()},t.prototype.onOptout=function(){this.Jm.stop()},t}(),Po=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return at(i,t),i}(tu),Uo=function(){function t(t,i,n){this.X=t,this.Gm=i,this.Om=n,this.hv=[]}return t.prototype.collect=function(){var t=this.Gm.collectProductsAndAnchors().products;this.hv=t,this.Wm=this.X.getAnonymizedUrl(),this.Bm()},t.prototype.clearProducts=function(){this.hv=[]},t.prototype.Bm=function(){var t={targetUrl:this.Wm,windowWidth:vn.windowWidth(),windowHeight:vn.windowHeight(),products:this.hv};this.Om.sendToParent(Gt.EmerchandisingMessage,t)},t}(),jo=function(){function t(t,i,n,r){this.P=t,this.Kc=i,this.X=n,this.Om=r}return t.prototype.init=function(){var t=new Po(this.P,this.Kc);this.Km=new Uo(this.X,t,this.Om)},t.prototype.onStartTracking=function(){this.Km.clearProducts(),this.Km.collect()},t.prototype.onAfterPageViewCallback=function(){this.Km.clearProducts(),this.Km.collect()},t}(),qo=function(t){function i(i,n,r,s,e,u,h,o,c,f,a,v){var l=t.call(this)||this;return l.P=i,l.bn=n,l.Nn=r,l.Tn=s,l.Rn=e,l.On=u,l.$i=h,l.In=o,l._n=c,l.gi=f,l.Pn=a,l.Om=v,l.Hn=new gn,l.Vn=!1,l.En=[],l.Ym=!1,l.Jn=function(t){return l.if(t)},l.Gn=function(t){return l.Wn(t)},l}return at(i,t),i.prototype.init=function(){this.Kn()},i.prototype.Kn=function(){this.bn.onEvent(this.Jn),this.Nn.onEvent(this.Jn),this.Rn.onEvent(this.Jn),this.Tn.onEvent(this.Gn),this.$i.onEvent(this.Jn),this.In.onEvent(this.Jn),this._n.onEvent(this.Jn),this.On.onEvent(this.Gn),this.gi.onTextNodeToEncrypt(this.Jn),this.Pn.onEvent(this.Jn)},i.prototype.blockSendingEventsFromSerialization=function(){this.Vn=!1},i.prototype.allowSendingEventsFromSerialization=function(){this.Vn=!0},i.prototype.if=function(t){this.Xm(t),this.$m()},i.prototype.Wn=function(t){this.Zm(t),this.$m()},i.prototype.Zm=function(t){csArray.prototype.push.call(this.En,t),this.Ym=!0},i.prototype.Xm=function(t){csArray.prototype.push.call(this.En,t)},i.prototype.$m=function(){if(this.Vn){var t={containsUserEvent:this.Ym,events:this.En};this.Om.sendToParent(Gt.RecordingEvent,t),this.En=[],this.Ym=!1}},i.prototype.onStart=function(){this.Pn.start(),this.In.start(),this.Nn.start(),this.bn.start(),this._n.start(),this.Rn.start(),this.On.start(),this.P.emitDebugEvents&&this.Hn.emit("replayRecordingStarted")},i.prototype.onStop=function(){this.bn.stop(),this.Nn.stop(),this.Rn.stop(),this.Tn.stop(),this._n.stop(),this.On.stop(),this.Pn.stop()},i.prototype.addInitialDom=function(t){for(var i=0;i<this.En.length;i+=1){if(this.En[i].date>t.date)return csArray.prototype.splice.call(this.En,i,0,t),this.Ym=!0,void this.$m()}this.Zm(t),this.$m()},i}(An),Fo=function(){function t(t,i,n,r,s,e,u,h,o,c){this.P=t,this.oi=i,this.yi=n,this.U=r,this.pi=s,this.mi=e,this.Zu=u,this.Zi=h,this.Om=o,this.lo=c}return t.prototype.init=function(){var t=this,i=new fr,n=new Cn(this.mi);this.po=new qn(this.U,this.P),this.po.init();var r=new nr,s=new ur(i,this.pi),e=new _r(window.crypto),u=new Dr(window.crypto);u.init(),e.init();var h=new xr,o=new xr,c=new xr,f=new xr,a=new xr,v=new kr(this.pi,this.P,u,e,h,o,c,a,f,this.oi);v.init();var l=new Ir(v),d=[n,this.po,l,r],w=new Rr(this.mi,1e3);this.P.textVisibilityEnabled&&csArray.prototype.push.call(d,w);var y,p=new Qr;if(p.isSupported()&&csArray.prototype.push.call(d,p.getProcessor()),this.mo()){var m=new Wr(this.pi);y=new $r(d,this.pi,m)}else y=new Zr(d);this.Yi=new kn(y,this.pi,this.po,v),this.Tn=new hn(this.yi,this.pi,this.mi,v),this.Tn.init(),this.Nn=new wn(this.Yi,s,r,this.Zi,this.pi,this.mi),this.Qm=new qo(this.P,new In(i,this.pi,this.mi,r),this.Nn,this.Tn,new Bn(window.location,this.U),new Pr(this.Zu,this.pi,this.mi),r,new rr(window),w,v,p,this.Om),this.lo.register(us,(function(i){t.po.setWhitelistedElementsSelector(i)})),this.lo.register(hs,(function(i){t.mi.setPIISelectors(i)})),s.init(),this.Qm.init()},t.prototype.onParentRecordingStatusChange=function(t){t.PIISelectors&&this.mi.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.po.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.Yi.setAnonymization(t.useAnonymization),t.isRecording?this.Qm.start():this.Qm.stop(),t.isMutationTrackerStarted?this.Nn.start():this.Nn.stop()},t.prototype.onInitialDomStart=function(){this.Qm.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.Tn.start(),this.Qm.allowSendingEventsFromSerialization(),this.Qm.addInitialDom(t)},t.prototype.mo=function(){return ss.isAsyncSerializationSupported()&&this.P.asyncSerializerEnabled},t}(),Ho=function(){function t(t){this.Om=t,this._o={}}return t.prototype.handleCommand=function(t){B(t)&&this.Mo(t)},t.prototype.executeRegisteredCallbacks=function(t){var i=t.trackingContext;if(i)if(t.callbackId){var n=this._o[t.callbackId];n&&this.Do(n,i)}else for(var r in this._o)this.Do(this._o[r],i)},t.prototype.Mo=function(t){var i=U.integer(),n={callbackId:i,initiator:zt.AfterPageView};this._o[i]=t,this.Om.sendToParent(Gt.IntegrationCallback,n)},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),Vo=function(){function t(t){this.Om=t,this.Po={}}return t.prototype.handleCommand=function(t){J(t)&&B(t.callback)&&this.jo(t.callback)},t.prototype.executePendingCallbacks=function(t){var i=t.trackingContext,n=t.callbackId;if(n&&i){var r=this.Po[n];r&&(delete this.Po[n],this.Do(r,i.sessionKey))}},t.prototype.jo=function(t){var i=U.integer(),n={callbackId:i,initiator:zt.GetSessionKey};this.Po[i]=t,this.Om.sendToParent(Gt.IntegrationCallback,n)},t.prototype.Do=function(t,i){setTimeout((function(){t(i)}))},t}(),zo=function(){function t(t,i){this.lo=t,this.Om=i}return t.prototype.init=function(){var t=this;this.tg=new Ho(this.Om),this.ig=new Vo(this.Om),this.lo.register(ls,(function(i){t.tg.handleCommand(i)})),this.lo.register(ds,(function(i){return t.ig.handleCommand(i)}))},t.prototype.onAfterPageViewCallback=function(t){this.tg.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.ig.executePendingCallbacks(t)},t}(),Jo=function(){function t(t,i,n,r,s){var e=this;this.ng=t,this.Zi=i,this.P=n,this.Om=r,this.lo=s,this.Kd=function(){e.lo.start(),e.Xd.start()}}return t.prototype.start=function(){var t=this,i=new lo(ht,this.P),n=new Be(i),r=new Ot,s=to.create(Y.warn),e=new Do(this.P,i,n,this.Om),u=new Lo(this.Om);if(this.P.eMerchandisingEnabled){var h=new Ot,o=new vo(h),c=new Ph(window.location,o),f=new jo(this.P,i,c,this.Om);this.ng.addListeners(f),this.Zi.addListeners(f),f.init()}var a=new zo(this.lo,this.Om);this.ng.addListeners(a),a.init();var v=new xn,l=new Tu(this.P);if(ss.isRecordingSupported()&&s.isSupported()){var d=new Cu(Y),w=new Fo(this.P,s,n,r,v,l,d,this.Zi,this.Om,this.lo);this.Zi.addListeners(w),this.ng.addListeners(w),w.init()}var y=new ku(this.P,l),p=new wo(i),m=new yo(i),g=new po(i),A=new mo(v),E=new zh(p,m,g,A),S=new _o(y,E,this.Om);E.addListeners(S),this.ng.addListeners(S),this.Zi.addListeners(u,S,e),S.init(),e.init(),this.Xd=new Ke,this.Xd.onLoad((function(){t.Zi.emitStartTracking()})),this.Kd()},t}(),Go=function(){function t(t){this.P=t}return t.prototype.init=function(){var t=new Bu,i=new bo,n=new Ro(this.P,t,i),r=new gh,s=new To(r,n),e=new No(s);e.init();var u=new _h,h=new ao(this.P),o=new fr,c=new Fh(o,h,this.P),f=new Hh(o,h,this.P),a=new jh(c,f),v=new xo(u,a,this.P,n);v.init(),i.addListeners(v),t.addListeners(e,v),t.emitInitTracking(),new Jo(i,t,this.P,n,r).start()},t}(),Wo=function(){function t(t,i,n){this.P=t,this.at=i,this.j=n}return t.prototype.start=function(){var t,i;if(!window.UXAnalytics){var n=new ni(this.at,this.P);n.init();var r=new ci(this.P,n);if(this.at.isTopWindowTracker()&&r.canTrack()){if((null===(t=window.CSProtectnativeFunctionsLogs)||void 0===t?void 0:t.Warning)&&Y.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(i=window.CSProtectnativeFunctionsLogs)||void 0===i?void 0:i.Critical)return void Y.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new go(this.P,n,this.j).init()}else if(!this.at.isTopWindowTracker()&&r.canTrackInChild()){new Go(this.P).init()}window.UXAnalytics={},!window.CSFrameCommunication&&So.isActivable()&&(window.CSFrameCommunication=So,So.waitForConnection())}},lt([nn("main.start"),X("main.start")],t.prototype,"start",null),t}();try{(null===(Ao=window.performance)||void 0===Ao?void 0:Ao.mark)&&window.performance.mark("cs-start-tag");var Bo=new mt(window.CS_CONF);window._uxa=window._uxa||[],Bo.processOptionOverrides(window._uxa);var Ko=new gt(window,Bo);Ko.init();var Yo=new Qt;if(Y.computeIsActive(Bo.validationRate),Ko.isTopWindowTracker()){var Xo=new jt(Bo,Yo);Y.setStrategy(Xo)}else{var $o=new Zt(Bo);Y.setStrategy($o)}void 0===Eo&&(Eo=50),Ki=Y.isLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var i="isPerformanceMeasureSupported",n="".concat(i,"_a");return performance.mark(n),void 0!==performance.measure(i,n)}(),Ki&&(Bi=Eo),new Wo(Bo,Ko,Yo).start()}catch(t){}}();