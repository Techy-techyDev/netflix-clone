"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60235,90819],{90819:function(i,t,e){e.d(t,{D:function(){return d}});var n=e(14924),r=e(26042),o=e(69396),u=e(99534),s=e(10253),a=e(36305),c=e(76395),l=e(67294),d=function(i){var t=i.namespace,e=i.translationKeys,d=(0,c.$G)(t),p=d.t,v=(0,u.Z)(d,["t"]),f=JSON.stringify(e),b=(0,l.useMemo)(function(){return Object.entries(e).reduce(function(i,t){var e=(0,s.Z)(t,2),u=e[0],c=e[1];return(0,o.Z)((0,r.Z)({},i),(0,n.Z)({},u,Array.isArray(c)?p.apply(void 0,(0,a.Z)(c)):p(c)))},{})},[p,f]);return(0,r.Z)({t:p,labels:b},v)}},60235:function(i,t,e){e.d(t,{Oy:function(){return R},DJ:function(){return F},_Y:function(){return N},av:function(){return I},V9:function(){return k}});var n=e(26042),r=e(69396),o=e(99534),u=e(36305),s=e(18721),a=e.n(s),c=e(40821),l=e(85672),d=e(331),p=e(19576),v=e(71049),f=e(98510),b=e(8062),S=e(36311),m=e(90819),g=e(19805),y=e(93636),C=e(36839),w=e(75957),D=e(14587),U=e(96360),Z=[{name:"years",unit:"Y"},{name:"months",unit:"M"},{name:"weeks",unit:"W"},{name:"days",unit:"D"}],_=RegExp(["P"].concat((0,u.Z)(Z.map(function(i){var t=i.name,e=i.unit;return"((?<".concat(t,">-?\\d+)").concat(e,")?")}))).join("")),x=function(i){var t=_.exec(i);if(!t||!t.groups)return[];var e=t.groups;return Z.reduce(function(i,t){var n=t.name,r=parseInt(e[n],10);return Number.isNaN(r)||i.push({name:n,value:r}),i},[])},h={years:function(i){var t=i.date,e=i.numberOfUnits;return t.setUTCFullYear(t.getUTCFullYear()-e),t},months:function(i){var t=i.date,e=i.numberOfUnits;return t.setUTCMonth(t.getUTCMonth()-e),t},weeks:function(i){var t=i.date,e=i.numberOfUnits;return t.setUTCDate(t.getUTCDate()-7*e),t},days:function(i){var t=i.date,e=i.numberOfUnits;return t.setUTCDate(t.getUTCDate()-e),t}},A=function(i){var t=i.date,e=i.parsedDuration,n=new Date(t);return e.reduce(function(i,t){var e=t.name,n=t.value;return h[e]({date:i,numberOfUnits:n})},n).toISOString()},P=function(i){var t=i.date,e=i.duration;if(!t||!e)return null;try{var n=x(e);if(!n.length)return null;return A({date:t,parsedDuration:n})}catch(r){return null}},M={editorialImageSubscriptions:p.T_F,editorialImageCompSubscriptions:p.fuJ,editorialVideoSubscriptions:p.vWI,editorialVideoCompSubscriptions:p.Ujq,imageSubscriptions:p.xk7,imageCompSubscriptions:[p.Ixo],videoSubscriptions:p.S9k,videoCompSubscriptions:[p.f12],videoPremierSubscriptions:p.XmM,videoPremierSmSubscriptions:p.JI$,videoMediaSubscriptions:p.YVt,videoPlatformSubscriptions:p.Lj9,videoMediaSmSubscriptions:p.ISv,videoPremierSelectSubscriptions:[p.Mbf],videoMediaSelectSubscriptions:[p.Gap],musicSubscriptions:p.xq7,musicCompSubscriptions:p.Yem,sfxSubscriptions:p.dCf,sfxCompSubscriptions:p.uZM,flexSubscriptions:p.zUo,creativeFlowPlusSubscription:p.FLW,apiPlanSubscription:p.px9},O=function(i){var t,e,n,r=i.types,o=i.subscription,u=null==o?void 0:null===(t=o.product)||void 0===t?void 0:t.reportingBusinessUnit.toLowerCase().trim(),s=null==o?void 0:null===(e=o.product)||void 0===e?void 0:e.businessUnit;return!a()(o,"redeemableFor")&&[p.T2Y,p.A7v].includes(s)&&[p.aTO,p.FLW,p.px9].includes(u)||(null==o?void 0:null===(n=o.product)||void 0===n?void 0:n.name)===v.Ln?r.includes(u):r.includes(null==o?void 0:o.redeemableFor)||!a()(o,"redeemableFor")&&r.includes(s)},T=function(i){var t,e,o,u,s,a=i.activeSubscriptions,c=i.subscriptions;if(!c)return{};var l=function(i){return P({date:i.subscriptionExpiration,duration:i.duration})},d=function(i,t){var e=i.startDate;return t.startDate-e},p=a.map(function(i){return(0,r.Z)((0,n.Z)({},i),{startDate:new Date(l(i))})}).sort(d)[0]||c.map(function(i){return(0,r.Z)((0,n.Z)({},i),{startDate:new Date(l(i))})}).sort(d)[0];return p?{orderType:p.purchaseType,subscriptionId:p.id,subscriptionPermissionsExpireDate:p.subscriptionExpiration,autoRenewal:p.autoRenewal?String(p.autoRenewal):void 0,productTextId:null==p?void 0:null===(t=p.product)||void 0===t?void 0:t.name,productLengthTerm:p.duration,productDownloadAllotment:(null===(e=p.product)||void 0===e?void 0:e.downloadCredits)?String(null===(o=p.product)||void 0===o?void 0:o.downloadCredits):void 0,productReportingBusinessUnit:null===(u=p.product)||void 0===u?void 0:u.reportingBusinessUnit,productCategory:null===(s=p.product)||void 0===s?void 0:s.revenueModelDetail}:{}},F=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.queryParams,e=(void 0===t?{}:t).expiringAfter,r=void 0===e?null:e,o=i.config,u=void 0===o?{}:o,s=(0,g.B)(),a=(0,g.j)().data,d=(0,n.Z)({user:null==a?void 0:a.id,organization:null==a?void 0:a.organizationId},r&&{expiring_after:r}||{}),p=(0,l.ec)({queryParams:d}).formattedUrl;return(0,c.ZP)(s?p:null,function(){return w.uS.get(p,u).then(function(i){return(0,D.O)(i.data)})},{dedupingInterval:f.no})},R=function(i){return i.reduce(function(i,t){return Object.keys(M).forEach(function(e){O({types:M[e],subscription:t})&&i[e].push((0,r.Z)((0,n.Z)({},t),{type:e}))}),i},{editorialImageSubscriptions:[],editorialImageCompSubscriptions:[],editorialVideoSubscriptions:[],editorialVideoCompSubscriptions:[],imageSubscriptions:[],imageCompSubscriptions:[],videoSubscriptions:[],videoCompSubscriptions:[],videoPremierSubscriptions:[],videoPremierSmSubscriptions:[],videoMediaSubscriptions:[],videoMediaSmSubscriptions:[],videoPlatformSubscriptions:[],videoPremierSelectSubscriptions:[],videoMediaSelectSubscriptions:[],musicSubscriptions:[],musicCompSubscriptions:[],sfxSubscriptions:[],sfxCompSubscriptions:[],flexSubscriptions:[],creativeFlowPlusSubscription:[],apiPlanSubscription:[]})},I=function(){var i,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.expiringAfter,r=t.onlyActive,s=t.config,a=(0,g.B)(),c=(0,y.U)(),l=c.isLoading,d=(0,o.Z)(c,["isLoading"]),p=F({queryParams:{expiringAfter:void 0===e?null:e},config:void 0===s?{}:s}),v=p.data,f=p.mutate,b=(0,C.w)().data,m=(void 0===b?{}:b).data;if(l||a&&void 0===v)return{data:void 0};var w=Array.isArray(v)?null==v?void 0:v.filter(function(i){return"active"===i.status}):[],D=Array.isArray(v)?T({activeSubscriptions:w,subscriptions:v}):{},U=void 0!==r&&r?w:v;if((0,S.Kc)({userCapabilities:d})){var Z=(0,S.cT)({userCapabilities:d,subscriptions:v}),_=Z.formattedSubscriptions,x=Z.debitableSubscriptionInfo;U=_,i=x}var h=R(U||[]),A=(void 0===m?{}:m).attributes,P=(void 0===A?{}:A).lifetimeProducts,M=(void 0===P?null:P)||Array.isArray(v)&&v&&v.length||0;return{data:(0,n.Z)({allSubscriptions:Object.values(h).reduce(function(i,t){return(0,u.Z)(i).concat((0,u.Z)(t))},[]),activeSubscriptions:w,mostRecentSubscription:D,totalNumSubscriptionsAllTime:M,totalNumSubscriptionsActive:w&&w.length||0},h,i),mutate:f}},k=function(){var i=(0,g.B)(),t=I({});return!1===i?{data:{activeSubscriptions:[],allSubscriptions:[],mostRecentSubscription:void 0,totalNumSubscriptionsActive:0,totalNumSubscriptionsAllTime:0}}:t},N=function(){var i=(0,m.D)({namespace:U.pDn,translationKeys:{autoRenewOnSuccess:"notifications:label_auto_renew_success_on",autoRenewOffSuccess:"notifications:label_auto_renew_success_off",genericFailure:"notifications:label_generic_failure",cancelSubscriptionSuccess:"notifications:subscription_cancellation_success_message",cancelSubscriptionFailure:"notifications:cancellable_error_message"}}).labels,t=(0,b.D)().enqueueSnackbar;return{notifyAutoRenewOnSuccess:function(){t({alertSeverity:d.MR,message:i.autoRenewOnSuccess})},notifyAutoRenewOffSuccess:function(){t({alertSeverity:d.MR,message:i.autoRenewOffSuccess})},notifyCancelSubscriptionSuccess:function(){t({alertSeverity:d.MR,message:i.cancelSubscriptionSuccess})},notifyFailure:function(){t({alertSeverity:d.cM,message:i.genericFailure})},notifyCancelSubscriptionFailure:function(){t({alertSeverity:d.cM,message:i.cancelSubscriptionFailure})}}}},36839:function(i,t,e){e.d(t,{w:function(){return s}});var n=e(40821),r=e(85672),o=e(19805),u=e(75957),s=function(){var i=(0,o.B)(),t=(0,r.sY)().formattedUrl;return(0,n.ZP)(i?t:null,function(){return u.uS.get(t).then(function(i){return i.data})})}}}]);
//# sourceMappingURL=60235-a1a80a1ebc5edc5d.js.map